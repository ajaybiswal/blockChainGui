{"version":3,"sources":["components/carousel.js"],"names":["Carousel","el","params","_init","_carouselItem","parent","dot","order","a","addTransform","x","setTransform","transform","setAttribute","setSelected","b","selected","currentPosition","dims","left","width","getBoundingClientRect","sparkcarouselitem","sparkcarouselitemdot","sparkcarousel","backe","querySelector","forwarde","outerContainer","containerMask","container","dots","pauseEl","opts","wrapItems","attributes","startingVelocity","value","smoothScroll","smoothScrollCenterItems","panelScroll","edgeScroll","autoAdvance","pause","window","setTimeout","_autoAdvance","bind","pauseH","_pause","addEventListener","querySelectorAll","items","totalItemWidth","height","document","createDocumentFragment","i","length","createElement","appendChild","push","firstChild","removeChild","style","msFlexAlign","_transformItems","_setTransform","_handleVisibleChildren","_handleVisibleChildrenH","_rafHandler","_rafHandlerH","resizeH","_resize","touchstartH","_setupListeners","_addTransform","_removeListeners","_updateSelected","remove","leaveElement","removeEventListener","moves","_rafCancel","_scrollTo","_selectedItem","clearTimeout","_setPause","_laststart","paused","indexOf","_scrollToItem","_touchstart","touchmoveH","_touchmove","touchendH","_touchend","mousedownH","_mousedown","mousemoveH","_mousemove","mouseupH","_mouseup","forwardH","_forward","backH","_back","clickH","_click","_focusHandler","_scrollToClicked","e","target","contains","change","s","_startingVelocity","preventDefault","_movestart","_move","pageX","Math","abs","pageY","cancelable","type","_moveend","_settle","_interiaScroll","c","_setTransformItems","update","touches","timeStamp","button","isMouseDown","clientX","clientY","mouseUpHandled","_velocity","avg","m","min","tar","scrollLeft","v","parentNode","item","offset","_totalDistance","_raf","requestAnimationFrame","t","frames","_remainingDistance","_lastframe","d","pow","cancelAnimationFrame","v1","v2","l","selectedItem","_leftbound","_rightbound","shift","pop","unshift","leftbound","rightbound","prototype","defaults","_whitelistedParams"],"mappings":";;;;;;;;AAUA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;+eAdA;;;;;;;;;;IAgBMA,Q;;;AAEJ;;;;;AAKA,oBAAYC,EAAZ,EAAgBC,MAAhB,EAAwB;AAAA;;AAAA,iDAEtB,0BAAMD,EAAN,EAAUC,MAAV,CAFsB;;AAItBA,aAASA,UAAU,EAAnB;;AAEA,QAAI,CAACD,EAAL,EAAS;AACP;AACD;;AAED,UAAKE,KAAL,CAAWF,EAAX;AAVsB;AAWvB;;AAGD;;;;;;;;;qBAOAG,a,0BAAcH,E,EAAII,M,EAAQC,G,EAAKC,K,EAAO;AACpC,QAAIC,IAAI,EAAR;AACAA,MAAEP,EAAF,GAAOA,EAAP;AACAO,MAAEH,MAAF,GAAWA,MAAX;AACAG,MAAEF,GAAF,GAAQA,GAAR;AACAE,MAAED,KAAF,GAAUA,KAAV;AACAC,MAAEC,YAAF,GAAiB,UAASC,CAAT,EAAY;AAC3BF,QAAEG,YAAF,CAAeH,EAAEI,SAAF,CAAYF,CAAZ,GAAgBA,CAA/B;AACD,KAFD;AAGAF,MAAEG,YAAF,GAAiB,UAASD,CAAT,EAAY;AAC3BA,UAAIA,IAAIA,CAAJ,GAAQ,CAAZ;AACAF,QAAEI,SAAF,GAAc;AACZ,aAAKF;AADO,OAAd;AAGAF,QAAEP,EAAF,CAAKY,YAAL,CAAkB,OAAlB,EAA2B,yBAAU,aAAV,EAAyBL,EAAEI,SAAF,CAAYF,CAAZ,GAAgB,cAAzC,CAA3B;AACD,KAND;AAOAF,MAAEM,WAAF,GAAgB,UAASC,CAAT,EAAY;AAC1B,UAAIP,EAAEM,WAAF,CAAcE,QAAd,KAA2BD,CAA3B,IAAgC,OAAOP,EAAEM,WAAF,CAAcE,QAArB,KAAkC,WAAtE,EAAmF;AACjF;AACD;AACD,UAAID,CAAJ,EAAO;AACL,gCAASP,EAAEP,EAAX,EAAe,UAAf;AACA,gCAASO,EAAEF,GAAX,EAAgB,UAAhB;AACAE,UAAEM,WAAF,CAAcE,QAAd,GAAyB,IAAzB;AACD,OAJD,MAKK;AACH,mCAAYR,EAAEP,EAAd,EAAkB,UAAlB;AACA,mCAAYO,EAAEF,GAAd,EAAmB,UAAnB;AACAE,UAAEM,WAAF,CAAcE,QAAd,GAAyB,KAAzB;AACD;AACF,KAdD;AAeAR,MAAES,eAAF,GAAoB,YAAW;AAC7B,aAAOZ,OAAOO,SAAP,CAAiBF,CAAjB,GAAqBF,EAAEI,SAAF,CAAYF,CAAjC,GAAqCF,EAAEU,IAAF,CAAOC,IAA5C,GAAoDX,EAAEY,KAAF,GAAU,CAA9D,GAAmEf,OAAOa,IAAP,CAAYC,IAAtF;AACD,KAFD;AAGAX,MAAEG,YAAF;AACAH,MAAEU,IAAF,GAASjB,GAAGoB,qBAAH,EAAT;AACAb,MAAEY,KAAF,GAAUZ,EAAEU,IAAF,CAAOE,KAAjB;AACAZ,MAAEP,EAAF,CAAKqB,iBAAL,GAAyBd,CAAzB;AACAA,MAAEF,GAAF,CAAMiB,oBAAN,GAA6Bf,CAA7B;AACA,WAAOA,CAAP;AACD,G;;AAGD;;;;;;qBAIAL,K,kBAAMF,E,EAAI;AACR;AACA,SAAKA,EAAL,GAAUA,EAAV;AACA,SAAKA,EAAL,CAAQuB,aAAR,GAAwB,IAAxB;AACA,SAAKC,KAAL,GAAa,KAAKxB,EAAL,CAAQyB,aAAR,CAAsB,uBAAtB,CAAb;AACA,SAAKC,QAAL,GAAgB,KAAK1B,EAAL,CAAQyB,aAAR,CAAsB,0BAAtB,CAAhB;AACA,SAAKE,cAAL,GAAsB,KAAK3B,EAAL,CAAQyB,aAAR,CAAsB,kCAAtB,CAAtB;AACA,SAAKG,aAAL,GAAqB,KAAK5B,EAAL,CAAQyB,aAAR,CAAsB,iCAAtB,CAArB;AACA,SAAKI,SAAL,GAAiB,KAAK7B,EAAL,CAAQyB,aAAR,CAAsB,4BAAtB,CAAjB;AACA,SAAKK,IAAL,GAAY,KAAK9B,EAAL,CAAQyB,aAAR,CAAsB,uBAAtB,CAAZ;AACA,SAAKM,OAAL,GAAe,KAAK/B,EAAL,CAAQyB,aAAR,CAAsB,wBAAtB,CAAf;AACA;AACA,SAAKO,IAAL,GAAY,EAAZ;AACA,SAAKA,IAAL,CAAUC,SAAV,GAAsB,KAAKjC,EAAL,CAAQkC,UAAR,CAAmB,gCAAnB,IAAuD,IAAvD,GAA8D,KAApF;AACA,SAAKF,IAAL,CAAUG,gBAAV,GAA6B,KAAKnC,EAAL,CAAQkC,UAAR,CAAmB,qCAAnB,IAA4D,KAAKlC,EAAL,CAAQkC,UAAR,CAAmB,qCAAnB,EAA0DE,KAAtH,GAA8H,EAA3J;AACA,SAAKJ,IAAL,CAAUK,YAAV,GAAyB,KAAKrC,EAAL,CAAQkC,UAAR,CAAmB,mCAAnB,IAA0D,IAA1D,GAAiE,KAA1F;AACA,SAAKF,IAAL,CAAUM,uBAAV,GAAoC,KAAKtC,EAAL,CAAQkC,UAAR,CAAmB,0CAAnB,IAAiE,IAAjE,GAAwE,KAA5G;AACA,SAAKF,IAAL,CAAUO,WAAV,GAAwB,KAAKvC,EAAL,CAAQkC,UAAR,CAAmB,2BAAnB,IAAkD,IAAlD,GAAyD,KAAjF;AACA,SAAKF,IAAL,CAAUQ,UAAV,GAAuB,KAAKR,IAAL,CAAUO,WAAV,IAAyB,KAAKvC,EAAL,CAAQkC,UAAR,CAAmB,0BAAnB,CAAzB,GAA0E,IAA1E,GAAiF,KAAxG;AACA,SAAKF,IAAL,CAAUS,WAAV,GAAwB,KAAKzC,EAAL,CAAQkC,UAAR,CAAmB,kCAAnB,IAAyD,KAAKlC,EAAL,CAAQkC,UAAR,CAAmB,kCAAnB,EAAuDE,KAAhH,GAAwH,KAAhJ;AACA;AACA,QAAI,KAAKJ,IAAL,CAAUS,WAAV,IAAyB,CAAC,KAAKA,WAA/B,IAA8C,CAAC,KAAKC,KAAxD,EAA+D;AAC7D,WAAKD,WAAL,GAAmBE,OAAOC,UAAP,CAAkB,YAAW;AAC9C,aAAKC,YAAL;AACD,OAFoC,CAEnCC,IAFmC,CAE9B,IAF8B,CAAlB,EAEL,KAAKd,IAAL,CAAUS,WAAV,GAAwB,IAFnB,CAAnB;AAGD;AACD;AACA;AACA,QAAI,KAAKT,IAAL,CAAUS,WAAV,IAAyB,CAAC,KAAKM,MAAnC,EAA2C;AACzC,WAAKA,MAAL,GAAc,KAAKC,MAAL,CAAYF,IAAZ,CAAiB,IAAjB,CAAd;AACA,WAAKf,OAAL,CAAakB,gBAAb,CAA8B,OAA9B,EAAuC,KAAKF,MAA5C;AACD;AACD;AACA,QAAIxC,IAAI,KAAKP,EAAL,CAAQkD,gBAAR,CAAyB,uBAAzB,CAAR;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,cAAL,GAAsB,CAAtB;AACA,SAAKnC,IAAL,GAAY,KAAKW,aAAL,CAAmBR,qBAAnB,EAAZ;AACA,SAAKD,KAAL,GAAa,KAAKF,IAAL,CAAUE,KAAvB;AACA,SAAKkC,MAAL,GAAc,KAAKpC,IAAL,CAAUoC,MAAxB;AACA,QAAIvB,OAAOwB,SAASC,sBAAT,EAAX;AACA,QAAIzC,CAAJ;AACA;AACA,SAAK,IAAI0C,IAAI,CAAb,EAAgBA,IAAIjD,EAAEkD,MAAtB,EAA8BD,GAA9B,EAAmC;AACjC1C,UAAIwC,SAASI,aAAT,CAAuB,KAAvB,CAAJ;AACA5B,WAAK6B,WAAL,CAAiB7C,CAAjB;AACA,WAAKqC,KAAL,CAAWS,IAAX,CAAgB,IAAI,KAAKzD,aAAT,CAAuBI,EAAEiD,CAAF,CAAvB,EAA6B,IAA7B,EAAmC1C,CAAnC,EAAsC0C,CAAtC,CAAhB;AACA,WAAKJ,cAAL,IAAuB,KAAKD,KAAL,CAAWK,CAAX,EAAcrC,KAArC;AACD;AACD;AACA,WAAO,KAAKW,IAAL,CAAU+B,UAAjB,EAA6B;AAC3B,WAAK/B,IAAL,CAAUgC,WAAV,CAAsB,KAAKhC,IAAL,CAAU+B,UAAhC;AACD;AACD,SAAK/B,IAAL,CAAU6B,WAAV,CAAsB7B,IAAtB;AACA;AACA;AACA,QAAI,OAAO,KAAKD,SAAL,CAAekC,KAAf,CAAqBC,WAA5B,KAA4C,WAAhD,EAA6D;AAC3D,WAAKC,eAAL,CAAqB,EAAE,KAAKb,cAAL,GAAsB,KAAKjC,KAA7B,IAAsC,CAA3D;AACD;AACD;AACA,SAAK+C,aAAL;AACA;AACA;AACA,SAAKC,sBAAL,GAA8B,KAAKC,uBAAL,CAA6BtB,IAA7B,CAAkC,IAAlC,CAA9B;AACAQ,aAASL,gBAAT,CAA0B,wBAA1B,EAAoD,KAAKkB,sBAAzD,EAAiF,IAAjF;AACA,QAAI,CAAC,KAAKE,WAAV,EAAuB;AACrB,WAAKA,WAAL,GAAmB,KAAKC,YAAL,CAAkBxB,IAAlB,CAAuB,IAAvB,CAAnB;AACD;AACD;AACA,QAAI,CAAC,KAAKyB,OAAV,EAAmB;AACjB,WAAKA,OAAL,GAAe,wBAAS,KAAKC,OAAL,CAAa1B,IAAb,CAAkB,IAAlB,CAAT,EAAkC,GAAlC,CAAf;AACAH,aAAOM,gBAAP,CAAwB,QAAxB,EAAkC,KAAKsB,OAAvC;AACD;AACD;AACA,QAAI,KAAKnB,cAAL,GAAsB,KAAKjC,KAA/B,EAAsC;AACpC,UAAI,CAAC,KAAKsD,WAAV,EAAuB;AACrB,mCAAY,KAAKzE,EAAjB,EAAqB,UAArB;AACA,aAAK0E,eAAL;AACA;AACA,aAAKC,aAAL,CAAmB,CAAC,KAAKxB,KAAL,CAAW,CAAX,EAAcnC,eAAd,EAAD,GAAoC,KAAKG,KAAL,GAAa,CAApE;AACD;AACF;AACD;AARA,SASK;AACH,gCAAS,KAAKnB,EAAd,EAAkB,UAAlB;AACA,aAAK4E,gBAAL;AACD;AACD;AACA,SAAKC,eAAL;AACA;AACA,4BAAS,KAAK7E,EAAd,EAAkB,OAAlB;AACD,G;;AAGD;;;;;;qBAIA8E,M,mBAAOC,Y,EAAc;AACnBpC,WAAOqC,mBAAP,CAA2B,QAA3B,EAAqC,KAAKT,OAA1C;AACA,WAAO,KAAKA,OAAZ;AACAjB,aAAS0B,mBAAT,CAA6B,wBAA7B,EAAuD,KAAKb,sBAA5D,EAAoF,IAApF;AACA,WAAO,KAAKA,sBAAZ;AACA,6BAAMW,MAAN,YAAaC,YAAb;AACD,G;;AAGD;;;;;qBAGA/B,M,qBAAS;AACP,QAAI,KAAKN,KAAT,EAAgB;AACd,aAAO,KAAKuC,KAAZ;AACA,WAAKxC,WAAL,GAAmBE,OAAOC,UAAP,CAAkB,YAAW;AAC9C,aAAKC,YAAL;AACD,OAFoC,CAEnCC,IAFmC,CAE9B,IAF8B,CAAlB,EAEL,KAAKd,IAAL,CAAUS,WAAV,GAAwB,IAFnB,CAAnB;AAGD,KALD,MAMK;AACH,WAAKyC,UAAL;AACA,UAAI,CAAC,KAAKlD,IAAL,CAAUK,YAAX,IAA2B,KAAKL,IAAL,CAAUM,uBAAzC,EAAkE;AAChE,aAAK6C,SAAL,CAAe,KAAKC,aAAL,EAAf;AACD;AACDzC,aAAO0C,YAAP,CAAoB,KAAK5C,WAAzB;AACA,aAAO,KAAKA,WAAZ;AACD;AACD,SAAK6C,SAAL,CAAe,CAAC,KAAK5C,KAArB;AACD,G;;AAGD;;;;;;qBAIA4C,S,sBAAUxE,C,EAAG;AACX,QAAI,OAAOA,CAAP,KAAa,WAAjB,EAA8B;AAC5B,WAAK4B,KAAL,GAAa,OAAO,KAAKA,KAAZ,KAAsB,WAAtB,GAAoC,KAApC,GAA4C,KAAKA,KAA9D;AACA,aAAO,KAAKA,KAAZ;AACD,KAHD,MAIK;AACH,UAAI5B,CAAJ,EAAO;AACL,gCAAS,KAAKd,EAAd,EAAkB,OAAlB;AACD,OAFD,MAGK;AACH,mCAAY,KAAKA,EAAjB,EAAqB,OAArB;AACD;AACD,WAAK0C,KAAL,GAAa5B,CAAb;AACA,aAAO,KAAK4B,KAAZ;AACD;AACF,G;;AAGD;;;;;qBAGAG,Y,2BAAe;AACb,QAAI,CAAC,KAAKoC,KAAN,IAAe,CAAC,KAAKM,UAArB,IAAmC,CAAC,KAAKC,MAA7C,EAAqD;AACnD,WAAKN,UAAL;AACA,UAAI3E,IAAI,KAAK4C,KAAL,CAAWsC,OAAX,CAAmB,KAAKL,aAAL,EAAnB,CAAR;AACA,WAAKM,aAAL,GAAqB,IAArB;AACA,WAAKP,SAAL,CAAe,KAAKhC,KAAL,CAAW5C,MAAM,KAAK4C,KAAL,CAAWM,MAAX,GAAoB,CAA1B,GAA8B,CAA9B,GAAkClD,IAAI,CAAjD,CAAf;AACA,WAAKkC,WAAL,GAAmBE,OAAOC,UAAP,CAAkB,YAAW;AAC9C,aAAKC,YAAL;AACD,OAFoC,CAEnCC,IAFmC,CAE9B,IAF8B,CAAlB,EAEL,KAAKd,IAAL,CAAUS,WAAV,GAAwB,IAFnB,CAAnB;AAGD;AACF,G;;AAGD;;;;;qBAGAiC,e,8BAAkB;AAChB,SAAKD,WAAL,GAAmB,KAAKkB,WAAL,CAAiB7C,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKjB,SAAL,CAAeoB,gBAAf,CAAgC,YAAhC,EAA8C,KAAKwB,WAAnD;AACA,SAAKmB,UAAL,GAAkB,KAAKC,UAAL,CAAgB/C,IAAhB,CAAqB,IAArB,CAAlB;AACAH,WAAOM,gBAAP,CAAwB,WAAxB,EAAqC,KAAK2C,UAA1C;AACA,SAAKE,SAAL,GAAiB,KAAKC,SAAL,CAAejD,IAAf,CAAoB,IAApB,CAAjB;AACAH,WAAOM,gBAAP,CAAwB,UAAxB,EAAoC,KAAK6C,SAAzC;AACA,SAAKE,UAAL,GAAkB,KAAKC,UAAL,CAAgBnD,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKjB,SAAL,CAAeoB,gBAAf,CAAgC,WAAhC,EAA6C,KAAK+C,UAAlD;AACA,SAAKE,UAAL,GAAkB,KAAKC,UAAL,CAAgBrD,IAAhB,CAAqB,IAArB,CAAlB;AACAH,WAAOM,gBAAP,CAAwB,WAAxB,EAAqC,KAAKiD,UAA1C;AACA,SAAKE,QAAL,GAAgB,KAAKC,QAAL,CAAcvD,IAAd,CAAmB,IAAnB,CAAhB;AACAH,WAAOM,gBAAP,CAAwB,SAAxB,EAAmC,KAAKmD,QAAxC;AACA,SAAKE,QAAL,GAAgB,KAAKC,QAAL,CAAczD,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKpB,QAAL,CAAcuB,gBAAd,CAA+B,OAA/B,EAAwC,KAAKqD,QAA7C;AACA,SAAKE,KAAL,GAAa,KAAKC,KAAL,CAAW3D,IAAX,CAAgB,IAAhB,CAAb;AACA,SAAKtB,KAAL,CAAWyB,gBAAX,CAA4B,OAA5B,EAAqC,KAAKuD,KAA1C;AACA,SAAKE,MAAL,GAAc,KAAKC,MAAL,CAAY7D,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAK9C,EAAL,CAAQiD,gBAAR,CAAyB,OAAzB,EAAkC,KAAKyD,MAAvC;AACA,SAAKE,aAAL,GAAqB,KAAKC,gBAAL,CAAsB/D,IAAtB,CAA2B,IAA3B,CAArB;AACA,SAAKjB,SAAL,CAAeoB,gBAAf,CAAgC,OAAhC,EAAyC,KAAK2D,aAA9C,EAA6D,IAA7D;AACD,G;;AAGD;;;;;;qBAIAhC,gB,+BAAmB;AACjB,SAAK5E,EAAL,CAAQgF,mBAAR,CAA4B,YAA5B,EAA0C,KAAKP,WAA/C;AACA,WAAO,KAAKA,WAAZ;AACA9B,WAAOqC,mBAAP,CAA2B,WAA3B,EAAwC,KAAKY,UAA7C;AACA,WAAO,KAAKA,UAAZ;AACAjD,WAAOqC,mBAAP,CAA2B,UAA3B,EAAuC,KAAKc,SAA5C;AACA,WAAO,KAAKA,SAAZ;AACA,SAAK9F,EAAL,CAAQgF,mBAAR,CAA4B,WAA5B,EAAyC,KAAKgB,UAA9C;AACA,WAAO,KAAKA,UAAZ;AACArD,WAAOqC,mBAAP,CAA2B,WAA3B,EAAwC,KAAKkB,UAA7C;AACA,WAAO,KAAKA,UAAZ;AACAvD,WAAOqC,mBAAP,CAA2B,SAA3B,EAAsC,KAAKoB,QAA3C;AACA,WAAO,KAAKA,QAAZ;AACA,SAAK1E,QAAL,CAAcsD,mBAAd,CAAkC,OAAlC,EAA2C,KAAKsB,QAAhD;AACA,WAAO,KAAKA,QAAZ;AACA,SAAK9E,KAAL,CAAWwD,mBAAX,CAA+B,OAA/B,EAAwC,KAAKwB,KAA7C;AACA,WAAO,KAAKA,KAAZ;AACA,SAAKxG,EAAL,CAAQgF,mBAAR,CAA4B,OAA5B,EAAqC,KAAK0B,MAA1C;AACA,WAAO,KAAKA,MAAZ;AACA,SAAK7E,SAAL,CAAemD,mBAAf,CAAmC,OAAnC,EAA4C,KAAK4B,aAAjD,EAAgE,IAAhE;AACA,WAAO,KAAKA,aAAZ;AACA,QAAI,KAAK7E,OAAT,EAAkB;AAChB,WAAKA,OAAL,CAAaiD,mBAAb,CAAiC,OAAjC,EAA0C,KAAKjC,MAA/C;AACA,aAAO,KAAKA,MAAZ;AACD;AACF,G;;AAGD;;;;;;;qBAKAqB,uB,oCAAwB0C,C,EAAG;AACzB,QAAIA,EAAEC,MAAF,CAASC,QAAT,CAAkB,KAAKhH,EAAvB,CAAJ,EAAgC;AAC9B2C,aAAOC,UAAP,CAAkB,YAAW;AAC3B,aAAKqE,MAAL;AACD,OAFiB,CAEhBnE,IAFgB,CAEX,IAFW,CAAlB,EAEc,CAFd;AAGD;AACF,G;;AAGD;;;;;;qBAIAyD,Q,qBAASO,C,EAAG;AACV,QAAII,IAAI,KAAK/D,KAAL,CAAWsC,OAAX,CAAmB,KAAKL,aAAL,EAAnB,CAAR;AACA8B;AACA,QAAIA,IAAI,KAAK/D,KAAL,CAAWM,MAAX,GAAoB,CAA5B,EAA+B;AAC7B,UAAI,KAAKzB,IAAL,CAAUC,SAAd,EAAyB;AACvBiF,YAAI,CAAJ;AACD,OAFD,MAGK;AACHA;AACD;AACF;AACD,WAAO,KAAKjC,KAAZ;AACA,QAAI1E,IAAI,KAAK4G,iBAAb;AACA5G,QAAIA,IAAI,CAAC,KAAKyB,IAAL,CAAUG,gBAAf,GAAkC5B,CAAlC,GAAsC,CAAC,KAAKyB,IAAL,CAAUG,gBAArD;AACA,SAAK+C,UAAL;AACA,SAAKQ,aAAL,GAAqB,IAArB;AACA,SAAKP,SAAL,CAAe,KAAKhC,KAAL,CAAW+D,CAAX,CAAf,EAA8B3G,CAA9B;AACA,QAAIuG,CAAJ,EAAO;AACLA,QAAEM,cAAF;AACD;AACF,G;;AAGD;;;;;;qBAIAX,K,kBAAMK,C,EAAG;AACP,QAAII,IAAI,KAAK/D,KAAL,CAAWsC,OAAX,CAAmB,KAAKL,aAAL,EAAnB,CAAR;AACA8B;AACA,QAAIA,IAAI,CAAR,EAAW;AACT,UAAI,KAAKlF,IAAL,CAAUC,SAAd,EAAyB;AACvBiF,YAAI,KAAK/D,KAAL,CAAWM,MAAX,GAAoB,CAAxB;AACD,OAFD,MAGK;AACHyD;AACD;AACF;AACD,WAAO,KAAKjC,KAAZ;AACA,QAAI1E,IAAI,KAAK4G,iBAAb;AACA5G,QAAIA,IAAI,KAAKyB,IAAL,CAAUG,gBAAd,GAAiC5B,CAAjC,GAAqC,KAAKyB,IAAL,CAAUG,gBAAnD;AACA,SAAK+C,UAAL;AACA,SAAKQ,aAAL,GAAqB,IAArB;AACA,SAAKP,SAAL,CAAe,KAAKhC,KAAL,CAAW+D,CAAX,CAAf,EAA8B3G,CAA9B;AACA,QAAIuG,CAAJ,EAAO;AACLA,QAAEM,cAAF;AACD;AACF,G;;AAGD;;;;;;qBAIAC,U,uBAAWP,C,EAAG;AACZ,SAAK5B,UAAL;AACA,SAAKD,KAAL,GAAa,EAAb;AACA,SAAKA,KAAL,CAAWrB,IAAX,CAAgBkD,CAAhB;AACD,G;;AAGD;;;;;;qBAIAQ,K,kBAAMR,C,EAAG;AACP,QAAI,KAAK7B,KAAL,IAAc,KAAKA,KAAL,CAAWxB,MAAX,GAAoB,CAAtC,EAAyC;AACvC,WAAKkB,aAAL,CAAmBmC,EAAES,KAAF,GAAU,KAAKtC,KAAL,CAAW,KAAKA,KAAL,CAAWxB,MAAX,GAAoB,CAA/B,EAAkC8D,KAA/D;AACA,WAAKtC,KAAL,CAAWrB,IAAX,CAAgBkD,CAAhB;AACAA,QAAEM,cAAF,GAAmB,IAAnB;AACD,KAJD,MAKK;AACH,UAAI,KAAKnC,KAAL,IAAc,KAAKA,KAAL,CAAW,CAAX,CAAlB,EAAiC;AAC/B,YAAIuC,KAAKC,GAAL,CAAS,KAAKxC,KAAL,CAAW,CAAX,EAAcsC,KAAd,GAAsBT,EAAES,KAAjC,IAA0CC,KAAKC,GAAL,CAAS,KAAKxC,KAAL,CAAW,CAAX,EAAcyC,KAAd,GAAsBZ,EAAEY,KAAjC,CAA1C,IAAqFF,KAAKC,GAAL,CAAS,KAAKxC,KAAL,CAAW,CAAX,EAAcsC,KAAd,GAAsBT,EAAES,KAAjC,IAA0C,CAA/H,IAAoIT,EAAEa,UAA1I,EAAsJ;AACpJ,eAAKhD,aAAL,CAAmBmC,EAAES,KAAF,GAAU,KAAKtC,KAAL,CAAW,CAAX,EAAcsC,KAA3C;AACA,eAAKtC,KAAL,CAAWrB,IAAX,CAAgBkD,CAAhB;AACAA,YAAEM,cAAF,GAAmB,IAAnB;AACD,SAJD,MAKK;AACH,cAAII,KAAKC,GAAL,CAAS,KAAKxC,KAAL,CAAW,CAAX,EAAcsC,KAAd,GAAsBT,EAAES,KAAjC,IAA0C,CAA9C,EAAiD;AAC/C,iBAAKtC,KAAL,CAAW,CAAX,IAAgB6B,CAAhB;AACD;AACF;AACF;AACD,UAAIA,EAAEc,IAAF,KAAW,UAAX,IAAyBd,EAAEc,IAAF,KAAW,SAAxC,EAAmD;AACjD,eAAO,KAAK3C,KAAZ;AACD;AACF;AACF,G;;AAGD;;;;;;qBAIA4C,Q,qBAASf,C,EAAG;AACV,SAAKQ,KAAL,CAAWR,CAAX;AACA,QAAI,CAAC,KAAK9E,IAAL,CAAUK,YAAf,EAA6B;AAC3B,WAAKyF,OAAL,CAAa,KAAK7C,KAAlB;AACD,KAFD,MAGK;AACH,WAAK8C,cAAL,CAAoB,KAAK9C,KAAzB;AACD;AACD,WAAO6B,CAAP;AACD,G;;AAGD;;;;;qBAGAtC,O,sBAAU;AACR,SAAKyC,MAAL;AACD,G;;AAGD;;;;;;qBAIAA,M,qBAAS;AACP,QAAIhG,OAAO,KAAKjB,EAAL,CAAQoB,qBAAR,EAAX;AACA,QAAIH,KAAKE,KAAL,KAAe,KAAKA,KAApB,IAA6BF,KAAKoC,MAAL,KAAgB,KAAKA,MAAtD,EAA8D;AAC5D,UAAI,KAAKZ,WAAT,EAAsB;AACpBE,eAAO0C,YAAP,CAAoB,KAAK5C,WAAzB;AACA,eAAO,KAAKA,WAAZ;AACD;AACD,WAAKyC,UAAL;AACA,UAAI8C,IAAI,KAAK5C,aAAL,EAAR;AACA,WAAKlB,aAAL,CAAmB,CAAnB;AACA,WAAK+D,kBAAL,CAAwB,CAAxB;AACA,WAAK/H,KAAL,CAAW,KAAKF,EAAhB;AACA,UAAI,KAAKmD,KAAL,CAAWsC,OAAX,CAAmBuC,EAAEhI,EAAF,CAAKqB,iBAAxB,IAA6C,CAAC,CAA9C,IAAmD,KAAK+B,cAAL,GAAsB,KAAKjC,KAAlF,EAAyF;AACvF,YAAI,KAAKa,IAAL,CAAUC,SAAd,EAAyB;AACvB,eAAK0C,aAAL,CAAmB,CAAC,KAAKvB,cAAN,IAAwB,CAAC4E,EAAEhI,EAAF,CAAKqB,iBAAL,CAAuBL,eAAvB,EAAD,GAA6C,KAAKG,KAAL,GAAa,CAAlF,CAAnB;AACD,SAFD,MAGK;AACH,eAAKwD,aAAL,CAAmB,CAACqD,EAAEhI,EAAF,CAAKqB,iBAAL,CAAuBL,eAAvB,EAAD,GAA6C,KAAKG,KAAL,GAAa,CAA7E;AACD;AACF;AACF;AACF,G;;AAGD;;;;;;;qBAKA+G,M,mBAAOlI,E,EAAI;;AAETA,SAAKA,MAAM,KAAKA,EAAhB;;AAEA,SAAK4E,gBAAL;AACAjC,WAAOqC,mBAAP,CAA2B,QAA3B,EAAqC,KAAKT,OAA1C;AACA,WAAO,KAAKA,OAAZ;AACAjB,aAAS0B,mBAAT,CAA6B,wBAA7B,EAAuD,KAAKb,sBAA5D,EAAoF,IAApF;AACA,WAAO,KAAKA,sBAAZ;AACA,SAAKjE,KAAL,CAAWF,EAAX;;AAEA,SAAKiH,MAAL;;AAEA,WAAO,IAAP;AACD,G;;AAGD;;;;;;qBAIAtB,W,wBAAYmB,C,EAAG;AACb,QAAIvG,IAAI;AACN,cAAQuG,EAAEc,IADJ;AAEN,eAASd,EAAEqB,OAAF,CAAU,CAAV,EAAaZ,KAFhB;AAGN,eAAST,EAAEqB,OAAF,CAAU,CAAV,EAAaT,KAHhB;AAIN,mBAAaZ,EAAEsB;AAJT,KAAR;AAMA,SAAKf,UAAL,CAAgB9G,CAAhB;AACD,G;;AAGD;;;;;;qBAIAsF,U,uBAAWiB,C,EAAG;AACZ,QAAIvG,IAAI;AACN,cAAQuG,EAAEc,IADJ;AAEN,eAASd,EAAEqB,OAAF,CAAU,CAAV,EAAaZ,KAFhB;AAGN,eAAST,EAAEqB,OAAF,CAAU,CAAV,EAAaT,KAHhB;AAIN,mBAAaZ,EAAEsB,SAJT;AAKN,oBAActB,EAAEa;AALV,KAAR;AAOA,SAAKL,KAAL,CAAW/G,CAAX;AACA,QAAIA,EAAE6G,cAAN,EAAsB;AACpBN,QAAEM,cAAF;AACD;AACF,G;;AAGD;;;;;;qBAIArB,S,sBAAUe,C,EAAG;AACX,QAAI,KAAK7B,KAAL,IAAc,KAAKA,KAAL,CAAWxB,MAAX,GAAoB,CAAlC,IAAuCqD,EAAEa,UAA7C,EAAyD;AACvD,UAAIpH,IAAI;AACN,gBAAQuG,EAAEc,IADJ;AAEN,iBAAS,KAAK3C,KAAL,CAAW,KAAKA,KAAL,CAAWxB,MAAX,GAAoB,CAA/B,EAAkC8D,KAFrC;AAGN,iBAAS,KAAKtC,KAAL,CAAW,KAAKA,KAAL,CAAWxB,MAAX,GAAoB,CAA/B,EAAkCiE,KAHrC;AAIN,qBAAaZ,EAAEsB;AAJT,OAAR;AAMA,WAAKP,QAAL,CAActH,CAAd;AACD,KARD,MAQO;AACL,aAAO,KAAK0E,KAAZ;AACD;AACF,G;;AAGD;;;;;;qBAIAgB,U,uBAAWa,C,EAAG;AACZ,QAAIA,EAAEuB,MAAF,KAAa,CAAjB,EAAoB;AAClB,aAAOvB,CAAP;AACD;AACD,SAAKwB,WAAL,GAAmB,IAAnB;AACA,QAAI/H,IAAI;AACN,cAAQuG,EAAEc,IADJ;AAEN,eAASd,EAAES,KAFL;AAGN,eAAST,EAAEY,KAHL;AAIN,mBAAaZ,EAAEsB;AAJT,KAAR;AAMA,SAAKf,UAAL,CAAgB9G,CAAhB;AACAuG,MAAEM,cAAF;AACD,G;;AAGD;;;;;;qBAIAjB,U,uBAAWW,C,EAAG;AACZ,QAAI,KAAKwB,WAAT,EAAsB;AACpB,UAAI/H,IAAI;AACN,gBAAQuG,EAAEc,IADJ;AAEN,iBAASd,EAAEyB,OAFL;AAGN,iBAASzB,EAAE0B,OAHL;AAIN,qBAAa1B,EAAEsB,SAJT;AAKN;AACA,sBAAc;AANR,OAAR;AAQA,WAAKd,KAAL,CAAW/G,CAAX;AACA,UAAIA,EAAE6G,cAAN,EAAsB;AACpBN,UAAEM,cAAF;AACD;AACF;AACF,G;;AAGD;;;;;;qBAIAf,Q,qBAASS,C,EAAG;AACV,QAAI,KAAK7B,KAAL,IAAc,KAAKA,KAAL,CAAWxB,MAAX,GAAoB,CAAtC,EAAyC;AACvC,UAAIlD,IAAI;AACN,gBAAQuG,EAAEc,IADJ;AAEN,iBAASd,EAAES,KAFL;AAGN,iBAAST,EAAEY,KAHL;AAIN,qBAAaZ,EAAEsB;AAJT,OAAR;AAMA,WAAKP,QAAL,CAActH,CAAd;AACA,WAAKkI,cAAL,GAAsB,IAAtB;AACD,KATD,MAUK;AACH,aAAO,KAAKxD,KAAZ;AACA,WAAK4B,gBAAL,CAAsBC,CAAtB;AACD;AACD,SAAKwB,WAAL,GAAmB,KAAnB;AACD,G;;AAGD;;;;;;qBAIA3B,M,mBAAOG,C,EAAG;AACR;AACA,QAAI,KAAK7B,KAAT,EAAgB;AACd6B,QAAEM,cAAF;AACD;AACD;AACA,QAAI,KAAKqB,cAAT,EAAyB;AACvB3B,QAAEM,cAAF;AACD;AACD;AACA,WAAO,KAAKqB,cAAZ;AACA;AACD,G;;AAGD;;;;;;qBAIAC,S,sBAAUzD,K,EAAO;AACf,QAAI0D,MAAM,CAAV;AACA,QAAIC,IAAIpB,KAAKqB,GAAL,CAAS,CAAT,EAAY5D,MAAMxB,MAAN,GAAe,CAA3B,CAAR;AACA,SAAK,IAAID,IAAI,CAAb,EAAgBA,IAAIoF,CAApB,EAAuBpF,GAAvB,EAA4B;AAC1B,UAAIyB,MAAMA,MAAMxB,MAAN,GAAeD,CAArB,EAAwB4E,SAAxB,KAAsCnD,MAAMA,MAAMxB,MAAN,GAAeD,CAAf,GAAmB,CAAzB,EAA4B4E,SAAtE,EAAiF;AAC/EO,eAAOA,MAAMnF,CAAb;AACD,OAFD,MAGK;AACHmF,eAAQ,MAAM1D,MAAMA,MAAMxB,MAAN,GAAeD,CAArB,EAAwB+D,KAAxB,GAAgCtC,MAAMA,MAAMxB,MAAN,GAAeD,CAAf,GAAmB,CAAzB,EAA4B+D,KAAlE,KAA4EtC,MAAMA,MAAMxB,MAAN,GAAeD,CAArB,EAAwB4E,SAAxB,GAAoCnD,MAAMA,MAAMxB,MAAN,GAAeD,CAAf,GAAmB,CAAzB,EAA4B4E,SAA5I,CAAD,GAA2JQ,CAAlK;AACD;AACF;AACD,WAAOD,GAAP;AACD,G;;AAGD;;;;;;qBAIA9B,gB,6BAAiBC,C,EAAG;AAClB,QAAIgC,MAAMhC,EAAEC,MAAZ;AACA,QAAI,KAAK/G,EAAL,CAAQgH,QAAR,CAAiB8B,GAAjB,CAAJ,EAA2B;AACzB,aAAO,CAACA,IAAIvH,aAAZ,EAA2B;AACzB,YAAIuH,IAAIzH,iBAAR,EAA2B;AACzB,eAAKO,aAAL,CAAmBmH,UAAnB,GAAgC,CAAhC;AACA,iBAAO,KAAK9D,KAAZ;AACA,eAAKC,UAAL;AACA,eAAKC,SAAL,CAAe2D,IAAIzH,iBAAnB;AACAyF,YAAEM,cAAF;AACA;AACD;AACD,YAAI0B,IAAIxH,oBAAR,EAA8B;AAC5B,eAAKM,aAAL,CAAmBmH,UAAnB,GAAgC,CAAhC;AACA,iBAAO,KAAK9D,KAAZ;AACA,eAAKC,UAAL;AACA,cAAI8D,IAAIF,IAAIxH,oBAAJ,CAAyBhB,KAAzB,GAAiC,KAAK8E,aAAL,GAAqB9E,KAAtD,GAA8D,KAAK0B,IAAL,CAAUG,gBAAxE,GAA2F,CAAC,KAAKH,IAAL,CAAUG,gBAA9G;AACA,eAAKgD,SAAL,CAAe2D,IAAIxH,oBAAnB,EAAyC0H,CAAzC;AACAlC,YAAEM,cAAF;AACA;AACD;AACD0B,cAAMA,IAAIG,UAAV;AACD;AACF;AACF,G;;AAGD;;;;;;;qBAKA9D,S,sBAAU+D,I,EAAM/G,gB,EAAkB;AAChC,QAAIgH,SAAS,KAAKhI,KAAL,GAAa,CAA1B;AACA,QAAIH,kBAAkBkI,KAAKlI,eAAL,EAAtB;AACA,QAAI,CAACmB,gBAAL,EAAuB;AACrBA,yBAAmBgH,SAASD,KAAKlI,eAAL,EAAT,GAAkC,CAAlC,GAAsC,KAAKgB,IAAL,CAAUG,gBAAhD,GAAmE,CAAC,KAAKH,IAAL,CAAUG,gBAAjG;AACD;AACD,QAAI,KAAKH,IAAL,CAAUC,SAAd,EAAyB;AACvB,UAAIE,mBAAmB,CAAvB,EAA0B;AACxB;AACA,YAAInB,kBAAkBmI,MAAtB,EAA8B;AAC5B,eAAKC,cAAL,GAAsBD,SAAS,KAAK/F,cAAd,GAA+BpC,eAArD;AACD,SAFD,MAGK;AACH,eAAKoI,cAAL,GAAsBD,SAASnI,eAA/B;AACD;AACF,OARD,MASK;AACH;AACA,YAAIA,kBAAkBmI,MAAtB,EAA8B;AAC5B,eAAKC,cAAL,GAAsB,EAAE,KAAKhG,cAAL,GAAsBpC,eAAtB,GAAwCmI,MAA1C,CAAtB;AACD,SAFD,MAGK;AACH,eAAKC,cAAL,GAAsBD,SAASnI,eAA/B;AACD;AACF;AACF,KAnBD,MAoBK;AACH,WAAKoI,cAAL,GAAsBD,SAASnI,eAA/B;AACD;AACD,SAAKmG,iBAAL,GAAyBhF,gBAAzB;AACA,WAAO,KAAK8C,KAAZ;AACA,SAAKS,aAAL,GAAqB,IAArB;AACA,SAAK2D,IAAL,GAAY1G,OAAO2G,qBAAP,CAA6B,KAAKjF,WAAlC,CAAZ;AACD,G;;AAGD;;;;;;;qBAKAC,Y,yBAAaiF,C,EAAG;AACd,QAAI,KAAKvH,IAAL,CAAUS,WAAV,IAAyB,KAAKA,WAAlC,EAA+C;AAC7CE,aAAO0C,YAAP,CAAoB,KAAK5C,WAAzB;AACA,aAAO,KAAKA,WAAZ;AACD;AACD,QAAI+G,MAAJ;AACA,QAAI,KAAKvE,KAAL,IAAc,CAAC,KAAKkC,iBAAxB,EAA2C;AACzC,WAAKjC,UAAL;AACA;AACD;AACD,QAAI,CAAC,KAAKK,UAAV,EAAsB;AACpB,WAAKA,UAAL,GAAkBgE,CAAlB;AACD;AACD,QAAI,CAAC,KAAKE,kBAAV,EAA8B;AAC5B,WAAKA,kBAAL,GAA0B,KAAKL,cAA/B;AACD;AACD,QAAI,CAAC,KAAKM,UAAV,EAAsB;AACpB,WAAKA,UAAL,GAAkBH,CAAlB;AACAC,eAAS,CAAT;AACD,KAHD,MAIK;AACHA,eAAS,CAACD,IAAI,KAAKG,UAAV,KAA0B,IAAI,EAAL,GAAW,IAApC,CAAT;AACD;AACD,QAAIC,IAAI,KAAKxC,iBAAL,GAAyBqC,MAAjC;AACA,QAAI,KAAKxH,IAAL,CAAUK,YAAV,IAA0B,CAAC,KAAKqD,aAApC,EAAmD;AACjD,WAAKf,aAAL,CAAmBgF,CAAnB;AACA,WAAKxC,iBAAL,IAA0BK,KAAKoC,GAAL,CAAS,IAAT,EAAeJ,MAAf,CAA1B;AACA,UAAI,KAAKxH,IAAL,CAAUM,uBAAV,IAAqCkF,KAAKC,GAAL,CAAS,KAAKN,iBAAd,IAAmC,CAA5E,EAA+E;AAC7E,aAAKhC,SAAL,CAAe,KAAKC,aAAL,EAAf;AACD;AACD,UAAIoC,KAAKC,GAAL,CAAS,KAAKN,iBAAd,IAAmC,GAAvC,EAA4C;AAC1C,YAAK,KAAKA,iBAAL,GAAyB,CAAzB,IAA8B,KAAKxG,SAAL,CAAeF,CAAf,GAAqB,KAAK2C,cAAL,GAAsB,CAAvB,GAA6B,KAAKD,KAAL,CAAW,CAAX,EAAchC,KAAd,GAAsB,CAAtG,IACD,KAAKgG,iBAAL,GAAyB,CAAzB,IAA8B,KAAKxG,SAAL,CAAeF,CAAf,GAAoB,EAAG,KAAK2C,cAAL,GAAsB,CAAvB,GAA6B,KAAKD,KAAL,CAAW,KAAKA,KAAL,CAAWM,MAAX,GAAoB,CAA/B,EAAkCtC,KAAlC,GAA0C,CAAzE,CADrD,EACqI;AACnI,eAAKuE,aAAL,GAAqB,IAArB;AACA,eAAKP,SAAL,CAAe,KAAKC,aAAL,EAAf;AACD,SAJD,MAKK;AACH,eAAKF,UAAL;AACD;AACF,OATD,MAUK;AACH,aAAKmE,IAAL,GAAY1G,OAAO2G,qBAAP,CAA6B,KAAKjF,WAAlC,CAAZ;AACD;AACF,KAnBD,MAoBK;AACH,UAAI,KAAK8C,iBAAL,GAAyB,CAA7B,EAAgC;AAC9B,YAAIwC,IAAI,KAAKF,kBAAb,EAAiC;AAC/B,eAAK9E,aAAL,CAAmBgF,CAAnB;AACA,eAAKF,kBAAL,IAA2BE,CAA3B;AACA,cAAI,KAAKF,kBAAL,GAA0B,KAAKL,cAAL,GAAsB,CAApD,EAAuD;AACrD,iBAAKjC,iBAAL,IAA0BK,KAAKoC,GAAL,CAAS,IAAT,EAAeJ,MAAf,CAA1B;AACD,WAFD,MAGK;AACH,iBAAKrC,iBAAL,IAA0BK,KAAKoC,GAAL,CAAS,GAAT,EAAcJ,MAAd,CAA1B;AACA,iBAAKrC,iBAAL,GAAyB,KAAKA,iBAAL,GAAyB,CAAzB,GAA6B,KAAKA,iBAAlC,GAAsD,CAA/E;AACD;AACD,eAAKkC,IAAL,GAAY1G,OAAO2G,qBAAP,CAA6B,KAAKjF,WAAlC,CAAZ;AACD,SAXD,MAYK;AACH,eAAKM,aAAL,CAAmB,KAAK8E,kBAAxB;AACA,eAAKvE,UAAL;AACD;AACF,OAjBD,MAkBK;AACH,YAAIyE,IAAI,KAAKF,kBAAb,EAAiC;AAC/B,eAAK9E,aAAL,CAAmBgF,CAAnB;AACA,eAAKF,kBAAL,IAA2BE,CAA3B;AACA,cAAI,KAAKF,kBAAL,GAA0B,KAAKL,cAAL,GAAsB,CAApD,EAAuD;AACrD,iBAAKjC,iBAAL,IAA0BK,KAAKoC,GAAL,CAAS,IAAT,EAAeJ,MAAf,CAA1B;AACD,WAFD,MAGK;AACH,iBAAKrC,iBAAL,IAA0BK,KAAKoC,GAAL,CAAS,GAAT,EAAcJ,MAAd,CAA1B;AACA,iBAAKrC,iBAAL,GAAyB,KAAKA,iBAAL,GAAyB,CAAC,CAA1B,GAA8B,KAAKA,iBAAnC,GAAuD,CAAC,CAAjF;AACD;AACD,eAAKkC,IAAL,GAAY1G,OAAO2G,qBAAP,CAA6B,KAAKjF,WAAlC,CAAZ;AACD,SAXD,MAYK;AACH,eAAKM,aAAL,CAAmB,KAAK8E,kBAAxB;AACA,eAAKvE,UAAL;AACD;AACF;AACF;AACD,SAAKwE,UAAL,GAAkBH,CAAlB;AACD,G;;AAGD;;;;;;qBAIArE,U,yBAAa;AACX,QAAI,KAAKlD,IAAL,CAAUS,WAAV,IAAyB,CAAC,KAAKA,WAA/B,IAA8C,CAAC,KAAKC,KAAxD,EAA+D;AAC7D,WAAKD,WAAL,GAAmBE,OAAOC,UAAP,CAAkB,YAAW;AAC9C,aAAKC,YAAL;AACD,OAFoC,CAEnCC,IAFmC,CAE9B,IAF8B,CAAlB,EAEL,KAAKd,IAAL,CAAUS,WAAV,GAAwB,IAFnB,CAAnB;AAGD;AACDE,WAAOkH,oBAAP,CAA4B,KAAKR,IAAjC;AACA,WAAO,KAAK3D,aAAZ;AACA,WAAO,KAAKH,UAAZ;AACA,WAAO,KAAK4B,iBAAZ;AACA,WAAO,KAAKsC,kBAAZ;AACA,WAAO,KAAKL,cAAZ;AACA,WAAO,KAAKM,UAAZ;AACD,G;;AAGD;;;;;;;qBAKA3B,c,2BAAe9C,K,EAAO;AACpB,QAAIA,MAAMA,MAAMxB,MAAN,GAAe,CAArB,EAAwB2E,SAAxB,GAAoCnD,MAAMA,MAAMxB,MAAN,GAAe,CAArB,EAAwB2E,SAA5D,GAAwE,GAAxE,IAA+EnD,MAAMxB,MAAN,GAAe,CAAlG,EAAqG;AACnG,UAAG,KAAKzB,IAAL,CAAUM,uBAAb,EAAsC;AACpC,eAAO,KAAK6C,SAAL,CAAe,KAAKC,aAAL,EAAf,CAAP;AACD;AACD;AACD;AACD,SAAK+B,iBAAL,GAAyB,KAAKuB,SAAL,CAAezD,KAAf,CAAzB;AACA,WAAO,KAAKA,KAAZ;AACA,SAAKoE,IAAL,GAAY1G,OAAO2G,qBAAP,CAA6B,KAAKjF,WAAlC,CAAZ;AACD,G;;AAGD;;;;;;;qBAKAyD,O,oBAAQ7C,K,EAAO;AACb,QAAIA,SAASA,MAAMxB,MAAN,GAAe,CAA5B,EAA+B;AAC7B,UAAIwB,MAAMA,MAAMxB,MAAN,GAAe,CAArB,EAAwB2E,SAAxB,GAAoCnD,MAAMA,MAAMxB,MAAN,GAAe,CAArB,EAAwB2E,SAA5D,GAAwE,EAA5E,EAAgF;AAC9E,eAAO,KAAKjD,SAAL,CAAe,KAAKC,aAAL,EAAf,CAAP;AACD;AACD,UAAI0E,KAAK,MAAM7E,MAAMA,MAAMxB,MAAN,GAAe,CAArB,EAAwB8D,KAAxB,GAAgCtC,MAAMA,MAAMxB,MAAN,GAAe,CAArB,EAAwB8D,KAA9D,KAAwEtC,MAAMA,MAAMxB,MAAN,GAAe,CAArB,EAAwB2E,SAAxB,GAAoCnD,MAAMA,MAAMxB,MAAN,GAAe,CAArB,EAAwB2E,SAApI,CAAT;AACA,UAAI2B,KAAK,MAAM9E,MAAMA,MAAMxB,MAAN,GAAe,CAArB,EAAwB8D,KAAxB,GAAgCtC,MAAMA,MAAMxB,MAAN,GAAe,CAArB,EAAwB8D,KAA9D,KAAwEtC,MAAMA,MAAMxB,MAAN,GAAe,CAArB,EAAwB2E,SAAxB,GAAoCnD,MAAMA,MAAMxB,MAAN,GAAe,CAArB,EAAwB2E,SAApI,CAAT;AACA,UAAIZ,KAAKC,GAAL,CAASqC,EAAT,IAAetC,KAAKC,GAAL,CAASsC,EAAT,CAAf,IAA+BvC,KAAKC,GAAL,CAASsC,EAAT,IAAe,GAAf,IAAsBvC,KAAKC,GAAL,CAASsC,EAAT,IAAe,GAAxE,EAA6E;AAC3E;AACA,YAAI7C,IAAI,KAAK/D,KAAL,CAAWsC,OAAX,CAAmB,KAAKL,aAAL,EAAnB,CAAR;AACA,YAAI2E,KAAK,CAAT,EAAY;AACV;AACA,cAAI7C,IAAI,CAAR,EAAW;AACT,iBAAK/B,SAAL,CAAe,KAAKhC,KAAL,CAAW+D,IAAI,CAAf,CAAf,EAAkC6C,EAAlC;AACD,WAFD,MAGK;AACH,gBAAI,KAAK/H,IAAL,CAAUC,SAAd,EAAyB;AACvB,mBAAKkD,SAAL,CAAe,KAAKhC,KAAL,CAAW,KAAKA,KAAL,CAAWM,MAAX,GAAoB,CAA/B,CAAf,EAAkDsG,EAAlD;AACD,aAFD,MAGK;AACH,mBAAK5E,SAAL,CAAe,KAAKhC,KAAL,CAAW,CAAX,CAAf;AACD;AACF;AACF,SAbD,MAcK;AACH;AACA,cAAI+D,IAAI,KAAK/D,KAAL,CAAWM,MAAX,GAAoB,CAA5B,EAA+B;AAC7B,iBAAK0B,SAAL,CAAe,KAAKhC,KAAL,CAAW+D,IAAI,CAAf,CAAf,EAAkC6C,EAAlC;AACD,WAFD,MAGK;AACH,gBAAI,KAAK/H,IAAL,CAAUC,SAAd,EAAyB;AACvB,mBAAKkD,SAAL,CAAe,KAAKhC,KAAL,CAAW,CAAX,CAAf,EAA8B4G,EAA9B;AACD,aAFD,MAGK;AACH,mBAAK5E,SAAL,CAAe,KAAKhC,KAAL,CAAW,KAAKA,KAAL,CAAWM,MAAX,GAAoB,CAA/B,CAAf;AACD;AACF;AACF;AACF,OA/BD,MAgCK;AACH,YAAI,KAAK2B,aAAL,GAAqBpE,eAArB,KAAyC,KAAKG,KAAL,GAAa,CAA1D,EAA6D;AAC3D,eAAKgE,SAAL,CAAe,KAAKC,aAAL,EAAf,EAAqC,CAAC,KAAKpD,IAAL,CAAUG,gBAAhD;AACD,SAFD,MAGK;AACH,eAAKgD,SAAL,CAAe,KAAKC,aAAL,EAAf,EAAqC,KAAKpD,IAAL,CAAUG,gBAA/C;AACD;AACF;AACF;AACF,G;;AAGD;;;;;;qBAIA8B,e,4BAAgBxD,C,EAAG;AACjB,SAAK,IAAI+C,IAAI,CAAb,EAAgBA,IAAI,KAAKL,KAAL,CAAWM,MAA/B,EAAuCD,GAAvC,EAA4C;AAC1C,WAAKL,KAAL,CAAWK,CAAX,EAAchD,YAAd,CAA2BC,CAA3B;AACD;AACF,G;;AAGD;;;;;;qBAIAwH,kB,+BAAmBxH,C,EAAG;AACpB,SAAK,IAAI+C,IAAI,CAAb,EAAgBA,IAAI,KAAKL,KAAL,CAAWM,MAA/B,EAAuCD,GAAvC,EAA4C;AAC1C,WAAKL,KAAL,CAAWK,CAAX,EAAc9C,YAAd,CAA2BD,CAA3B;AACD;AACF,G;;AAGD;;;;;;;qBAKAkE,a,0BAAclE,C,EAAG;AACf,QAAIF,CAAJ;AACA,QAAI,CAAC,KAAKyB,IAAL,CAAUM,uBAAV,IAAqC,CAAC,KAAKN,IAAL,CAAUK,YAAjD,KAAkE,CAAC,KAAKL,IAAL,CAAUC,SAA7E,IAA0F,CAAC,KAAKD,IAAL,CAAUQ,UAAzG,EAAqH;AACnH,UAAIwH,IAAI,KAAK7G,KAAL,CAAWsC,OAAX,CAAmB,KAAKwE,YAAxB,CAAR;AACA,UAAID,MAAM,KAAK7G,KAAL,CAAWM,MAAX,GAAoB,CAA9B,EAAiC;AAC/B,aAAKyG,UAAL,CAAgB,IAAhB;AACD,OAFD,MAGK;AACH,aAAKA,UAAL,CAAgB,KAAhB;AACD;AACD,UAAIF,MAAM,CAAV,EAAa;AACX,aAAKG,WAAL,CAAiB,IAAjB;AACD,OAFD,MAGK;AACH,aAAKA,WAAL,CAAiB,KAAjB;AACD;AACF,KAdD,MAeK;AACH,WAAKD,UAAL,CAAgB,KAAhB;AACA,WAAKC,WAAL,CAAiB,KAAjB;AACD;AACD,QAAI,KAAKxJ,SAAL,CAAeF,CAAf,GAAmBA,CAAnB,GAAuB,CAAvB,IAA4BA,IAAI,CAApC,EAAuC;AACrC,UAAI,KAAKuB,IAAL,CAAUC,SAAd,EAAyB;AACvB;AACA,eAAO,KAAKtB,SAAL,CAAeF,CAAf,GAAmBA,CAAnB,GAAuB,EAAE,KAAK2C,cAAL,GAAsB,KAAKjC,KAA7B,IAAsC,CAA7D,KAAmE,KAAKiC,cAAL,GAAsB,KAAKjC,KAA3B,GAAmC,KAAKR,SAAL,CAAeF,CAAf,GAAmBA,CAAnB,GAAuB,CAAC,KAAK2C,cAAN,GAAuB,CAAjF,GAAqF,IAAxJ,CAAP,EAAsK;AACpK7C,cAAI,KAAK4C,KAAL,CAAWiH,KAAX,EAAJ;AACA,eAAKjH,KAAL,CAAWS,IAAX,CAAgBrD,CAAhB;AACAA,YAAEC,YAAF,CAAe,KAAK4C,cAApB;AACA,eAAKa,eAAL,CAAqB,CAAC1D,EAAEY,KAAxB;AACAV,eAAKF,EAAEY,KAAP;AACD;AACF,OATD,MAUK;AACH;AACA,YAAI,KAAKa,IAAL,CAAUQ,UAAV,IAAwB/B,IAAI,CAA5B,IAAiC,KAAKE,SAAL,CAAeF,CAAf,GAAmBA,CAAnB,GAAuB,CAAvB,IAA4B,EAAE,KAAK2C,cAAL,GAAsB,KAAKjC,KAA7B,IAAsC,CAAvG,EAA0G;AACxG,eAAK+I,UAAL,CAAgB,IAAhB;AACA,iBAAO,KAAKhG,aAAL,CAAmB,EAAE,KAAKd,cAAL,GAAsB,KAAKjC,KAA7B,IAAsC,CAAzD,CAAP;AACD;AACD;AACA,YAAIV,IAAI,CAAJ,IAAU,KAAKE,SAAL,CAAeF,CAAf,GAAmBA,CAApB,GAA0B,EAAG,KAAK2C,cAAL,GAAsB,CAAvB,GAA6B,KAAKD,KAAL,CAAW,KAAKA,KAAL,CAAWM,MAAX,GAAoB,CAA/B,EAAkCtC,KAAlC,GAA0C,CAAzE,CAAvC,EAAsH;AACpHV,cAAIA,KAAK,CAAE,KAAK2C,cAAL,GAAsB,CAAvB,GAA6B,KAAKD,KAAL,CAAW,KAAKA,KAAL,CAAWM,MAAX,GAAoB,CAA/B,EAAkCtC,KAAlC,GAA0C,CAAvE,IAA6E,KAAKR,SAAL,CAAeF,CAAf,GAAmBA,CAAhG,CAAD,IAAuG,KAAK0C,KAAL,CAAW,KAAKA,KAAL,CAAWM,MAAX,GAAoB,CAA/B,EAAkCtC,KAA9I,CAAJ;AACAV,cAAIA,IAAI,CAAJ,GAAQ,CAAR,GAAYA,CAAhB;AACD;AACF;AACD,aAAO,KAAKyD,aAAL,CAAmB,KAAKvD,SAAL,CAAeF,CAAf,GAAmBA,CAAtC,CAAP;AACD,KAxBD,MAyBK;AACH,UAAI,KAAKE,SAAL,CAAeF,CAAf,GAAmBA,CAAnB,GAAuB,CAAvB,IAA4BA,IAAI,CAApC,EAAuC;AACrC,YAAI,KAAKuB,IAAL,CAAUC,SAAd,EAAyB;AACvB;AACA,iBAAO,KAAKtB,SAAL,CAAeF,CAAf,GAAmBA,CAAnB,GAAuB,EAAE,KAAKU,KAAL,GAAa,KAAKiC,cAApB,IAAsC,CAA7D,KAAmE,KAAKA,cAAL,GAAsB,KAAKjC,KAA3B,GAAmC,KAAKR,SAAL,CAAeF,CAAf,GAAmBA,CAAnB,GAAuB,KAAK2C,cAAL,GAAsB,CAAhF,GAAoF,IAAvJ,CAAP,EAAqK;AACnK7C,gBAAI,KAAK4C,KAAL,CAAWkH,GAAX,EAAJ;AACA,iBAAKlH,KAAL,CAAWmH,OAAX,CAAmB/J,CAAnB;AACAA,cAAEC,YAAF,CAAe,CAAC,KAAK4C,cAArB;AACA,iBAAKa,eAAL,CAAqB1D,EAAEY,KAAvB;AACAV,iBAAKF,EAAEY,KAAP;AACD;AACF,SATD,MAUK;AACH;AACA,cAAI,KAAKa,IAAL,CAAUQ,UAAV,IAAwB/B,IAAI,CAA5B,IAAiC,KAAKE,SAAL,CAAeF,CAAf,GAAmBA,CAAnB,GAAuB,CAAvB,IAA4B,CAAC,KAAK2C,cAAL,GAAsB,KAAKjC,KAA5B,IAAqC,CAAtG,EAAyG;AACvG,iBAAKgJ,WAAL,CAAiB,IAAjB;AACA,mBAAO,KAAKjG,aAAL,CAAmB,CAAC,KAAKd,cAAL,GAAsB,KAAKjC,KAA5B,IAAqC,CAAxD,CAAP;AACD;AACD;AACA,cAAIV,IAAI,CAAJ,IAAU,KAAKE,SAAL,CAAeF,CAAf,GAAmBA,CAApB,GAA2B,KAAK2C,cAAL,GAAsB,CAAvB,GAA6B,KAAKD,KAAL,CAAW,CAAX,EAAchC,KAAd,GAAsB,CAA1F,EAA+F;AAC7FV,gBAAIA,KAAK,CAAE,KAAK2C,cAAL,GAAsB,CAAvB,GAA6B,KAAKD,KAAL,CAAW,CAAX,EAAchC,KAAd,GAAsB,CAAnD,IAAyD,KAAKR,SAAL,CAAeF,CAAf,GAAmBA,CAA5E,CAAD,IAAmF,KAAK0C,KAAL,CAAW,CAAX,EAAchC,KAAtG,CAAJ;AACAV,gBAAIA,IAAI,CAAJ,GAAQ,CAAR,GAAYA,CAAhB;AACD;AACF;AACF;AACD,aAAO,KAAKyD,aAAL,CAAmB,KAAKvD,SAAL,CAAeF,CAAf,GAAmBA,CAAtC,CAAP;AACD;AACF,G;;AAGD;;;;;;qBAIAyJ,U,uBAAWpJ,C,EAAG;AACZ,QAAI,OAAOA,CAAP,KAAa,WAAjB,EAA8B;AAC5B,WAAKyJ,SAAL,GAAiB,OAAO,KAAKA,SAAZ,KAA0B,WAA1B,GAAwC,KAAxC,GAAgD,KAAKA,SAAtE;AACA,aAAO,KAAKA,SAAZ;AACD,KAHD,MAIK;AACH,UAAIzJ,CAAJ,EAAO;AACL,gCAAS,KAAKd,EAAd,EAAkB,WAAlB;AACD,OAFD,MAGK;AACH,mCAAY,KAAKA,EAAjB,EAAqB,WAArB;AACD;AACD,WAAKuK,SAAL,GAAiBzJ,CAAjB;AACA,aAAO,KAAKyJ,SAAZ;AACD;AACF,G;;AAGD;;;;;;qBAIAJ,W,wBAAYrJ,C,EAAG;AACb,QAAI,OAAOA,CAAP,KAAa,WAAjB,EAA8B;AAC5B,WAAK0J,UAAL,GAAkB,OAAO,KAAKA,UAAZ,KAA2B,WAA3B,GAAyC,KAAzC,GAAiD,KAAKA,UAAxE;AACA,aAAO,KAAKA,UAAZ;AACD,KAHD,MAIK;AACH,UAAI1J,CAAJ,EAAO;AACL,gCAAS,KAAKd,EAAd,EAAkB,YAAlB;AACD,OAFD,MAGK;AACH,mCAAY,KAAKA,EAAjB,EAAqB,YAArB;AACD;AACD,WAAKwK,UAAL,GAAkB1J,CAAlB;AACA,aAAO,KAAK0J,UAAZ;AACD;AACF,G;;AAGD;;;;;;qBAIA3F,e,8BAAkB;AAChB,QAAIiE,MAAM,KAAK3H,KAAL,GAAa,CAAvB;AACA,QAAIqC,IAAI,CAAC,CAAT;AACA,QAAIjD,IAAI,CAAR;AACA,QAAIO,IAAI,CAAR;AACA,WAAOP,IAAIO,CAAX,EAAc;AACZ0C;AACA,UAAIA,IAAI,KAAKL,KAAL,CAAWM,MAAX,GAAoB,CAA5B,EAA+B;AAC7B;AACD;AACDlD,UAAIiH,KAAKC,GAAL,CAASqB,MAAM,KAAK3F,KAAL,CAAWK,CAAX,EAAcxC,eAAd,EAAf,CAAJ;AACAF,UAAI0G,KAAKC,GAAL,CAASqB,MAAM,KAAK3F,KAAL,CAAWK,IAAI,CAAf,EAAkBxC,eAAlB,EAAf,CAAJ;AACD;AACD,WAAO,KAAKoE,aAAL,CAAmB,KAAKjC,KAAL,CAAWK,CAAX,CAAnB,CAAP;AACD,G;;AAGD;;;;;;;;;qBAOA4B,a,0BAAc8D,I,EAAM;AAClB,QAAI,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAApB,EAA8B;AAC5B,UAAI,KAAKe,YAAT,EAAuB;AACrB,eAAO,KAAKA,YAAZ;AACD,OAFD,MAGK;AACH,eAAO,KAAKpF,eAAL,EAAP;AACD;AACF,KAPD,MAQK;AACH,UAAI,KAAKoF,YAAT,EAAuB;AACrB,aAAKA,YAAL,CAAkBpJ,WAAlB,CAA8B,KAA9B;AACD;AACD,WAAKoJ,YAAL,GAAoBf,IAApB;AACA,UAAI,CAAC,KAAKlH,IAAL,CAAUM,uBAAV,IAAqC,CAAC,KAAKN,IAAL,CAAUK,YAAjD,KAAkE,CAAC,KAAKL,IAAL,CAAUC,SAA7E,IAA0F,CAAC,KAAKD,IAAL,CAAUQ,UAAzG,EAAqH;AACnH,YAAIwH,IAAI,KAAK7G,KAAL,CAAWsC,OAAX,CAAmB,KAAKwE,YAAxB,CAAR;AACA,YAAID,MAAM,KAAK7G,KAAL,CAAWM,MAAX,GAAoB,CAA9B,EAAiC;AAC/B,eAAKyG,UAAL,CAAgB,IAAhB;AACD,SAFD,MAGK;AACH,eAAKA,UAAL,CAAgB,KAAhB;AACD;AACD,YAAIF,MAAM,CAAV,EAAa;AACX,eAAKG,WAAL,CAAiB,IAAjB;AACD,SAFD,MAGK;AACH,eAAKA,WAAL,CAAiB,KAAjB;AACD;AACF;AACD,WAAKF,YAAL,CAAkBpJ,WAAlB,CAA8B,IAA9B;AACD;AACF,G;;AAGD;;;;;;qBAIAqD,a,0BAAczD,C,EAAG;AACfA,QAAIA,IAAIA,CAAJ,GAAQ,CAAZ;AACA,SAAKE,SAAL,GAAiB;AACf,WAAKF;AADU,KAAjB;AAGA,SAAKoB,SAAL,CAAejB,YAAf,CAA4B,OAA5B,EAAqC,yBAAU,aAAV,EAAyBH,IAAI,cAA7B,CAArC;AACA,SAAKoE,eAAL;AACA,WAAOpE,CAAP;AACD,G;;;;;AAIH;;;;;;;;AAMAV,SAAS0K,SAAT,CAAmBC,QAAnB,GAA8B;AAC5B1K,MAAI;AADwB,CAA9B;;AAKA;;;;AAIAD,SAAS0K,SAAT,CAAmBE,kBAAnB,GAAwC,EAAxC;;kBAEe5K,Q","file":"carousel.js","sourcesContent":["/**\n * # Carousel\n * Create a Carousel\n *\n * @example\n * new Carousel(el);\n *\n * @module components/carousel.js\n */\n\nimport BaseComponent from './base';\nimport debounce from '../helpers/util/debounce';\nimport transform from '../helpers/css/transform';\nimport addClass from '../helpers/dom/add-class';\nimport removeClass from '../helpers/dom/remove-class';\n\nclass Carousel extends BaseComponent {\n\n  /**\n   * Carousel constructor.\n   * @param {Element} el\n   * @param {Object} params\n   */\n  constructor(el, params) {\n\n    super(el, params);\n\n    params = params || {};\n\n    if (!el) {\n      return;\n    }\n\n    this._init(el);\n  }\n\n\n  /**\n   * Carousel Item Contructor, exposes access to functions setTransform, setSelected, and currentPosition\n   * @param {Element} el Node to initalize as carouselItem\n   * @param {Object} parent reference to the parent carousel\n   * @param {Element} dot Node to use as dot element\n   * @param {Number} order original order in the markup\n   */\n  _carouselItem(el, parent, dot, order) {\n    var a = {};\n    a.el = el;\n    a.parent = parent;\n    a.dot = dot;\n    a.order = order;\n    a.addTransform = function(x) {\n      a.setTransform(a.transform.x + x);\n    };\n    a.setTransform = function(x) {\n      x = x ? x : 0;\n      a.transform = {\n        'x': x\n      };\n      a.el.setAttribute('style', transform('translate3d', a.transform.x + 'px, 0px, 0px'));\n    };\n    a.setSelected = function(b) {\n      if (a.setSelected.selected === b && typeof a.setSelected.selected !== 'undefined') {\n        return;\n      }\n      if (b) {\n        addClass(a.el, 'selected');\n        addClass(a.dot, 'selected');\n        a.setSelected.selected = true;\n      }\n      else {\n        removeClass(a.el, 'selected');\n        removeClass(a.dot, 'selected');\n        a.setSelected.selected = false;\n      }\n    };\n    a.currentPosition = function() {\n      return parent.transform.x + a.transform.x + a.dims.left + (a.width / 2) - parent.dims.left;\n    };\n    a.setTransform();\n    a.dims = el.getBoundingClientRect();\n    a.width = a.dims.width;\n    a.el.sparkcarouselitem = a;\n    a.dot.sparkcarouselitemdot = a;\n    return a;\n  }\n\n\n  /**\n   * Scans element and sets up or resets the carousel based on configuration\n   * @param {Element} el Node to initalize as the carousel\n   */\n  _init(el) {\n    //cache elements and controls\n    this.el = el;\n    this.el.sparkcarousel = this;\n    this.backe = this.el.querySelector('.spark-carousel__back');\n    this.forwarde = this.el.querySelector('.spark-carousel__forward');\n    this.outerContainer = this.el.querySelector('.spark-carousel__outer-container');\n    this.containerMask = this.el.querySelector('.spark-carousel__container-mask');\n    this.container = this.el.querySelector('.spark-carousel__container');\n    this.dots = this.el.querySelector('.spark-carousel__dots');\n    this.pauseEl = this.el.querySelector('.spark-carousel__pause');\n    //get the options from the element\n    this.opts = {};\n    this.opts.wrapItems = this.el.attributes['data-spark-carousel-wrap-items'] ? true : false;\n    this.opts.startingVelocity = this.el.attributes['data-spark-carousel-scroll-velocity'] ? this.el.attributes['data-spark-carousel-scroll-velocity'].value : 10;\n    this.opts.smoothScroll = this.el.attributes['data-spark-carousel-smooth-scroll'] ? true : false;\n    this.opts.smoothScrollCenterItems = this.el.attributes['data-spark-carousel-smooth-scroll-center'] ? true : false;\n    this.opts.panelScroll = this.el.attributes['data-spark-carousel-panel'] ? true : false;\n    this.opts.edgeScroll = this.opts.panelScroll || this.el.attributes['data-spark-carousel-edge'] ? true : false;\n    this.opts.autoAdvance = this.el.attributes['data-spark-carousel-auto-advance'] ? this.el.attributes['data-spark-carousel-auto-advance'].value : false;\n    //setup autoAdvance\n    if (this.opts.autoAdvance && !this.autoAdvance && !this.pause) {\n      this.autoAdvance = window.setTimeout(function() {\n        this._autoAdvance();\n      }.bind(this), this.opts.autoAdvance * 1000);\n    }\n    //conditionally bind pause handlers.\n    //needs to be done here so that resetting the carousel will work correctly\n    if (this.opts.autoAdvance && !this.pauseH) {\n      this.pauseH = this._pause.bind(this);\n      this.pauseEl.addEventListener('click', this.pauseH);\n    }\n    //collect items and cache sizing\n    var a = this.el.querySelectorAll('.spark-carousel__item');\n    this.items = [];\n    this.totalItemWidth = 0;\n    this.dims = this.containerMask.getBoundingClientRect();\n    this.width = this.dims.width;\n    this.height = this.dims.height;\n    var dots = document.createDocumentFragment();\n    var b;\n    //create our carouselItems\n    for (var i = 0; i < a.length; i++) {\n      b = document.createElement('div');\n      dots.appendChild(b);\n      this.items.push(new this._carouselItem(a[i], this, b, i));\n      this.totalItemWidth += this.items[i].width;\n    }\n    //if we're resetting we need to empty out the exisiting elements first\n    while (this.dots.firstChild) {\n      this.dots.removeChild(this.dots.firstChild);\n    }\n    this.dots.appendChild(dots);\n    //this is to test if we're dealing with 2011 flexbox (IE10) and need to do an adjustment\n    //this is because ms-flex-pack: center doesn't work like 2012 flexbox center-pack\n    if (typeof this.container.style.msFlexAlign !== 'undefined') {\n      this._transformItems(-(this.totalItemWidth - this.width) / 2);\n    }\n    //setup inital transform\n    this._setTransform();\n    //need to bind this event handler here as we are always going to need to be listening\n    //for this event, in order to react to container visibility changing\n    this._handleVisibleChildren = this._handleVisibleChildrenH.bind(this);\n    document.addEventListener('spark.visible-children', this._handleVisibleChildren, true);\n    if (!this._rafHandler) {\n      this._rafHandler = this._rafHandlerH.bind(this);\n    }\n    //need to also listen to resize events, even if we don't have items overflowing\n    if (!this.resizeH) {\n      this.resizeH = debounce(this._resize.bind(this), 100);\n      window.addEventListener('resize', this.resizeH);\n    }\n    //if we haven't already init'd event listerers, and we have items overflowing\n    if (this.totalItemWidth > this.width) {\n      if (!this.touchstartH) {\n        removeClass(this.el, 'noscroll');\n        this._setupListeners();\n        //center the first item\n        this._addTransform(-this.items[0].currentPosition() + (this.width / 2));\n      }\n    }\n    //if we don't have overflowing items, then disable scrolling and remove listeners\n    else {\n      addClass(this.el, 'noscroll');\n      this._removeListeners();\n    }\n    //set the new selected item\n    this._updateSelected();\n    //finally, display the element\n    addClass(this.el, 'ready');\n  }\n\n\n  /**\n   * Tears down the component, removes listeners, and conditionally delete the DOM element\n   * @param {Boolean} leaveElement Falsey value will remove the DOM element as well as the component instance\n   */\n  remove(leaveElement) {\n    window.removeEventListener('resize', this.resizeH);\n    delete this.resizeH;\n    document.removeEventListener('spark.visible-children', this._handleVisibleChildren, true);\n    delete this._handleVisibleChildren;\n    super.remove(leaveElement);\n  }\n\n\n  /**\n   * Pause/unpause the autoAdvance feature\n   */\n  _pause() {\n    if (this.pause) {\n      delete this.moves;\n      this.autoAdvance = window.setTimeout(function() {\n        this._autoAdvance();\n      }.bind(this), this.opts.autoAdvance * 1000);\n    }\n    else {\n      this._rafCancel();\n      if (!this.opts.smoothScroll || this.opts.smoothScrollCenterItems) {\n        this._scrollTo(this._selectedItem());\n      }\n      window.clearTimeout(this.autoAdvance);\n      delete this.autoAdvance;\n    }\n    this._setPause(!this.pause);\n  }\n\n\n  /**\n   * toggles the pause class on the element\n   * @param {Boolean} b Truthy value will give the element the pause class\n   */\n  _setPause(b) {\n    if (typeof b === 'undefined') {\n      this.pause = typeof this.pause === 'undefined' ? false : this.pause;\n      return this.pause;\n    }\n    else {\n      if (b) {\n        addClass(this.el, 'pause');\n      }\n      else {\n        removeClass(this.el, 'pause');\n      }\n      this.pause = b;\n      return this.pause;\n    }\n  }\n\n\n  /**\n   * function called by window.setTimeout, will check first to see if element is in use before triggering a slide advance\n   */\n  _autoAdvance() {\n    if (!this.moves && !this._laststart && !this.paused) {\n      this._rafCancel();\n      var a = this.items.indexOf(this._selectedItem());\n      this._scrollToItem = true;\n      this._scrollTo(this.items[a === this.items.length - 1 ? 0 : a + 1]);\n      this.autoAdvance = window.setTimeout(function() {\n        this._autoAdvance();\n      }.bind(this), this.opts.autoAdvance * 1000);\n    }\n  }\n\n\n  /**\n   * initalize and bind even listeners\n   */\n  _setupListeners() {\n    this.touchstartH = this._touchstart.bind(this);\n    this.container.addEventListener('touchstart', this.touchstartH);\n    this.touchmoveH = this._touchmove.bind(this);\n    window.addEventListener('touchmove', this.touchmoveH);\n    this.touchendH = this._touchend.bind(this);\n    window.addEventListener('touchend', this.touchendH);\n    this.mousedownH = this._mousedown.bind(this);\n    this.container.addEventListener('mousedown', this.mousedownH);\n    this.mousemoveH = this._mousemove.bind(this);\n    window.addEventListener('mousemove', this.mousemoveH);\n    this.mouseupH = this._mouseup.bind(this);\n    window.addEventListener('mouseup', this.mouseupH);\n    this.forwardH = this._forward.bind(this);\n    this.forwarde.addEventListener('click', this.forwardH);\n    this.backH = this._back.bind(this);\n    this.backe.addEventListener('click', this.backH);\n    this.clickH = this._click.bind(this);\n    this.el.addEventListener('click', this.clickH);\n    this._focusHandler = this._scrollToClicked.bind(this);\n    this.container.addEventListener('focus', this._focusHandler, true);\n  }\n\n\n  /**\n   * Removes non-essential event listeners, called when tearing down the component, or our content\n   * does not exceed the width of our element\n   */\n  _removeListeners() {\n    this.el.removeEventListener('touchstart', this.touchstartH);\n    delete this.touchstartH;\n    window.removeEventListener('touchmove', this.touchmoveH);\n    delete this.touchmoveH;\n    window.removeEventListener('touchend', this.touchendH);\n    delete this.touchendH;\n    this.el.removeEventListener('mousedown', this.mousedownH);\n    delete this.mousedownH;\n    window.removeEventListener('mousemove', this.mousemoveH);\n    delete this.mousemoveH;\n    window.removeEventListener('mouseup', this.mouseupH);\n    delete this.mouseupH;\n    this.forwarde.removeEventListener('click', this.forwardH);\n    delete this.forwardH;\n    this.backe.removeEventListener('click', this.backH);\n    delete this.backH;\n    this.el.removeEventListener('click', this.clickH);\n    delete this.clickH;\n    this.container.removeEventListener('focus', this._focusHandler, true);\n    delete this._focusHandler;\n    if (this.pauseEl) {\n      this.pauseEl.removeEventListener('click', this.pauseH);\n      delete this.pauseH;\n    }\n  }\n\n\n  /**\n   * Event handler for the spark.visible-children event, just call the change function to handle any\n   * visibility or sizing changes\n   * @param {Event} e The spark.visible-children event\n   */\n  _handleVisibleChildrenH(e) {\n    if (e.target.contains(this.el)) {\n      window.setTimeout(function() {\n        this.change();\n      }.bind(this), 0);\n    }\n  }\n\n\n  /**\n   * Forward button click handler triggers a scrollTo to the \"next\" element\n   * @param {Event} e The click event\n   */\n  _forward(e) {\n    var s = this.items.indexOf(this._selectedItem());\n    s++;\n    if (s > this.items.length - 1) {\n      if (this.opts.wrapItems) {\n        s = 0;\n      }\n      else {\n        s--;\n      }\n    }\n    delete this.moves;\n    var a = this._startingVelocity;\n    a = a < -this.opts.startingVelocity ? a : -this.opts.startingVelocity;\n    this._rafCancel();\n    this._scrollToItem = true;\n    this._scrollTo(this.items[s], a);\n    if (e) {\n      e.preventDefault();\n    }\n  }\n\n\n  /**\n   * Back button click handler triggers a scrollTo to the \"previous\" element\n   * @param {Event} e The click event\n   */\n  _back(e) {\n    var s = this.items.indexOf(this._selectedItem());\n    s--;\n    if (s < 0) {\n      if (this.opts.wrapItems) {\n        s = this.items.length - 1;\n      }\n      else {\n        s++;\n      }\n    }\n    delete this.moves;\n    var a = this._startingVelocity;\n    a = a > this.opts.startingVelocity ? a : this.opts.startingVelocity;\n    this._rafCancel();\n    this._scrollToItem = true;\n    this._scrollTo(this.items[s], a);\n    if (e) {\n      e.preventDefault();\n    }\n  }\n\n\n  /**\n   * Move start handler, handles both touchstart and mousedown events\n   * @param {Object} e The start event\n   */\n  _movestart(e) {\n    this._rafCancel();\n    this.moves = [];\n    this.moves.push(e);\n  }\n\n\n  /**\n   * Move handler, handles internal move event objects\n   * @param {Object} e The move event\n   */\n  _move(e) {\n    if (this.moves && this.moves.length > 1) {\n      this._addTransform(e.pageX - this.moves[this.moves.length - 1].pageX);\n      this.moves.push(e);\n      e.preventDefault = true;\n    }\n    else {\n      if (this.moves && this.moves[0]) {\n        if (Math.abs(this.moves[0].pageX - e.pageX) > Math.abs(this.moves[0].pageY - e.pageY) && Math.abs(this.moves[0].pageX - e.pageX) > 5 && e.cancelable) {\n          this._addTransform(e.pageX - this.moves[0].pageX);\n          this.moves.push(e);\n          e.preventDefault = true;\n        }\n        else {\n          if (Math.abs(this.moves[0].pageX - e.pageX) > 5) {\n            this.moves[0] = e;\n          }\n        }\n      }\n      if (e.type === 'touchend' || e.type === 'mouseup') {\n        delete this.moves;\n      }\n    }\n  }\n\n\n  /**\n   * Move end handler, handles both touchend and mouseup events\n   * @param {Object} e The moveend event\n   */\n  _moveend(e) {\n    this._move(e);\n    if (!this.opts.smoothScroll) {\n      this._settle(this.moves);\n    }\n    else {\n      this._interiaScroll(this.moves);\n    }\n    return e;\n  }\n\n\n  /**\n   * Resize event handler, calls change to handle any element dimension changes\n   */\n  _resize() {\n    this.change();\n  }\n\n\n  /**\n   * Calling the change function will handle updating the element to take into account\n   * any styling, sizing, or visibility changes, and the addition or removal of any carouselItems\n   */\n  change() {\n    var dims = this.el.getBoundingClientRect();\n    if (dims.width !== this.width || dims.height !== this.height) {\n      if (this.autoAdvance) {\n        window.clearTimeout(this.autoAdvance);\n        delete this.autoAdvance;\n      }\n      this._rafCancel();\n      var c = this._selectedItem();\n      this._setTransform(0);\n      this._setTransformItems(0);\n      this._init(this.el);\n      if (this.items.indexOf(c.el.sparkcarouselitem) > -1 && this.totalItemWidth > this.width) {\n        if (this.opts.wrapItems) {\n          this._addTransform(-this.totalItemWidth + (-c.el.sparkcarouselitem.currentPosition() + (this.width / 2)));\n        }\n        else {\n          this._addTransform(-c.el.sparkcarouselitem.currentPosition() + (this.width / 2));\n        }\n      }\n    }\n  }\n\n\n  /**\n   * Update the component to use a new element or reparse from\n   * the existing element.\n   * @param {Element} el Optional\n   */\n  update(el) {\n\n    el = el || this.el;\n\n    this._removeListeners();\n    window.removeEventListener('resize', this.resizeH);\n    delete this.resizeH;\n    document.removeEventListener('spark.visible-children', this._handleVisibleChildren, true);\n    delete this._handleVisibleChildren;\n    this._init(el);\n\n    this.change();\n\n    return this;\n  }\n\n\n  /**\n   * Touchstart event handler, passes necessary data points to the movestart function\n   * @param {Object} e The touchstart event\n   */\n  _touchstart(e) {\n    var a = {\n      'type': e.type,\n      'pageX': e.touches[0].pageX,\n      'pageY': e.touches[0].pageY,\n      'timeStamp': e.timeStamp\n    };\n    this._movestart(a);\n  }\n\n\n  /**\n   * Touchmove event handler, passes necessary data points to the move function\n   * @param {Object} e The touchmove event\n   */\n  _touchmove(e) {\n    var a = {\n      'type': e.type,\n      'pageX': e.touches[0].pageX,\n      'pageY': e.touches[0].pageY,\n      'timeStamp': e.timeStamp,\n      'cancelable': e.cancelable\n    };\n    this._move(a);\n    if (a.preventDefault) {\n      e.preventDefault();\n    }\n  }\n\n\n  /**\n   * Touchend event handler, passes necessary data points to the moveend function\n   * @param {Object} e The touchend event\n   */\n  _touchend(e) {\n    if (this.moves && this.moves.length > 2 && e.cancelable) {\n      var a = {\n        'type': e.type,\n        'pageX': this.moves[this.moves.length - 1].pageX,\n        'pageY': this.moves[this.moves.length - 1].pageY,\n        'timeStamp': e.timeStamp\n      };\n      this._moveend(a);\n    } else {\n      delete this.moves;\n    }\n  }\n\n\n  /**\n   * Mousedown event handler, passes necessary data points to the movestart function\n   * @param {Object} e The mousedown event\n   */\n  _mousedown(e) {\n    if (e.button !== 0) {\n      return e;\n    }\n    this.isMouseDown = true;\n    var a = {\n      'type': e.type,\n      'pageX': e.pageX,\n      'pageY': e.pageY,\n      'timeStamp': e.timeStamp\n    };\n    this._movestart(a);\n    e.preventDefault();\n  }\n\n\n  /**\n   * Mousemove event handler, passes necessary data points to the move function\n   * @param {Object} e The mousemove event\n   */\n  _mousemove(e) {\n    if (this.isMouseDown) {\n      var a = {\n        'type': e.type,\n        'pageX': e.clientX,\n        'pageY': e.clientY,\n        'timeStamp': e.timeStamp,\n        //this was changed to correct an issue in safari - it doesn't report cancelable correctly\n        'cancelable': true\n      };\n      this._move(a);\n      if (a.preventDefault) {\n        e.preventDefault();\n      }\n    }\n  }\n\n\n  /**\n   * Mouseup event handler, passes necessary data points to the moveend function\n   * @param {Object} e The mouseup event\n   */\n  _mouseup(e) {\n    if (this.moves && this.moves.length > 2) {\n      var a = {\n        'type': e.type,\n        'pageX': e.pageX,\n        'pageY': e.pageY,\n        'timeStamp': e.timeStamp\n      };\n      this._moveend(a);\n      this.mouseUpHandled = true;\n    }\n    else {\n      delete this.moves;\n      this._scrollToClicked(e);\n    }\n    this.isMouseDown = false;\n  }\n\n\n  /**\n   * Click event handler\n   * @param {Object} e The click event\n   */\n  _click(e) {\n    //if we are already tracking moves, then this will be handled by the mouseend event handler and we should prevent the default action\n    if (this.moves) {\n      e.preventDefault();\n    }\n    //if it has already been handled by mouseup handler, prevent the action\n    if (this.mouseUpHandled) {\n      e.preventDefault();\n    }\n    //reset our handled state\n    delete this.mouseUpHandled;\n    //checking both this.moves and this.mouseUpHandled ensures we capture events correctly in all browsers, where the order of the mouseup/click events can vary\n  }\n\n\n  /**\n   * Calculate the user's recent cursor/finger velocity\n   * @param {Array} moves The array of cursor positions\n   */\n  _velocity(moves) {\n    var avg = 0;\n    var m = Math.min(6, moves.length - 1);\n    for (var i = 1; i < m; i++) {\n      if (moves[moves.length - i].timeStamp === moves[moves.length - i - 1].timeStamp) {\n        avg += avg / i;\n      }\n      else {\n        avg += (10 * (moves[moves.length - i].pageX - moves[moves.length - i - 1].pageX) / (moves[moves.length - i].timeStamp - moves[moves.length - i - 1].timeStamp)) / m;\n      }\n    }\n    return avg;\n  }\n\n\n  /**\n   * Handles click events on items and dots, scrolling to the clicked item\n   * @param {Event} e The click event\n   */\n  _scrollToClicked(e) {\n    var tar = e.target;\n    if (this.el.contains(tar)) {\n      while (!tar.sparkcarousel) {\n        if (tar.sparkcarouselitem) {\n          this.containerMask.scrollLeft = 0;\n          delete this.moves;\n          this._rafCancel();\n          this._scrollTo(tar.sparkcarouselitem);\n          e.preventDefault();\n          break;\n        }\n        if (tar.sparkcarouselitemdot) {\n          this.containerMask.scrollLeft = 0;\n          delete this.moves;\n          this._rafCancel();\n          var v = tar.sparkcarouselitemdot.order < this._selectedItem().order ? this.opts.startingVelocity : -this.opts.startingVelocity;\n          this._scrollTo(tar.sparkcarouselitemdot, v);\n          e.preventDefault();\n          break;\n        }\n        tar = tar.parentNode;\n      }\n    }\n  }\n\n\n  /**\n   * Scroll to the carouselItem, with specified startingVelocity, auto determines default velocity if not specified\n   * @param {Object} item The carouselItem to scroll to\n   * @param {Number} startingVelocity The startingVelocity of the scroll animation\n   */\n  _scrollTo(item, startingVelocity) {\n    var offset = this.width / 2;\n    var currentPosition = item.currentPosition();\n    if (!startingVelocity) {\n      startingVelocity = offset - item.currentPosition() > 0 ? this.opts.startingVelocity : -this.opts.startingVelocity;\n    }\n    if (this.opts.wrapItems) {\n      if (startingVelocity > 0) {\n        //left\n        if (currentPosition > offset) {\n          this._totalDistance = offset + this.totalItemWidth - currentPosition;\n        }\n        else {\n          this._totalDistance = offset - currentPosition;\n        }\n      }\n      else {\n        //right\n        if (currentPosition < offset) {\n          this._totalDistance = -(this.totalItemWidth + currentPosition - offset);\n        }\n        else {\n          this._totalDistance = offset - currentPosition;\n        }\n      }\n    }\n    else {\n      this._totalDistance = offset - currentPosition;\n    }\n    this._startingVelocity = startingVelocity;\n    delete this.moves;\n    this._scrollToItem = true;\n    this._raf = window.requestAnimationFrame(this._rafHandler);\n  }\n\n\n  /**\n   * This is the animator function, it examines the options set on the carousel object\n   * and selectively adds transform and requests addtional animation frames if necesary\n   * @param {Number} t The timestamp for the current animation frame\n   */\n  _rafHandlerH(t) {\n    if (this.opts.autoAdvance && this.autoAdvance) {\n      window.clearTimeout(this.autoAdvance);\n      delete this.autoAdvance;\n    }\n    var frames;\n    if (this.moves || !this._startingVelocity) {\n      this._rafCancel();\n      return;\n    }\n    if (!this._laststart) {\n      this._laststart = t;\n    }\n    if (!this._remainingDistance) {\n      this._remainingDistance = this._totalDistance;\n    }\n    if (!this._lastframe) {\n      this._lastframe = t;\n      frames = 1;\n    }\n    else {\n      frames = (t - this._lastframe) / ((1 / 60) * 1000);\n    }\n    var d = this._startingVelocity * frames;\n    if (this.opts.smoothScroll && !this._scrollToItem) {\n      this._addTransform(d);\n      this._startingVelocity *= Math.pow(0.97, frames);\n      if (this.opts.smoothScrollCenterItems && Math.abs(this._startingVelocity) < 1) {\n        this._scrollTo(this._selectedItem());\n      }\n      if (Math.abs(this._startingVelocity) < 0.5) {\n        if ((this._startingVelocity > 0 && this.transform.x > ((this.totalItemWidth / 2) - (this.items[0].width / 2))) ||\n          (this._startingVelocity < 0 && this.transform.x < (-((this.totalItemWidth / 2) - (this.items[this.items.length - 1].width / 2))))) {\n          this._scrollToItem = true;\n          this._scrollTo(this._selectedItem());\n        }\n        else {\n          this._rafCancel();\n        }\n      }\n      else {\n        this._raf = window.requestAnimationFrame(this._rafHandler);\n      }\n    }\n    else {\n      if (this._startingVelocity > 0) {\n        if (d < this._remainingDistance) {\n          this._addTransform(d);\n          this._remainingDistance -= d;\n          if (this._remainingDistance > this._totalDistance / 2) {\n            this._startingVelocity *= Math.pow(1.15, frames);\n          }\n          else {\n            this._startingVelocity *= Math.pow(0.9, frames);\n            this._startingVelocity = this._startingVelocity > 2 ? this._startingVelocity : 2;\n          }\n          this._raf = window.requestAnimationFrame(this._rafHandler);\n        }\n        else {\n          this._addTransform(this._remainingDistance);\n          this._rafCancel();\n        }\n      }\n      else {\n        if (d > this._remainingDistance) {\n          this._addTransform(d);\n          this._remainingDistance -= d;\n          if (this._remainingDistance < this._totalDistance / 2) {\n            this._startingVelocity *= Math.pow(1.15, frames);\n          }\n          else {\n            this._startingVelocity *= Math.pow(0.9, frames);\n            this._startingVelocity = this._startingVelocity < -2 ? this._startingVelocity : -2;\n          }\n          this._raf = window.requestAnimationFrame(this._rafHandler);\n        }\n        else {\n          this._addTransform(this._remainingDistance);\n          this._rafCancel();\n        }\n      }\n    }\n    this._lastframe = t;\n  }\n\n\n  /**\n   * This is the animator clearing function\n   * it clears values used during animation, and selectively enables autoAdvance\n   */\n  _rafCancel() {\n    if (this.opts.autoAdvance && !this.autoAdvance && !this.pause) {\n      this.autoAdvance = window.setTimeout(function() {\n        this._autoAdvance();\n      }.bind(this), this.opts.autoAdvance * 1000);\n    }\n    window.cancelAnimationFrame(this._raf);\n    delete this._scrollToItem;\n    delete this._laststart;\n    delete this._startingVelocity;\n    delete this._remainingDistance;\n    delete this._totalDistance;\n    delete this._lastframe;\n  }\n\n\n  /**\n   * This computes values necessary to start an animation frame when the carousel is\n   * configured to use smoothScroll\n   * @param {Array} moves The captured move events\n   */\n  _interiaScroll(moves) {\n    if (moves[moves.length - 1].timeStamp - moves[moves.length - 2].timeStamp > 100 || moves.length < 3) {\n      if(this.opts.smoothScrollCenterItems) {\n        return this._scrollTo(this._selectedItem());\n      }\n      return;\n    }\n    this._startingVelocity = this._velocity(moves);\n    delete this.moves;\n    this._raf = window.requestAnimationFrame(this._rafHandler);\n  }\n\n\n  /**\n   * This determines which carousel item should be focused based on the previous moves\n   * made by the user\n   * @param {Array} moves The captured move events\n   */\n  _settle(moves) {\n    if (moves && moves.length > 3) {\n      if (moves[moves.length - 1].timeStamp - moves[moves.length - 2].timeStamp > 80) {\n        return this._scrollTo(this._selectedItem());\n      }\n      var v1 = 10 * (moves[moves.length - 3].pageX - moves[moves.length - 4].pageX) / (moves[moves.length - 3].timeStamp - moves[moves.length - 4].timeStamp);\n      var v2 = 10 * (moves[moves.length - 2].pageX - moves[moves.length - 3].pageX) / (moves[moves.length - 2].timeStamp - moves[moves.length - 3].timeStamp);\n      if (Math.abs(v1) < Math.abs(v2) || Math.abs(v2) > 0.5 && Math.abs(v2) > 0.5) {\n        //user is probably trying to go to next or prev item\n        var s = this.items.indexOf(this._selectedItem());\n        if (v2 > 0) {\n          //prev\n          if (s > 0) {\n            this._scrollTo(this.items[s - 1], v2);\n          }\n          else {\n            if (this.opts.wrapItems) {\n              this._scrollTo(this.items[this.items.length - 1], v2);\n            }\n            else {\n              this._scrollTo(this.items[0]);\n            }\n          }\n        }\n        else {\n          //next\n          if (s < this.items.length - 1) {\n            this._scrollTo(this.items[s + 1], v2);\n          }\n          else {\n            if (this.opts.wrapItems) {\n              this._scrollTo(this.items[0], v2);\n            }\n            else {\n              this._scrollTo(this.items[this.items.length - 1]);\n            }\n          }\n        }\n      }\n      else {\n        if (this._selectedItem().currentPosition() > this.width / 2) {\n          this._scrollTo(this._selectedItem(), -this.opts.startingVelocity);\n        }\n        else {\n          this._scrollTo(this._selectedItem(), this.opts.startingVelocity);\n        }\n      }\n    }\n  }\n\n\n  /**\n   * Transforms the position of all carouselItems\n   * @param {Number} x The pixel value to transform\n   */\n  _transformItems(x) {\n    for (var i = 0; i < this.items.length; i++) {\n      this.items[i].addTransform(x);\n    }\n  }\n\n\n  /**\n   * Sets the transform position of all carouselItems\n   * @param {Number} x The pixel value to transform\n   */\n  _setTransformItems(x) {\n    for (var i = 0; i < this.items.length; i++) {\n      this.items[i].setTransform(x);\n    }\n  }\n\n\n  /**\n   * Adds transform to the container element, does checking for bounds conditions and\n   * wraps items if necessary and configured\n   * @param {Number} x The pixel value to transform\n   */\n  _addTransform(x) {\n    var a;\n    if ((this.opts.smoothScrollCenterItems || !this.opts.smoothScroll) && !this.opts.wrapItems && !this.opts.edgeScroll) {\n      var l = this.items.indexOf(this.selectedItem);\n      if (l === this.items.length - 1) {\n        this._leftbound(true);\n      }\n      else {\n        this._leftbound(false);\n      }\n      if (l === 0) {\n        this._rightbound(true);\n      }\n      else {\n        this._rightbound(false);\n      }\n    }\n    else {\n      this._leftbound(false);\n      this._rightbound(false);\n    }\n    if (this.transform.x + x < 0 && x < 0) {\n      if (this.opts.wrapItems) {\n        //wrap items until we have covered the visible area\n        while (this.transform.x + x < -(this.totalItemWidth - this.width) / 2 && (this.totalItemWidth < this.width ? this.transform.x + x < -this.totalItemWidth / 2 : true)) {\n          a = this.items.shift();\n          this.items.push(a);\n          a.addTransform(this.totalItemWidth);\n          this._transformItems(-a.width);\n          x += a.width;\n        }\n      }\n      else {\n        //there is a 1 pixel adjustment to account for some math rounding\n        if (this.opts.edgeScroll && x < 0 && this.transform.x + x - 1 <= -(this.totalItemWidth - this.width) / 2) {\n          this._leftbound(true);\n          return this._setTransform(-(this.totalItemWidth - this.width) / 2);\n        }\n        //progressively reduce scrolling when no more items to the right\n        if (x < 0 && (this.transform.x + x) < (-((this.totalItemWidth / 2) - (this.items[this.items.length - 1].width / 2)))) {\n          x = x * (((this.totalItemWidth / 2) + (this.items[this.items.length - 1].width / 2) + (this.transform.x + x)) / this.items[this.items.length - 1].width);\n          x = x > 0 ? 0 : x;\n        }\n      }\n      return this._setTransform(this.transform.x + x);\n    }\n    else {\n      if (this.transform.x + x > 0 && x > 0) {\n        if (this.opts.wrapItems) {\n          //wrap items until we have covered the visible area\n          while (this.transform.x + x > -(this.width - this.totalItemWidth) / 2 && (this.totalItemWidth < this.width ? this.transform.x + x > this.totalItemWidth / 2 : true)) {\n            a = this.items.pop();\n            this.items.unshift(a);\n            a.addTransform(-this.totalItemWidth);\n            this._transformItems(a.width);\n            x -= a.width;\n          }\n        }\n        else {\n          //there is a 1 pixel adjustment to account for some math rounding\n          if (this.opts.edgeScroll && x > 0 && this.transform.x + x + 1 >= (this.totalItemWidth - this.width) / 2) {\n            this._rightbound(true);\n            return this._setTransform((this.totalItemWidth - this.width) / 2);\n          }\n          //progressively reduce scrolling when no more items to the left\n          if (x > 0 && (this.transform.x + x) > ((this.totalItemWidth / 2) - (this.items[0].width / 2))) {\n            x = x * (((this.totalItemWidth / 2) + (this.items[0].width / 2) - (this.transform.x + x)) / this.items[0].width);\n            x = x < 0 ? 0 : x;\n          }\n        }\n      }\n      return this._setTransform(this.transform.x + x);\n    }\n  }\n\n\n  /**\n   * Sets the leftbound class\n   * @param {Boolean} b Set or unset the leftbound class\n   */\n  _leftbound(b) {\n    if (typeof b === 'undefined') {\n      this.leftbound = typeof this.leftbound === 'undefined' ? false : this.leftbound;\n      return this.leftbound;\n    }\n    else {\n      if (b) {\n        addClass(this.el, 'leftbound');\n      }\n      else {\n        removeClass(this.el, 'leftbound');\n      }\n      this.leftbound = b;\n      return this.leftbound;\n    }\n  }\n\n\n  /**\n   * Sets the rightbound class\n   * @param {Boolean} b Set or unset the rightbound class\n   */\n  _rightbound(b) {\n    if (typeof b === 'undefined') {\n      this.rightbound = typeof this.rightbound === 'undefined' ? false : this.rightbound;\n      return this.rightbound;\n    }\n    else {\n      if (b) {\n        addClass(this.el, 'rightbound');\n      }\n      else {\n        removeClass(this.el, 'rightbound');\n      }\n      this.rightbound = b;\n      return this.rightbound;\n    }\n  }\n\n\n  /**\n   * Updates the selected item, by seeing which item has its center closest\n   * to the center of the carousel\n   */\n  _updateSelected() {\n    var tar = this.width / 2;\n    var i = -1;\n    var a = 1;\n    var b = 0;\n    while (a > b) {\n      i++;\n      if (i > this.items.length - 2) {\n        break;\n      }\n      a = Math.abs(tar - this.items[i].currentPosition());\n      b = Math.abs(tar - this.items[i + 1].currentPosition());\n    }\n    return this._selectedItem(this.items[i]);\n  }\n\n\n  /**\n   * Stores the selected item for the carousel, and updates the previously\n   * selected item and newly selected item to have the correct states\n   * Conditionally sets the leftbound/rightbound states depending on configuration\n   * @param {Object} item Optional: the new item select, if omitted it will\n   * return the currently selected item.\n   */\n  _selectedItem(item) {\n    if (typeof item !== 'object') {\n      if (this.selectedItem) {\n        return this.selectedItem;\n      }\n      else {\n        return this._updateSelected();\n      }\n    }\n    else {\n      if (this.selectedItem) {\n        this.selectedItem.setSelected(false);\n      }\n      this.selectedItem = item;\n      if ((this.opts.smoothScrollCenterItems || !this.opts.smoothScroll) && !this.opts.wrapItems && !this.opts.edgeScroll) {\n        var l = this.items.indexOf(this.selectedItem);\n        if (l === this.items.length - 1) {\n          this._leftbound(true);\n        }\n        else {\n          this._leftbound(false);\n        }\n        if (l === 0) {\n          this._rightbound(true);\n        }\n        else {\n          this._rightbound(false);\n        }\n      }\n      this.selectedItem.setSelected(true);\n    }\n  }\n\n\n  /**\n   * Sets the transform for the carousel container\n   * @param {Number} x The pixel value to transform\n   */\n  _setTransform(x) {\n    x = x ? x : 0;\n    this.transform = {\n      'x': x\n    };\n    this.container.setAttribute('style', transform('translate3d', x + 'px, 0px, 0px'));\n    this._updateSelected();\n    return x;\n  }\n}\n\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nCarousel.prototype.defaults = {\n  el: null\n};\n\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\nCarousel.prototype._whitelistedParams = [];\n\nexport default Carousel;\n"]}