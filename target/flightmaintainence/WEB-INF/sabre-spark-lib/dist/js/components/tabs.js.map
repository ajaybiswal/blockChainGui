{"version":3,"sources":["js/dist/components/node_modules/browser-pack/_prelude.js","js/dist/components/js/dist/components/base.js","js/dist/components/js/dist/components/tabs.js","js/dist/components/js/dist/helpers/css/transform.js","js/dist/components/js/dist/helpers/dom/add-class.js","js/dist/components/js/dist/helpers/dom/breakpoint.js","js/dist/components/js/dist/helpers/dom/has-class.js","js/dist/components/js/dist/helpers/dom/remove-class.js","js/dist/components/js/dist/helpers/dom/toggle-class.js","js/dist/components/js/dist/helpers/traversal/get-children.js","js/dist/components/js/dist/helpers/traversal/get-index.js","js/dist/components/js/dist/helpers/traversal/get-parent.js","js/dist/components/js/dist/helpers/traversal/has-parent.js","js/dist/components/js/dist/helpers/traversal/matches.js","js/dist/components/js/dist/helpers/util/each.js","js/dist/components/js/dist/helpers/util/trim.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"tabs.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _each = require('../helpers/util/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /**\n                                                                                                                                                           * # Base Component\n                                                                                                                                                           * The base class for Spark JS components. This class should never be\n                                                                                                                                                           * instantiated directly.\n                                                                                                                                                           *\n                                                                                                                                                           * @param {Element} el\n                                                                                                                                                           * @param {Object} params\n                                                                                                                                                           *\n                                                                                                                                                           * @module components/base.js\n                                                                                                                                                           */\n\nvar noop = function noop() {};\n\nvar Base = function () {\n\n  /**\n   * Set parameters and cache elements.\n   */\n  function Base(el) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Base);\n\n    if (params.elRequired && !el) {\n      return;\n    }\n\n    this.setParams(this.defaults || {}, true);\n    this.setParams(params);\n    (this._cacheElements || noop).call(this, el, params);\n    (this._parseParams || noop).call(this);\n  }\n\n  /**\n   * Remove the component from the DOM and prepare for garbage collection by dereferencing values.\n   * @param {Boolean} leaveElement Leave the element intact.\n   */\n\n\n  Base.prototype.remove = function remove(leaveElement) {\n\n    if (this._removeEventListeners) {\n      this._removeEventListeners();\n    }\n\n    if (!leaveElement && this.el && this.el.parentNode) {\n      this.el.parentNode.removeChild(this.el);\n    }\n\n    this.unsetParams(this.defaults);\n\n    return this;\n  };\n\n  /**\n   * Update the component to use a new element or reparse from\n   * the existing element.\n   * @param {Element} el Optional\n   * @param {Object} params Optional\n   */\n\n\n  Base.prototype.update = function update(el) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\n    if (this._removeEventListeners) {\n      this._removeEventListeners();\n    }\n\n    (this._cacheElements || noop).call(this, el || this.el, params);\n    (this._parseParams || noop).call(this);\n\n    if (this._addEventListeners) {\n      this._addEventListeners();\n    }\n\n    return this;\n  };\n\n  /**\n   * Set a hash of parameters if they're whitelisted or we're told to force the set.\n   * This is used to set initial values as well as set passed parameters.\n   * @param {Object} params\n   * @param {Boolean} force Force setting even if the param is not whitelisted.\n   */\n\n\n  Base.prototype.setParams = function setParams(params, force) {\n    var _this = this;\n\n    (0, _each2.default)(params, function (k, v) {\n      if (_this._whitelistedParams.indexOf(k) !== -1 || force) {\n        _this[k] = v;\n      }\n    });\n\n    return this;\n  };\n\n  /**\n   * Unset all parameters.\n   * @param {Array|Object} keys\n   * @param {Object} scope The object to unset the params from. Defaults to `this`.\n   */\n\n\n  Base.prototype.unsetParams = function unsetParams(keys, scope) {\n\n    keys = keys instanceof Array ? keys : Object.keys(keys);\n    scope = scope || this;\n    (0, _each2.default)(keys, function (k) {\n      delete scope[k];\n    });\n\n    return this;\n  };\n\n  return Base;\n}();\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nBase.prototype._whitelistedParams = [];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nBase.prototype.defaults = {};\n\nexports.default = Base;\nmodule.exports = exports['default'];\n//# sourceMappingURL=base.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _transform = require('../helpers/css/transform');\n\nvar _transform2 = _interopRequireDefault(_transform);\n\nvar _toggleClass = require('../helpers/dom/toggle-class');\n\nvar _toggleClass2 = _interopRequireDefault(_toggleClass);\n\nvar _addClass = require('../helpers/dom/add-class');\n\nvar _addClass2 = _interopRequireDefault(_addClass);\n\nvar _removeClass = require('../helpers/dom/remove-class');\n\nvar _removeClass2 = _interopRequireDefault(_removeClass);\n\nvar _getParent = require('../helpers/traversal/get-parent');\n\nvar _getParent2 = _interopRequireDefault(_getParent);\n\nvar _getIndex = require('../helpers/traversal/get-index');\n\nvar _getIndex2 = _interopRequireDefault(_getIndex);\n\nvar _hasParent = require('../helpers/traversal/has-parent');\n\nvar _hasParent2 = _interopRequireDefault(_hasParent);\n\nvar _getChildren = require('../helpers/traversal/get-children');\n\nvar _getChildren2 = _interopRequireDefault(_getChildren);\n\nvar _breakpoint = require('../helpers/dom/breakpoint');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * # Tabs\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Tabbed navigation\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @example\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * new Tabs(el, {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *   // Optional. Alternate breakpoint values.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *   breakpoints: {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    xs: {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *      min: 0,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *      max: 639\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    }\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *    // ...\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  }\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * });\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @module components/tabs.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar Tabs = function (_BaseComponent) {\n  _inherits(Tabs, _BaseComponent);\n\n  /**\n   * Tabs constructor.\n   * @param {Element} el\n   * @param {Object} params\n   */\n  function Tabs(el) {\n    var _this;\n\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Tabs);\n\n    params.elRequired = true;\n\n    if (!(_this = _possibleConstructorReturn(this, _BaseComponent.call(this, el, params)), _this)) {\n      return _possibleConstructorReturn(_this);\n    }\n\n    _this._bindEventListenerCallbacks();\n    _this._addEventListeners();\n    _this._determineSize();\n    return _possibleConstructorReturn(_this);\n  }\n\n  /**\n   * Set the active item.\n   * @param {String|Number|Object} el\n   */\n\n\n  Tabs.prototype.setActive = function setActive(el) {\n\n    var panel;\n\n    // If we're passed a string instead of an element or number,\n    // get the panel with that id.\n    if (typeof el === 'string') {\n      panel = this._findPanelByName(el);\n\n      // If we've found a panel, find the corresponding tab.\n      if (panel) {\n        el = this._findTabByPanel(panel);\n      }\n    }\n\n    // If we're passed a number instead of an element,\n    // get that item from the tabEls NodeList\n    if (typeof el === 'number') {\n      el = this.tabEls.item(el);\n    }\n\n    // If we couldn't find the element or it's already active, stop.\n    if (!el || (typeof el === 'undefined' ? 'undefined' : _typeof(el)) !== 'object' || el === this.activeTabEl) {\n      return false;\n    }\n\n    // Remove the active class from the currently active tab\n    if (this.activeTabEl) {\n      (0, _toggleClass2.default)(this.activeTabEl, 'active', false);\n\n      // Remove the aria-selected attribute from the old tab\n      this.activeTabEl.querySelector('a').removeAttribute('aria-selected');\n      this.previousTabEl = this.activeTabEl;\n    }\n\n    // Add the active class and store.\n    (0, _toggleClass2.default)(el, 'active', true);\n\n    // Add the aria-selected attribute to the new tab\n    el.querySelector('a').setAttribute('aria-selected', 'true');\n    this.activeTabEl = el;\n\n    // Focus the tab on the left side if it's to the left of the frame.\n    if (-el.offsetLeft > this.x) {\n      this.focus(el, 'left');\n    }\n    // Focus the tab on the right side if it's to the right of the frame.\n    else if (el.offsetLeft + el.clientWidth > this.tabListScrollEl.clientWidth - this.x) {\n        this.focus(el, 'right');\n      }\n\n    // If we don't already have a panel, find the panel that corresponds to this tab.\n    if (!panel) {\n      panel = this._findPanelByTab(el);\n    }\n\n    // Set the new panel to be active.\n    (0, _toggleClass2.default)(panel, 'active', true);\n\n    // Set aria-hidden attribute to false for this panel\n    panel.setAttribute('aria-hidden', 'false');\n\n    // Remove the active class from the currently active panel.\n    if (this.activePanelEl) {\n      (0, _toggleClass2.default)(this.activePanelEl, 'active', false);\n\n      // Set aria-hidden attribute to true for this panel\n      this.activePanelEl.setAttribute('aria-hidden', 'true');\n    }\n\n    // Store the new active panel\n    this.activePanelEl = panel;\n\n    // Set the hash\n    if (this.useHash) {\n      window.location.hash = this.activePanelEl.getAttribute('id') || '';\n    }\n    var e = document.createEvent('Event');\n    e.initEvent('spark.visible-children', true, true);\n    this.activePanelEl.dispatchEvent(e);\n\n    return this;\n  };\n\n  /**\n   * Start the drag\n   * @param {Object} params\n   */\n\n\n  Tabs.prototype.start = function start(params) {\n\n    params = params || {};\n\n    // Start dragging\n    this.isDragging = true;\n\n    // Stash the element and its position\n    this.lastX = params.lastX;\n    this.lastY = params.lastY;\n\n    // Stash the min and max values\n    this._determineMinMax();\n\n    // Add listeners to the body so we can drag this thing anywhere and still get events\n    this._addMoveEventListeners(params.type || 'mouse');\n\n    return this;\n  };\n\n  /**\n   * Stop the drag\n   * @param {Object} params\n   */\n\n\n  Tabs.prototype.stop = function stop(params) {\n\n    params = params || {};\n\n    // Make sure we're in bounds\n    this._checkX();\n\n    // Stop dragging\n    this.isDragging = false;\n    this.scrollDistance = 0;\n\n    // Reset the scroll direction\n    this.scrollDirection = '';\n\n    // Unbind event listeners on the body\n    this._removeMoveEventListeners(params.type);\n\n    return this;\n  };\n\n  /**\n   * Move the drag point\n   * @param {Object} params\n   */\n\n\n  Tabs.prototype.move = function move(params) {\n\n    // Make sure we're currently dragging\n    if (!this.isDragging && !params.scroll && !params.force) {\n      return this;\n    }\n\n    // If we're beyond the bounds, add some resistance to the scroll.\n    if (!params.force && (this.x + params.x > this.maxX || this.x + params.x < this.minX)) {\n      this.x += params.x / 4;\n    } else {\n      this.x += params.x;\n    }\n\n    this.scrollDistance += Math.abs(params.x);\n\n    if (params.scroll) {\n      this._checkX();\n    }\n\n    this._updatePosition();\n\n    return this;\n  };\n\n  /**\n   * Focus on a specific element by bringing it to the middle of the scroller.\n   * @param {Element} el\n   * @param {String} align Which side to align with.\n   */\n\n\n  Tabs.prototype.focus = function focus(el, align) {\n\n    align = align || 'left';\n\n    this.x = align === 'left' ? -el.offsetLeft : -(el.offsetLeft - this.tabListScrollEl.clientWidth + el.offsetWidth);\n\n    this._checkX();\n    this._updatePosition();\n\n    return this;\n  };\n\n  /**\n   * Remove the element from the DOM and prepare for garbage collection by dereferencing values.\n   * @param {Boolean} leaveElement Leave the element intact.\n   */\n\n\n  Tabs.prototype.remove = function remove(leaveElement) {\n    this._removeMoveEventListeners('touch');\n    this._removeMoveEventListeners('mouse');\n    this._removeMoveEventListeners('keyboard');\n    return _BaseComponent.prototype.remove.call(this, leaveElement);\n  };\n\n  /**\n   * Update the elements used.\n   * @param {Element} el Optional\n   */\n\n\n  Tabs.prototype.update = function update(el) {\n\n    _BaseComponent.prototype.update.call(this, el);\n\n    // Run on the next frame so sizes have updated\n    setTimeout(function () {\n      this._determineSize();\n      this.focus(this.activeTabEl);\n    }.bind(this), 0);\n\n    return this;\n  };\n\n  /**\n   * Find a panel element by name.\n   * @param {String} name\n   * @return {Object|Null}\n   */\n\n\n  Tabs.prototype._findPanelByName = function _findPanelByName(name) {\n\n    name = name.replace('#', '');\n\n    var i = 0;\n    var len = this.panelEls.length;\n    var found = null;\n    var el;\n\n    for (; i < len && !found; i++) {\n      if (this.panelEls[i].getAttribute('id') === name) {\n        el = this.panelEls[i];\n        found = true;\n      }\n    }\n\n    return found && el;\n  };\n\n  /**\n   * Find a panel given its corresponding tab. Try to match based on the\n   * id attribute, but fall back to matching based on index.\n   * @param {Object} tab\n   * @return {Object|Null}\n   */\n\n\n  Tabs.prototype._findPanelByTab = function _findPanelByTab(tab) {\n\n    var anchorChild = tab.querySelector('a');\n    var id = anchorChild && anchorChild.getAttribute('href');\n    var index = (0, _getIndex2.default)(tab.parentNode.children, tab);\n    var i = 0;\n    var len = this.panelEls.length;\n    var foundById = null;\n    var idMatch = null;\n    var indexMatch = null;\n\n    id = id ? id.replace('#', '') : id;\n\n    for (; i < len && !foundById; i++) {\n      if (id && this.panelEls[i].getAttribute('id') === id) {\n        foundById = true;\n        idMatch = this.panelEls[i];\n      } else if (i === index) {\n        indexMatch = this.panelEls[i];\n      }\n    }\n\n    return foundById && idMatch || indexMatch;\n  };\n\n  /**\n   * Find a tab given its corresponding panel. Try to match based on the\n   * [href] attribute, but fall back to matching based on index.\n   * @param {Object} panel\n   * @return {Object|Null}\n   */\n\n\n  Tabs.prototype._findTabByPanel = function _findTabByPanel(panel) {\n\n    var id = panel.getAttribute('id');\n    var index = (0, _getIndex2.default)(panel.parentNode.children, panel);\n    var i = 0;\n    var len = this.tabEls.length;\n    var foundById = null;\n    var idMatch = null;\n    var indexMatch = null;\n\n    for (; i < len && !foundById; i++) {\n      if (id && (this.tabEls.item(i).querySelector('a').getAttribute('href') === '#' + id || this.tabEls.item(i).getAttribute('href') === '#' + id)) {\n        foundById = true;\n        idMatch = this.tabEls.item(i);\n      } else if (i === index) {\n        indexMatch = this.tabEls.item(i);\n      }\n    }\n\n    return foundById && idMatch || indexMatch;\n  };\n\n  /**\n   * Find the tab which an element lives inside.\n   * @param {Element} el\n   * @return {Object}\n   */\n\n\n  Tabs.prototype._findTabByChildElement = function _findTabByChildElement(el) {\n\n    var i = 0;\n    var len = this.tabEls.length;\n    var found;\n    var tab;\n\n    for (; i < len && !found; i++) {\n\n      // There is a chance that the element passed IS a tab. Or maybe a tab is its parent.\n      if (this.tabEls.item(i) === el || (0, _hasParent2.default)(el, this.tabEls.item(i))) {\n        found = true;\n        tab = this.tabEls.item(i);\n      }\n    }\n\n    return found && tab;\n  };\n\n  /**\n   * Store a reference to the tabs list, each tab and each panel.\n   * Set which tab is active, or use the first.\n   * @param {Element} el\n   */\n\n\n  Tabs.prototype._cacheElements = function _cacheElements(el) {\n\n    this.el = el;\n    this.tabListEl = this.el.querySelector('.spark-tabs__list');\n    this.tabListScrollEl = this.tabListEl.parentNode;\n    this.tabEls = this.tabListEl.querySelectorAll('.spark-tabs__tab');\n    this.panelEls = (0, _getChildren2.default)(this.el.querySelector('.spark-tabs__panels'), '[role=\"tabpanel\"]');\n    this.navEl = this.el.querySelector('.spark-tabs__nav');\n    this.leftEl = this.navEl.querySelector('.spark-tabs__btn--left');\n    this.rightEl = this.navEl.querySelector('.spark-tabs__btn--right');\n\n    // Make sure we have the elements we need\n    if (!this.tabListEl || !this.tabEls.length || !this.panelEls.length) {\n      throw new Error('Tab element missing either a .spark-tabs__list, or elements with .spark-tabs__tab and .spark-tabs__panel!', this.el);\n    }\n\n    // If there is a hash set, use that to try and set the active panel\n    var hashSet = window.location.hash && this.setActive(window.location.hash);\n\n    // If we weren't able to set with a hash, find the tab marked active or default to the first tab\n    if (!hashSet) {\n      this.setActive(this.tabListEl.querySelector('.spark-tabs__tab.active') || 0);\n    }\n  };\n\n  /**\n   * Create bound versions of event listener callbacks and store them.\n   * Otherwise we can't unbind from these events later because the\n   * function signatures won't match.\n   */\n\n\n  Tabs.prototype._bindEventListenerCallbacks = function _bindEventListenerCallbacks() {\n\n    this._onResizeBound = this._onResize.bind(this);\n\n    this._onTabListClickBound = this._onTabListClick.bind(this);\n\n    this._onRightClickBound = this._onRightClick.bind(this);\n    this._onLeftClickBound = this._onLeftClick.bind(this);\n\n    this._onTouchStartBound = this._onTouchStart.bind(this);\n    this._onTouchMoveBound = this._onTouchMove.bind(this);\n    this._onTouchEndBound = this._onTouchEnd.bind(this);\n\n    this._onMouseDownBound = this._onMouseDown.bind(this);\n    this._onMouseMoveBound = this._onMouseMove.bind(this);\n    this._onMouseUpBound = this._onMouseUp.bind(this);\n\n    this._onScrollBound = this._onScroll.bind(this);\n\n    this._onFocusBound = this._onFocus.bind(this);\n    this._onBlurBound = this._onBlur.bind(this);\n  };\n\n  /**\n   * Add event listeners for DOM events.\n   */\n\n\n  Tabs.prototype._addEventListeners = function _addEventListeners() {\n\n    window.addEventListener('resize', this._onResizeBound);\n    window.addEventListener('orientationchange', this._onResizeBound);\n\n    this.tabListEl.addEventListener('click', this._onTabListClickBound);\n\n    this.tabListEl.addEventListener('touchstart', this._onTouchStartBound);\n    this.tabListEl.addEventListener('mousedown', this._onMouseDownBound);\n    this.tabListEl.addEventListener('mousewheel', this._onScrollBound);\n    this.tabListEl.addEventListener('DOMMouseScroll', this._onScrollBound);\n\n    this.tabListEl.addEventListener('focus', this._onFocusBound, true);\n    this.tabListEl.addEventListener('blur', this._onBlurBound, true);\n\n    if (this.leftEl) {\n      this.leftEl.addEventListener('click', this._onLeftClickBound);\n    }\n\n    if (this.rightEl) {\n      this.rightEl.addEventListener('click', this._onRightClickBound);\n    }\n  };\n\n  /**\n   * Remove event listeners for DOM events..\n   */\n\n\n  Tabs.prototype._removeEventListeners = function _removeEventListeners() {\n\n    window.removeEventListener('resize', this._onResizeBound);\n    window.removeEventListener('orientationchange', this._onResizeBound);\n\n    this.tabListEl.removeEventListener('click', this._onTabListClickBound);\n\n    this.tabListEl.removeEventListener('touchstart', this._onTouchStartBound);\n    this.tabListEl.removeEventListener('mousedown', this._onMouseDownBound);\n    this.tabListEl.removeEventListener('mousewheel', this._onScrollBound);\n    this.tabListEl.removeEventListener('DOMMouseScroll', this._onScrollBound);\n\n    this.tabListEl.removeEventListener('focus', this._onFocusBound);\n    this.tabListEl.removeEventListener('blur', this._onBlurBound);\n\n    if (this.leftEl) {\n      this.leftEl.removeEventListener('click', this._onLeftClickBound);\n    }\n\n    if (this.rightEl) {\n      this.rightEl.removeEventListener('click', this._onRightClickBound);\n    }\n  };\n\n  /**\n   * Add event listeners for touchmove, touchend, mousemove and mouseup.\n   * We add these to the window so that the user can move off of the element\n   * but keep dragging the tabs.\n   * @param {String} type Which type of listeners to add\n   */\n\n\n  Tabs.prototype._addMoveEventListeners = function _addMoveEventListeners(type) {\n\n    // Only listen for events of the type we asked for.\n    switch (type) {\n      case 'mouse':\n        window.addEventListener('mousemove', this._onMouseMoveBound);\n        window.addEventListener('mouseup', this._onMouseUpBound);\n        break;\n      case 'touch':\n        window.addEventListener('touchmove', this._onTouchMoveBound);\n        window.addEventListener('touchend', this._onTouchEndBound);\n        break;\n    }\n  };\n\n  /**\n   * Remove event listeners for move events.\n   * @param {String} type Which type of listeners to remove\n   */\n\n\n  Tabs.prototype._removeMoveEventListeners = function _removeMoveEventListeners(type) {\n\n    // Only unbind events of the type we asked for.\n    switch (type) {\n      case 'mouse':\n        window.removeEventListener('mousemove', this._onMouseMoveBound);\n        window.removeEventListener('mouseup', this._onMouseUpBound);\n        break;\n      case 'touch':\n        window.removeEventListener('touchmove', this._onTouchMoveBound);\n        window.removeEventListener('touchend', this._onTouchEndBound);\n        break;\n    }\n  };\n\n  /**\n   * Determine which size class to set on the element. This is a way of using breakpoint-like\n   * logic for the tabs. We can't rely on real breakpoints because there is no guarantee that\n   * the tabs will be the width of the window.\n   * Also determine if we should be showing navigation arrows.\n   */\n\n\n  Tabs.prototype._determineSize = function _determineSize() {\n\n    var width = this.el.clientWidth;\n    var bp = (0, _breakpoint.get)(width, this.breakpoints);\n\n    // If the found breakpoint is different than the current breakpoint, set the proper state.\n    if (this.currentBreakpoint !== bp) {\n      (0, _toggleClass2.default)(this.el, this.currentBreakpoint, false);\n      this.currentBreakpoint = bp;\n      (0, _toggleClass2.default)(this.el, this.currentBreakpoint, true);\n    }\n\n    // If the tab list is wider than the scroll container, set the scrollable class.\n    this.isScrollable = this.tabListEl.clientWidth > this.tabListScrollEl.clientWidth;\n    (0, _toggleClass2.default)(this.navEl, 'scrollable', this.isScrollable);\n    this._determineMinMax();\n  };\n\n  /**\n   * Determine the min and max values for the slider.\n   */\n\n\n  Tabs.prototype._determineMinMax = function _determineMinMax() {\n\n    if (!this.tabListEl || !this.tabListScrollEl) {\n      return;\n    }\n\n    this.maxX = 0;\n    this.minX = this.tabListScrollEl.clientWidth - this.tabListEl.clientWidth - this.maxX;\n  };\n\n  /**\n   * Enable the animation state.\n   */\n\n\n  Tabs.prototype._enableAnimation = function _enableAnimation() {\n    this.isAnimatable = true;\n    (0, _toggleClass2.default)(this.navEl, 'no-animation', !this.isAnimatable);\n  };\n\n  /**\n   * Disable the animation state.\n   */\n\n\n  Tabs.prototype._disableAnimation = function _disableAnimation() {\n    this.isAnimatable = false;\n    (0, _toggleClass2.default)(this.navEl, 'no-animation', !this.isAnimatable);\n  };\n\n  /**\n   * Update the position of the tabs.\n   */\n\n\n  Tabs.prototype._updatePosition = function _updatePosition() {\n    this.tabListEl.setAttribute('style', (0, _transform2.default)('translate', this.x + 'px'));\n  };\n\n  /**\n   * Check the x position\n   */\n\n\n  Tabs.prototype._checkX = function _checkX() {\n\n    if (this.x < this.minX) {\n      this.x = this.minX;\n      this._updatePosition();\n    }\n\n    if (this.x > 0) {\n      this.x = 0;\n      this._updatePosition();\n    }\n  };\n\n  /**\n   * When the user clicks on a tab, make it active.\n   * @param {Object} e\n   */\n\n\n  Tabs.prototype._onTabListClick = function _onTabListClick(e) {\n\n    // Make sure we haven't scrolled.\n    if (this.scrollDistance > 5) {\n      e.preventDefault();\n      return;\n    }\n\n    var tab;\n\n    // Find if one of our tab elements is in the path\n    if (tab = this._findTabByChildElement(e.target)) {\n      e.preventDefault();\n      this.setActive(tab);\n    }\n  };\n\n  /**\n   * When the window resizes, determine the size we should be using for tabs.\n   * @param {Object} e\n   */\n\n\n  Tabs.prototype._onResize = function _onResize() {\n    this._determineSize();\n    this.focus(this.activeTabEl);\n  };\n\n  /**\n   * When the touchstart event fires, start the scrolling process\n   * @param {Object} e\n   */\n\n\n  Tabs.prototype._onTouchStart = function _onTouchStart(e) {\n\n    if (!this.isScrollable) {\n      return;\n    }\n\n    // Disable the animation class so we scroll smoothly\n    this._disableAnimation();\n\n    this.start({\n      lastX: e.touches[0].clientX,\n      lastY: e.touches[0].clientY,\n      type: 'touch'\n    });\n  };\n\n  /**\n   * As the user continues moving the touch, determine\n   * if we should move.\n   * @param {Object} e\n   */\n\n\n  Tabs.prototype._onTouchMove = function _onTouchMove(e) {\n\n    var xDistance = e.touches[0].clientX - this.lastX;\n    var yDistance = e.touches[0].clientY - this.lastY;\n\n    // If we haven't yet determined a scroll direction\n    if (!this.scrollDirection) {\n\n      // Moving up and down\n      if (Math.abs(yDistance) > Math.abs(xDistance)) {\n        this.scrollDirection = 'ns';\n      }\n      // Moving side to side\n      else {\n          this.scrollDirection = 'ew';\n        }\n    }\n\n    // If We're moving left to right, start the move.\n    if (this.scrollDirection === 'ew') {\n\n      e.preventDefault();\n\n      this.move({\n        x: xDistance\n      });\n    }\n\n    this.lastX = e.touches[0].clientX;\n    this.lastY = e.touches[0].clientY;\n  };\n\n  /**\n   * When the touch is over.\n   * @param {Object} e\n   */\n\n\n  Tabs.prototype._onTouchEnd = function _onTouchEnd() {\n\n    // Enable the animation class\n    this._enableAnimation();\n\n    // Stop after one frame so that animation is fully reenabled\n    window.setTimeout(function () {\n      this.stop({\n        type: 'touch'\n      });\n    }.bind(this), 1);\n  };\n\n  /**\n   * When the mousedown event fires, start the scrolling process\n   * @param {Object} e\n   */\n\n\n  Tabs.prototype._onMouseDown = function _onMouseDown(e) {\n\n    if (!this.isScrollable) {\n      return;\n    }\n\n    // Disable the animation class so we scroll smoothly\n    this._disableAnimation();\n\n    this.start({\n      lastX: e.clientX,\n      lastY: e.clientY,\n      type: 'mouse'\n    });\n  };\n\n  /**\n   * As the user continues moving the mouse, determine\n   * if we should move.\n   * @param {Object} e\n   */\n\n\n  Tabs.prototype._onMouseMove = function _onMouseMove(e) {\n\n    var xDistance = e.clientX - this.lastX;\n    var yDistance = e.clientY - this.lastY;\n\n    // If we haven't yet determined a scroll direction\n    if (!this.scrollDirection) {\n\n      // Moving up and down\n      if (Math.abs(yDistance) > Math.abs(xDistance)) {\n        this.scrollDirection = 'ns';\n      }\n      // Moving side to side\n      else {\n          this.scrollDirection = 'ew';\n        }\n    }\n\n    // If We're moving left to right, start the move.\n    if (this.scrollDirection === 'ew') {\n\n      e.preventDefault();\n\n      this.move({\n        x: xDistance\n      });\n    }\n\n    this.lastX = e.clientX;\n    this.lastY = e.clientY;\n  };\n\n  /**\n   * When the mouse move is complete.\n   * @param {Object} e\n   */\n\n\n  Tabs.prototype._onMouseUp = function _onMouseUp() {\n\n    // If we haven't been dragging, get outta here!\n    if (!this.isDragging) {\n      return;\n    }\n\n    // Enable the animation class\n    this._enableAnimation();\n\n    // Stop after one frame so that animation is fully reenabled\n    window.setTimeout(function () {\n      this.stop({\n        type: 'mouse'\n      });\n    }.bind(this), 1);\n  };\n\n  /**\n   * When the user scrolls horizontally on the tabs, slide.\n   * @param {Object} e\n   */\n\n\n  Tabs.prototype._onScroll = function _onScroll(e) {\n\n    // Don't bother if we aren't scrollable\n    if (!this.isScrollable) {\n      return;\n    }\n\n    // Disable the animation class so we scroll smoothly\n    this._disableAnimation();\n\n    // Allow for Firefox's wheel detail\n    var val = e.wheelDeltaX || -e.detail * 40;\n\n    // If the scroll has moved...\n    if (val) {\n\n      // Supress native\n      e.preventDefault();\n\n      // Move us to the new position\n      this.move({\n        x: val,\n        scroll: true\n      });\n    }\n\n    // Cancel an existing scroll timer\n    if (this.scrollTimer) {\n      window.clearTimeout(this.scrollTimer);\n      this.scrollTimer = null;\n    }\n\n    // The scroll is considered \"done\" after 100ms\n    this.scrollTimer = window.setTimeout(this._onScrollEnd.bind(this), 100);\n  };\n\n  /**\n   * When the scrolling ends, reset the scrollTop\n   */\n\n\n  Tabs.prototype._onScrollEnd = function _onScrollEnd() {\n\n    // Enable the animation class\n    this._enableAnimation();\n\n    // Stop after one frame so that animation is fully reenabled\n    window.setTimeout(function () {\n      this.stop({\n        type: 'scroll'\n      });\n    }.bind(this), 1);\n  };\n\n  /**\n   * When the left button is clicked, slide the tabs to the right.\n   */\n\n\n  Tabs.prototype._onLeftClick = function _onLeftClick() {\n    this.move({\n      x: this.tabListScrollEl.clientWidth,\n      force: true\n    });\n    this.stop({\n      type: 'force'\n    });\n  };\n\n  /**\n   * When the right button is clicked, slide the tabs to the left.\n   */\n\n\n  Tabs.prototype._onRightClick = function _onRightClick() {\n    this.move({\n      x: -this.tabListScrollEl.clientWidth,\n      force: true\n    });\n    this.stop({\n      type: 'force'\n    });\n  };\n\n  /**\n   * When focus is gained on a tab.\n   * @param {Object} e\n   */\n\n\n  Tabs.prototype._onFocus = function _onFocus(e) {\n    var target = e.target || e.srcElement;\n    var parent = (0, _getParent2.default)(target, '.spark-tabs__tab', this.tabListEl);\n    if (parent) (0, _addClass2.default)(parent, 'focus');\n  };\n\n  /**\n   * When focus is lost on a tab.\n   * @param {Object} e\n   */\n\n\n  Tabs.prototype._onBlur = function _onBlur(e) {\n    var target = e.target || e.srcElement;\n    var parent = (0, _getParent2.default)(target, '.spark-tabs__tab', this.tabListEl);\n    if (parent) (0, _removeClass2.default)(parent, 'focus');\n  };\n\n  return Tabs;\n}(_base2.default);\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nTabs.prototype._whitelistedParams = ['useHash', 'breakpoints'];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nTabs.prototype.defaults = {\n  el: null,\n  tabListEl: null,\n  tabListScrollEl: null,\n  tabEls: null,\n  panelEls: null,\n  activeTabEl: null,\n  activePanelEl: null,\n  navEl: null,\n  leftEl: null,\n  rightEl: null,\n  useHash: false,\n  isScrollable: false,\n  isDragging: false,\n  isAnimatable: false,\n  scrollDirection: '',\n  scrollDistance: 0,\n  lastX: 0,\n  lastY: 0,\n  minX: 0,\n  maxX: 0,\n  x: 0,\n  _onFocusBound: null,\n  _onBlurBound: null,\n  _onTabListClickBound: null,\n  _onLeftClickBound: null,\n  _onRightClickBound: null,\n  _onResizeBound: null,\n  _onTouchStartBound: null,\n  _onTouchMoveBound: null,\n  _onTouchEndBound: null,\n  _onMouseDownBound: null,\n  _onMouseMoveBound: null,\n  _onMouseUpBound: null,\n  _onScrollBound: null\n};\n\nexports.default = Tabs;\nmodule.exports = exports['default'];\n//# sourceMappingURL=tabs.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; /**\n                                                                                                                                                                                                                                                                               * # Transform\n                                                                                                                                                                                                                                                                               * Apply a cross-browser transform style.\n                                                                                                                                                                                                                                                                               *\n                                                                                                                                                                                                                                                                               * @example\n                                                                                                                                                                                                                                                                               * transform('translateX', '-100px');\n                                                                                                                                                                                                                                                                               *\n                                                                                                                                                                                                                                                                               * @param {String} type\n                                                                                                                                                                                                                                                                               * @param {String} val\n                                                                                                                                                                                                                                                                               *\n                                                                                                                                                                                                                                                                               * @module helpers/css/transform.js\n                                                                                                                                                                                                                                                                               */\n\nvar _each = require('../util/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar prefixes = ['-webkit-', '-moz-', '-o-', '-ms-', ''];\n\nfunction transform(type, val) {\n\n  var str = '';\n\n  (0, _each2.default)(prefixes, function (p) {\n\n    if ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) === 'object') {\n      str += p + 'transform: ';\n\n      for (var j in val) {\n        str += j + '(' + val[j] + '); ';\n      }\n    } else {\n      str += p + 'transform: ' + type + '(' + val + '); ';\n    }\n  });\n\n  return str;\n}\n\nexports.default = transform;\nmodule.exports = exports['default'];\n//# sourceMappingURL=transform.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _trim = require('../util/trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nvar _hasClass = require('./has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * # Add Class\n * Add a class on an element.\n *\n * @param {Element|Array} el An element or array of elements to update.\n * @param {String} name\n * @return {Element}\n *\n * @module helpers/dom/add-class.js\n */\n\nvar ws = /\\s+/;\nvar cleanup = /\\s{2,}/g;\n\nfunction addClass(el, name) {\n\n  if (arguments.length === 2 && typeof name === 'string') {\n    name = (0, _trim2.default)(name).split(ws);\n  } else {\n    name = name instanceof Array ? name : Array.prototype.slice.call(arguments, 1);\n  }\n\n  // optimize for best, most common case\n  if (name.length === 1 && el.classList) {\n    if (name[0]) {\n      el.classList.add(name[0]);\n    }\n    return el;\n  }\n\n  var toAdd = [];\n  var i = 0;\n  var l = name.length;\n  var item = void 0;\n  var clsName = typeof el.className === 'string' ? el.className : el.getAttribute ? el.getAttribute('class') : '';\n\n  // see if we have anything to add\n  for (; i < l; i++) {\n    item = name[i];\n    if (item && !(0, _hasClass2.default)(clsName, item)) {\n      toAdd.push(item);\n    }\n  }\n\n  if (toAdd.length) {\n    if (typeof el.className === 'string') {\n      el.className = (0, _trim2.default)((clsName + ' ' + toAdd.join(' ')).replace(cleanup, ' '));\n    } else if (el.setAttribute) {\n      el.setAttribute('class', (0, _trim2.default)((clsName + ' ' + toAdd.join(' ')).replace(cleanup, ' ')));\n    }\n  }\n\n  return el;\n}\n\nexports.default = addClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=add-class.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Breakpoint Helpers\n * Find the active breakpoint.\n *\n * @param {Number} width\n *\n * @module helpers/dom/breakpoint.js\n */\n\n/**\n * Breakpoints being used in the CSS.\n * @type {Object}\n */\nvar defaultBreakpoints = {\n  xs: {\n    min: 0,\n    max: 543\n  },\n  sm: {\n    min: 544,\n    max: 795\n  },\n  md: {\n    min: 796,\n    max: 1047\n  },\n  lg: {\n    min: 1048,\n    max: 1799\n  },\n  xl: {\n    min: 1800,\n    max: Infinity\n  }\n};\n\nfunction get(width, breakpoints) {\n\n  breakpoints = breakpoints || defaultBreakpoints;\n\n  var i = void 0;\n\n  for (i in breakpoints) {\n    if (width >= breakpoints[i].min && width <= breakpoints[i].max) {\n      return i;\n    }\n  }\n}\n\nexports.get = get;\n//# sourceMappingURL=breakpoint.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/**\n * # Has Class\n * See if an element has a class.\n *\n * @param {Element|String} el\n * @param {String} name\n * @return {Boolean}\n *\n * @module helpers/dom/has-class.js\n */\nfunction hasClass(el, name) {\n  var cName = ((typeof el === 'undefined' ? 'undefined' : _typeof(el)) === 'object' ? el.className || el.getAttribute && el.getAttribute('class') || '' : el || '').replace(/[\\t\\r\\n\\f]/g, ' ');\n  return (' ' + cName + ' ').indexOf(' ' + name + ' ') !== -1;\n}\n\nexports.default = hasClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=has-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _trim = require('../util/trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ws = /\\s+/; /**\n                 * # Remove Class\n                 * Remove a class on an element.\n                 *\n                 * @param {Element|Array} el An element or array of elements to update.\n                 * @param {String} name\n                 * @return {Element}\n                 *\n                 * @module helpers/dom/remove-class.js\n                 */\n\nvar cleanup = /\\s{2,}/g;\n\nfunction removeClass(el, name) {\n\n  if (arguments.length === 2 && typeof name === 'string') {\n    name = (0, _trim2.default)(name).split(ws);\n  } else {\n    name = name instanceof Array ? name : Array.prototype.slice.call(arguments, 1);\n  }\n\n  // optimize for best, most common case\n  if (name.length === 1 && el.classList) {\n    if (name[0]) el.classList.remove(name[0]);\n    return el;\n  }\n\n  // store two copies\n  var clsName = ' ' + (typeof el.className === 'string' ? el.className : el.getAttribute ? el.getAttribute('class') : '') + ' ';\n  var result = clsName;\n  var current = void 0;\n  var start = void 0;\n  for (var i = 0, l = name.length; i < l; i++) {\n    current = name[i];\n    start = current ? result.indexOf(' ' + current + ' ') : -1;\n    if (start !== -1) {\n      start += 1;\n      result = result.slice(0, start) + result.slice(start + current.length);\n    }\n  }\n\n  // only write if modified\n  if (clsName !== result) {\n    if (typeof el.className === 'string') {\n      el.className = (0, _trim2.default)(result.replace(cleanup, ' '));\n    } else if (el.setAttribute) {\n      el.setAttribute('class', (0, _trim2.default)(result.replace(cleanup, ' ')));\n    }\n  }\n\n  return el;\n}\n\nexports.default = removeClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=remove-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _hasClass = require('./has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nvar _addClass = require('./add-class');\n\nvar _addClass2 = _interopRequireDefault(_addClass);\n\nvar _removeClass = require('./remove-class');\n\nvar _removeClass2 = _interopRequireDefault(_removeClass);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction toggleClass(el, name, enable) {\n\n  if (!el) {\n    return;\n  }\n\n  // If we're passed an array, toggle the class on each.\n  if (el instanceof NodeList || el instanceof Array) {\n\n    for (var i = 0, len = el.length; i < len; i++) {\n      toggleClass(el[i], name, enable);\n    }\n\n    return;\n  }\n\n  var action = void 0;\n  if (enable !== undefined) {\n    enable = typeof enable === 'function' ? enable.call(null, el) : enable;\n    action = enable ? 'add' : 'remove';\n  } else {\n    action = (0, _hasClass2.default)(el, name) ? 'remove' : 'add';\n  }\n\n  return (action === 'add' ? _addClass2.default : _removeClass2.default)(el, name);\n} /**\n   * # Toggle Class\n   * Toggle a class on an element given a condition.\n   *\n   * @param {Element|Array} el An element or array of elements to update.\n   * @param {String} name\n   * @param {Boolean} enable\n   * @return {Element}\n   *\n   * @module  helpers/dom/toggle-class.js\n   */\n\nexports.default = toggleClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=toggle-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _matches = require('./matches');\n\nvar _matches2 = _interopRequireDefault(_matches);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getChildren(el, query) {\n\n  var list = [];\n  var i = 0;\n  var len = el.children.length;\n\n  for (; i < len; i++) {\n    if ((0, _matches2.default)(el.children[i], query)) {\n      list.push(el.children[i]);\n    }\n  }\n\n  return list;\n} /**\n   * # Get Children\n   * See if an element has children which match a query.\n   *\n   * @param {Element} el\n   * @param {String} query\n   * @return {List}\n   *\n   * @module helpers/traversal/get-children.js\n   */\n\nexports.default = getChildren;\nmodule.exports = exports['default'];\n//# sourceMappingURL=get-children.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Get Index\n * Get the index of an element in a nodelist.\n *\n * @param {NodeList} els\n * @param {Node} el\n * @return {Number}\n *\n * @module helpers/traversal/get-index.js\n */\nfunction getIndex(els, el) {\n  return Array.prototype.indexOf.call(els, el);\n}\n\nexports.default = getIndex;\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=get-index.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _matches = require('./matches');\n\nvar _matches2 = _interopRequireDefault(_matches);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getParent(parent, query, limitEl) {\n\n  limitEl = limitEl instanceof Array ? limitEl : [limitEl || document.body];\n\n  while (parent) {\n\n    if ((0, _matches2.default)(parent, query)) {\n      return parent;\n    }\n\n    if (limitEl.indexOf(parent) !== -1) {\n      return false;\n    }\n\n    parent = parent.parentNode;\n  }\n\n  return false;\n} /**\n   * # Get Parent\n   * See if an element has another element for a parent.\n   *\n   * @param {Element} parent\n   * @param {String} query\n   * @param {Array|Element} limitEl The last element we should check.\n   * @return {Boolean|Element}\n   *\n   * @module helpers/traversal/get-parent.js\n   */\n\nexports.default = getParent;\nmodule.exports = exports['default'];\n//# sourceMappingURL=get-parent.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Has Parent\n * See if an element has another element for a parent.\n *\n * @param {Element} child\n * @param {Element} possibleParent\n * @return {Boolean}\n *\n * @module helpers/traversal/has-parent.js\n */\nfunction hasParent(child, possibleParent) {\n\n  var parent = child.parentNode;\n\n  while (parent) {\n\n    if (parent === possibleParent) {\n      return true;\n    }\n\n    parent = parent.parentNode;\n  }\n\n  return false;\n}\n\nexports.default = hasParent;\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=has-parent.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Matches\n * See if an element matches a query selector.\n *\n * @param {Element} el\n * @param {String} query\n * @return {Boolean}\n *\n * @module helpers/traversal/matches.js\n */\nvar vendorMatch = typeof Element !== 'undefined' && (Element.prototype.matches || Element.prototype.matchesSelector || Element.prototype.webkitMatchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector);\n\nfunction matches(el, query) {\n\n  if (vendorMatch) return vendorMatch.call(el, query);\n\n  var nodes = el.parentNode ? el.parentNode.querySelectorAll(query) : [];\n\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i] === el) return true;\n  }\n\n  return false;\n}\n\nexports.default = matches;\nmodule.exports = exports['default'];\n//# sourceMappingURL=matches.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Each\n * Apply a callback function to a list of any kind: Array, NodeList, HTMLCollection or Object.\n *\n * @param {Array|NodeList|HTMLCollection|Object} list\n * @param {Function} cb\n *\n * @example\n * each([], callback);\n * each(el.children, callback);\n * each(el.childNodes, callback);\n * each({}, callback);\n *\n * @module helpers/util/each.js\n */\nfunction each(list, cb) {\n\n  if (!list) {\n    return;\n  }\n\n  if (typeof cb !== 'function') {\n    throw new Error('Cannot invoke `each` without a callback!');\n  }\n\n  var i = 0;\n  var len = list.length;\n\n  // Object\n  if (len === undefined) {\n    for (i in list) {\n      if (i !== 'prototype' && list.hasOwnProperty(i)) {\n        cb(i, list[i]);\n      }\n    }\n  }\n  // Array-like\n  else {\n      for (; i < len; i++) {\n        cb(list[i]);\n      }\n    }\n}\n\nexports.default = each;\nmodule.exports = exports['default'];\n//# sourceMappingURL=each.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Trim\n * Trim whitespace on a string.\n *\n * @param {String} str\n *\n * @module helpers/util/trim.js\n */\n\nvar trimRE = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\n\nfunction trim(str) {\n  return str.replace(trimRE, '');\n}\n\nexports.default = trim;\nmodule.exports = exports['default'];\n//# sourceMappingURL=trim.js.map\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9kaXN0L2NvbXBvbmVudHMvYmFzZS5qcyIsImpzL2Rpc3QvY29tcG9uZW50cy90YWJzLmpzIiwianMvZGlzdC9oZWxwZXJzL2Nzcy90cmFuc2Zvcm0uanMiLCJqcy9kaXN0L2hlbHBlcnMvZG9tL2FkZC1jbGFzcy5qcyIsImpzL2Rpc3QvaGVscGVycy9kb20vYnJlYWtwb2ludC5qcyIsImpzL2Rpc3QvaGVscGVycy9kb20vaGFzLWNsYXNzLmpzIiwianMvZGlzdC9oZWxwZXJzL2RvbS9yZW1vdmUtY2xhc3MuanMiLCJqcy9kaXN0L2hlbHBlcnMvZG9tL3RvZ2dsZS1jbGFzcy5qcyIsImpzL2Rpc3QvaGVscGVycy90cmF2ZXJzYWwvZ2V0LWNoaWxkcmVuLmpzIiwianMvZGlzdC9oZWxwZXJzL3RyYXZlcnNhbC9nZXQtaW5kZXguanMiLCJqcy9kaXN0L2hlbHBlcnMvdHJhdmVyc2FsL2dldC1wYXJlbnQuanMiLCJqcy9kaXN0L2hlbHBlcnMvdHJhdmVyc2FsL2hhcy1wYXJlbnQuanMiLCJqcy9kaXN0L2hlbHBlcnMvdHJhdmVyc2FsL21hdGNoZXMuanMiLCJqcy9kaXN0L2hlbHBlcnMvdXRpbC9lYWNoLmpzIiwianMvZGlzdC9oZWxwZXJzL3V0aWwvdHJpbS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwaUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc31yZXR1cm4gZX0pKCkiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZWFjaCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvdXRpbC9lYWNoJyk7XG5cbnZhciBfZWFjaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lYWNoKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH0gLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogIyBCYXNlIENvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFRoZSBiYXNlIGNsYXNzIGZvciBTcGFyayBKUyBjb21wb25lbnRzLiBUaGlzIGNsYXNzIHNob3VsZCBuZXZlciBiZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGluc3RhbnRpYXRlZCBkaXJlY3RseS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAbW9kdWxlIGNvbXBvbmVudHMvYmFzZS5qc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG52YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTtcblxudmFyIEJhc2UgPSBmdW5jdGlvbiAoKSB7XG5cbiAgLyoqXG4gICAqIFNldCBwYXJhbWV0ZXJzIGFuZCBjYWNoZSBlbGVtZW50cy5cbiAgICovXG4gIGZ1bmN0aW9uIEJhc2UoZWwpIHtcbiAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCYXNlKTtcblxuICAgIGlmIChwYXJhbXMuZWxSZXF1aXJlZCAmJiAhZWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnNldFBhcmFtcyh0aGlzLmRlZmF1bHRzIHx8IHt9LCB0cnVlKTtcbiAgICB0aGlzLnNldFBhcmFtcyhwYXJhbXMpO1xuICAgICh0aGlzLl9jYWNoZUVsZW1lbnRzIHx8IG5vb3ApLmNhbGwodGhpcywgZWwsIHBhcmFtcyk7XG4gICAgKHRoaXMuX3BhcnNlUGFyYW1zIHx8IG5vb3ApLmNhbGwodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBjb21wb25lbnQgZnJvbSB0aGUgRE9NIGFuZCBwcmVwYXJlIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24gYnkgZGVyZWZlcmVuY2luZyB2YWx1ZXMuXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gbGVhdmVFbGVtZW50IExlYXZlIHRoZSBlbGVtZW50IGludGFjdC5cbiAgICovXG5cblxuICBCYXNlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUobGVhdmVFbGVtZW50KSB7XG5cbiAgICBpZiAodGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgaWYgKCFsZWF2ZUVsZW1lbnQgJiYgdGhpcy5lbCAmJiB0aGlzLmVsLnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMuZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsKTtcbiAgICB9XG5cbiAgICB0aGlzLnVuc2V0UGFyYW1zKHRoaXMuZGVmYXVsdHMpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgY29tcG9uZW50IHRvIHVzZSBhIG5ldyBlbGVtZW50IG9yIHJlcGFyc2UgZnJvbVxuICAgKiB0aGUgZXhpc3RpbmcgZWxlbWVudC5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbCBPcHRpb25hbFxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIE9wdGlvbmFsXG4gICAqL1xuXG5cbiAgQmFzZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGVsKSB7XG4gICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cblxuICAgIGlmICh0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycykge1xuICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICAodGhpcy5fY2FjaGVFbGVtZW50cyB8fCBub29wKS5jYWxsKHRoaXMsIGVsIHx8IHRoaXMuZWwsIHBhcmFtcyk7XG4gICAgKHRoaXMuX3BhcnNlUGFyYW1zIHx8IG5vb3ApLmNhbGwodGhpcyk7XG5cbiAgICBpZiAodGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCBhIGhhc2ggb2YgcGFyYW1ldGVycyBpZiB0aGV5J3JlIHdoaXRlbGlzdGVkIG9yIHdlJ3JlIHRvbGQgdG8gZm9yY2UgdGhlIHNldC5cbiAgICogVGhpcyBpcyB1c2VkIHRvIHNldCBpbml0aWFsIHZhbHVlcyBhcyB3ZWxsIGFzIHNldCBwYXNzZWQgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZvcmNlIEZvcmNlIHNldHRpbmcgZXZlbiBpZiB0aGUgcGFyYW0gaXMgbm90IHdoaXRlbGlzdGVkLlxuICAgKi9cblxuXG4gIEJhc2UucHJvdG90eXBlLnNldFBhcmFtcyA9IGZ1bmN0aW9uIHNldFBhcmFtcyhwYXJhbXMsIGZvcmNlKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICgwLCBfZWFjaDIuZGVmYXVsdCkocGFyYW1zLCBmdW5jdGlvbiAoaywgdikge1xuICAgICAgaWYgKF90aGlzLl93aGl0ZWxpc3RlZFBhcmFtcy5pbmRleE9mKGspICE9PSAtMSB8fCBmb3JjZSkge1xuICAgICAgICBfdGhpc1trXSA9IHY7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogVW5zZXQgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBrZXlzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZSBUaGUgb2JqZWN0IHRvIHVuc2V0IHRoZSBwYXJhbXMgZnJvbS4gRGVmYXVsdHMgdG8gYHRoaXNgLlxuICAgKi9cblxuXG4gIEJhc2UucHJvdG90eXBlLnVuc2V0UGFyYW1zID0gZnVuY3Rpb24gdW5zZXRQYXJhbXMoa2V5cywgc2NvcGUpIHtcblxuICAgIGtleXMgPSBrZXlzIGluc3RhbmNlb2YgQXJyYXkgPyBrZXlzIDogT2JqZWN0LmtleXMoa2V5cyk7XG4gICAgc2NvcGUgPSBzY29wZSB8fCB0aGlzO1xuICAgICgwLCBfZWFjaDIuZGVmYXVsdCkoa2V5cywgZnVuY3Rpb24gKGspIHtcbiAgICAgIGRlbGV0ZSBzY29wZVtrXTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHJldHVybiBCYXNlO1xufSgpO1xuXG4vKipcbiAqIFdoaXRlbGlzdGVkIHBhcmFtZXRlcnMgd2hpY2ggY2FuIGJlIHNldCBvbiBjb25zdHJ1Y3Rpb24uXG4gKiBAdHlwZSB7QXJyYXl9XG4gKi9cblxuXG5CYXNlLnByb3RvdHlwZS5fd2hpdGVsaXN0ZWRQYXJhbXMgPSBbXTtcblxuLyoqXG4gKiBEZWZhdWx0IHZhbHVlcyBmb3IgaW50ZXJuYWwgcHJvcGVydGllcyB3ZSB3aWxsIGJlIHNldHRpbmcuXG4gKiBUaGVzZSBhcmUgc2V0IG9uIGVhY2ggY29uc3RydWN0aW9uIHNvIHdlIGRvbid0IGxlYWsgcHJvcGVydGllc1xuICogaW50byB0aGUgcHJvdG90eXBlIGNoYWluLlxuICogQHR5cGUge09iamVjdH1cbiAqL1xuQmFzZS5wcm90b3R5cGUuZGVmYXVsdHMgPSB7fTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQmFzZTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFzZS5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX2Jhc2UgPSByZXF1aXJlKCcuL2Jhc2UnKTtcblxudmFyIF9iYXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Jhc2UpO1xuXG52YXIgX3RyYW5zZm9ybSA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvY3NzL3RyYW5zZm9ybScpO1xuXG52YXIgX3RyYW5zZm9ybTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmFuc2Zvcm0pO1xuXG52YXIgX3RvZ2dsZUNsYXNzID0gcmVxdWlyZSgnLi4vaGVscGVycy9kb20vdG9nZ2xlLWNsYXNzJyk7XG5cbnZhciBfdG9nZ2xlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdG9nZ2xlQ2xhc3MpO1xuXG52YXIgX2FkZENsYXNzID0gcmVxdWlyZSgnLi4vaGVscGVycy9kb20vYWRkLWNsYXNzJyk7XG5cbnZhciBfYWRkQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYWRkQ2xhc3MpO1xuXG52YXIgX3JlbW92ZUNsYXNzID0gcmVxdWlyZSgnLi4vaGVscGVycy9kb20vcmVtb3ZlLWNsYXNzJyk7XG5cbnZhciBfcmVtb3ZlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVtb3ZlQ2xhc3MpO1xuXG52YXIgX2dldFBhcmVudCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvdHJhdmVyc2FsL2dldC1wYXJlbnQnKTtcblxudmFyIF9nZXRQYXJlbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UGFyZW50KTtcblxudmFyIF9nZXRJbmRleCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvdHJhdmVyc2FsL2dldC1pbmRleCcpO1xuXG52YXIgX2dldEluZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldEluZGV4KTtcblxudmFyIF9oYXNQYXJlbnQgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3RyYXZlcnNhbC9oYXMtcGFyZW50Jyk7XG5cbnZhciBfaGFzUGFyZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhc1BhcmVudCk7XG5cbnZhciBfZ2V0Q2hpbGRyZW4gPSByZXF1aXJlKCcuLi9oZWxwZXJzL3RyYXZlcnNhbC9nZXQtY2hpbGRyZW4nKTtcblxudmFyIF9nZXRDaGlsZHJlbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRDaGlsZHJlbik7XG5cbnZhciBfYnJlYWtwb2ludCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL2JyZWFrcG9pbnQnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfSAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICMgVGFic1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVGFiYmVkIG5hdmlnYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogbmV3IFRhYnMoZWwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgLy8gT3B0aW9uYWwuIEFsdGVybmF0ZSBicmVha3BvaW50IHZhbHVlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgYnJlYWtwb2ludHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgIHhzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgIG1pbjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgICAgbWF4OiA2MzlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgIC8vIC4uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBtb2R1bGUgY29tcG9uZW50cy90YWJzLmpzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cblxuXG52YXIgVGFicyA9IGZ1bmN0aW9uIChfQmFzZUNvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoVGFicywgX0Jhc2VDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBUYWJzIGNvbnN0cnVjdG9yLlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcbiAgICovXG4gIGZ1bmN0aW9uIFRhYnMoZWwpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUYWJzKTtcblxuICAgIHBhcmFtcy5lbFJlcXVpcmVkID0gdHJ1ZTtcblxuICAgIGlmICghKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0Jhc2VDb21wb25lbnQuY2FsbCh0aGlzLCBlbCwgcGFyYW1zKSksIF90aGlzKSkge1xuICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzKTtcbiAgICB9XG5cbiAgICBfdGhpcy5fYmluZEV2ZW50TGlzdGVuZXJDYWxsYmFja3MoKTtcbiAgICBfdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBfdGhpcy5fZGV0ZXJtaW5lU2l6ZSgpO1xuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBhY3RpdmUgaXRlbS5cbiAgICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfE9iamVjdH0gZWxcbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5zZXRBY3RpdmUgPSBmdW5jdGlvbiBzZXRBY3RpdmUoZWwpIHtcblxuICAgIHZhciBwYW5lbDtcblxuICAgIC8vIElmIHdlJ3JlIHBhc3NlZCBhIHN0cmluZyBpbnN0ZWFkIG9mIGFuIGVsZW1lbnQgb3IgbnVtYmVyLFxuICAgIC8vIGdldCB0aGUgcGFuZWwgd2l0aCB0aGF0IGlkLlxuICAgIGlmICh0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICBwYW5lbCA9IHRoaXMuX2ZpbmRQYW5lbEJ5TmFtZShlbCk7XG5cbiAgICAgIC8vIElmIHdlJ3ZlIGZvdW5kIGEgcGFuZWwsIGZpbmQgdGhlIGNvcnJlc3BvbmRpbmcgdGFiLlxuICAgICAgaWYgKHBhbmVsKSB7XG4gICAgICAgIGVsID0gdGhpcy5fZmluZFRhYkJ5UGFuZWwocGFuZWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHdlJ3JlIHBhc3NlZCBhIG51bWJlciBpbnN0ZWFkIG9mIGFuIGVsZW1lbnQsXG4gICAgLy8gZ2V0IHRoYXQgaXRlbSBmcm9tIHRoZSB0YWJFbHMgTm9kZUxpc3RcbiAgICBpZiAodHlwZW9mIGVsID09PSAnbnVtYmVyJykge1xuICAgICAgZWwgPSB0aGlzLnRhYkVscy5pdGVtKGVsKTtcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSBjb3VsZG4ndCBmaW5kIHRoZSBlbGVtZW50IG9yIGl0J3MgYWxyZWFkeSBhY3RpdmUsIHN0b3AuXG4gICAgaWYgKCFlbCB8fCAodHlwZW9mIGVsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihlbCkpICE9PSAnb2JqZWN0JyB8fCBlbCA9PT0gdGhpcy5hY3RpdmVUYWJFbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSB0aGUgYWN0aXZlIGNsYXNzIGZyb20gdGhlIGN1cnJlbnRseSBhY3RpdmUgdGFiXG4gICAgaWYgKHRoaXMuYWN0aXZlVGFiRWwpIHtcbiAgICAgICgwLCBfdG9nZ2xlQ2xhc3MyLmRlZmF1bHQpKHRoaXMuYWN0aXZlVGFiRWwsICdhY3RpdmUnLCBmYWxzZSk7XG5cbiAgICAgIC8vIFJlbW92ZSB0aGUgYXJpYS1zZWxlY3RlZCBhdHRyaWJ1dGUgZnJvbSB0aGUgb2xkIHRhYlxuICAgICAgdGhpcy5hY3RpdmVUYWJFbC5xdWVyeVNlbGVjdG9yKCdhJykucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG4gICAgICB0aGlzLnByZXZpb3VzVGFiRWwgPSB0aGlzLmFjdGl2ZVRhYkVsO1xuICAgIH1cblxuICAgIC8vIEFkZCB0aGUgYWN0aXZlIGNsYXNzIGFuZCBzdG9yZS5cbiAgICAoMCwgX3RvZ2dsZUNsYXNzMi5kZWZhdWx0KShlbCwgJ2FjdGl2ZScsIHRydWUpO1xuXG4gICAgLy8gQWRkIHRoZSBhcmlhLXNlbGVjdGVkIGF0dHJpYnV0ZSB0byB0aGUgbmV3IHRhYlxuICAgIGVsLnF1ZXJ5U2VsZWN0b3IoJ2EnKS5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuICAgIHRoaXMuYWN0aXZlVGFiRWwgPSBlbDtcblxuICAgIC8vIEZvY3VzIHRoZSB0YWIgb24gdGhlIGxlZnQgc2lkZSBpZiBpdCdzIHRvIHRoZSBsZWZ0IG9mIHRoZSBmcmFtZS5cbiAgICBpZiAoLWVsLm9mZnNldExlZnQgPiB0aGlzLngpIHtcbiAgICAgIHRoaXMuZm9jdXMoZWwsICdsZWZ0Jyk7XG4gICAgfVxuICAgIC8vIEZvY3VzIHRoZSB0YWIgb24gdGhlIHJpZ2h0IHNpZGUgaWYgaXQncyB0byB0aGUgcmlnaHQgb2YgdGhlIGZyYW1lLlxuICAgIGVsc2UgaWYgKGVsLm9mZnNldExlZnQgKyBlbC5jbGllbnRXaWR0aCA+IHRoaXMudGFiTGlzdFNjcm9sbEVsLmNsaWVudFdpZHRoIC0gdGhpcy54KSB7XG4gICAgICAgIHRoaXMuZm9jdXMoZWwsICdyaWdodCcpO1xuICAgICAgfVxuXG4gICAgLy8gSWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIGEgcGFuZWwsIGZpbmQgdGhlIHBhbmVsIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhpcyB0YWIuXG4gICAgaWYgKCFwYW5lbCkge1xuICAgICAgcGFuZWwgPSB0aGlzLl9maW5kUGFuZWxCeVRhYihlbCk7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBuZXcgcGFuZWwgdG8gYmUgYWN0aXZlLlxuICAgICgwLCBfdG9nZ2xlQ2xhc3MyLmRlZmF1bHQpKHBhbmVsLCAnYWN0aXZlJywgdHJ1ZSk7XG5cbiAgICAvLyBTZXQgYXJpYS1oaWRkZW4gYXR0cmlidXRlIHRvIGZhbHNlIGZvciB0aGlzIHBhbmVsXG4gICAgcGFuZWwuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xuXG4gICAgLy8gUmVtb3ZlIHRoZSBhY3RpdmUgY2xhc3MgZnJvbSB0aGUgY3VycmVudGx5IGFjdGl2ZSBwYW5lbC5cbiAgICBpZiAodGhpcy5hY3RpdmVQYW5lbEVsKSB7XG4gICAgICAoMCwgX3RvZ2dsZUNsYXNzMi5kZWZhdWx0KSh0aGlzLmFjdGl2ZVBhbmVsRWwsICdhY3RpdmUnLCBmYWxzZSk7XG5cbiAgICAgIC8vIFNldCBhcmlhLWhpZGRlbiBhdHRyaWJ1dGUgdG8gdHJ1ZSBmb3IgdGhpcyBwYW5lbFxuICAgICAgdGhpcy5hY3RpdmVQYW5lbEVsLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIH1cblxuICAgIC8vIFN0b3JlIHRoZSBuZXcgYWN0aXZlIHBhbmVsXG4gICAgdGhpcy5hY3RpdmVQYW5lbEVsID0gcGFuZWw7XG5cbiAgICAvLyBTZXQgdGhlIGhhc2hcbiAgICBpZiAodGhpcy51c2VIYXNoKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHRoaXMuYWN0aXZlUGFuZWxFbC5nZXRBdHRyaWJ1dGUoJ2lkJykgfHwgJyc7XG4gICAgfVxuICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgZS5pbml0RXZlbnQoJ3NwYXJrLnZpc2libGUtY2hpbGRyZW4nLCB0cnVlLCB0cnVlKTtcbiAgICB0aGlzLmFjdGl2ZVBhbmVsRWwuZGlzcGF0Y2hFdmVudChlKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdGFydCB0aGUgZHJhZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG4gICAqL1xuXG5cbiAgVGFicy5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydChwYXJhbXMpIHtcblxuICAgIHBhcmFtcyA9IHBhcmFtcyB8fCB7fTtcblxuICAgIC8vIFN0YXJ0IGRyYWdnaW5nXG4gICAgdGhpcy5pc0RyYWdnaW5nID0gdHJ1ZTtcblxuICAgIC8vIFN0YXNoIHRoZSBlbGVtZW50IGFuZCBpdHMgcG9zaXRpb25cbiAgICB0aGlzLmxhc3RYID0gcGFyYW1zLmxhc3RYO1xuICAgIHRoaXMubGFzdFkgPSBwYXJhbXMubGFzdFk7XG5cbiAgICAvLyBTdGFzaCB0aGUgbWluIGFuZCBtYXggdmFsdWVzXG4gICAgdGhpcy5fZGV0ZXJtaW5lTWluTWF4KCk7XG5cbiAgICAvLyBBZGQgbGlzdGVuZXJzIHRvIHRoZSBib2R5IHNvIHdlIGNhbiBkcmFnIHRoaXMgdGhpbmcgYW55d2hlcmUgYW5kIHN0aWxsIGdldCBldmVudHNcbiAgICB0aGlzLl9hZGRNb3ZlRXZlbnRMaXN0ZW5lcnMocGFyYW1zLnR5cGUgfHwgJ21vdXNlJyk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU3RvcCB0aGUgZHJhZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG4gICAqL1xuXG5cbiAgVGFicy5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AocGFyYW1zKSB7XG5cbiAgICBwYXJhbXMgPSBwYXJhbXMgfHwge307XG5cbiAgICAvLyBNYWtlIHN1cmUgd2UncmUgaW4gYm91bmRzXG4gICAgdGhpcy5fY2hlY2tYKCk7XG5cbiAgICAvLyBTdG9wIGRyYWdnaW5nXG4gICAgdGhpcy5pc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgdGhpcy5zY3JvbGxEaXN0YW5jZSA9IDA7XG5cbiAgICAvLyBSZXNldCB0aGUgc2Nyb2xsIGRpcmVjdGlvblxuICAgIHRoaXMuc2Nyb2xsRGlyZWN0aW9uID0gJyc7XG5cbiAgICAvLyBVbmJpbmQgZXZlbnQgbGlzdGVuZXJzIG9uIHRoZSBib2R5XG4gICAgdGhpcy5fcmVtb3ZlTW92ZUV2ZW50TGlzdGVuZXJzKHBhcmFtcy50eXBlKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNb3ZlIHRoZSBkcmFnIHBvaW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5tb3ZlID0gZnVuY3Rpb24gbW92ZShwYXJhbXMpIHtcblxuICAgIC8vIE1ha2Ugc3VyZSB3ZSdyZSBjdXJyZW50bHkgZHJhZ2dpbmdcbiAgICBpZiAoIXRoaXMuaXNEcmFnZ2luZyAmJiAhcGFyYW1zLnNjcm9sbCAmJiAhcGFyYW1zLmZvcmNlKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSdyZSBiZXlvbmQgdGhlIGJvdW5kcywgYWRkIHNvbWUgcmVzaXN0YW5jZSB0byB0aGUgc2Nyb2xsLlxuICAgIGlmICghcGFyYW1zLmZvcmNlICYmICh0aGlzLnggKyBwYXJhbXMueCA+IHRoaXMubWF4WCB8fCB0aGlzLnggKyBwYXJhbXMueCA8IHRoaXMubWluWCkpIHtcbiAgICAgIHRoaXMueCArPSBwYXJhbXMueCAvIDQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMueCArPSBwYXJhbXMueDtcbiAgICB9XG5cbiAgICB0aGlzLnNjcm9sbERpc3RhbmNlICs9IE1hdGguYWJzKHBhcmFtcy54KTtcblxuICAgIGlmIChwYXJhbXMuc2Nyb2xsKSB7XG4gICAgICB0aGlzLl9jaGVja1goKTtcbiAgICB9XG5cbiAgICB0aGlzLl91cGRhdGVQb3NpdGlvbigpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEZvY3VzIG9uIGEgc3BlY2lmaWMgZWxlbWVudCBieSBicmluZ2luZyBpdCB0byB0aGUgbWlkZGxlIG9mIHRoZSBzY3JvbGxlci5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpZ24gV2hpY2ggc2lkZSB0byBhbGlnbiB3aXRoLlxuICAgKi9cblxuXG4gIFRhYnMucHJvdG90eXBlLmZvY3VzID0gZnVuY3Rpb24gZm9jdXMoZWwsIGFsaWduKSB7XG5cbiAgICBhbGlnbiA9IGFsaWduIHx8ICdsZWZ0JztcblxuICAgIHRoaXMueCA9IGFsaWduID09PSAnbGVmdCcgPyAtZWwub2Zmc2V0TGVmdCA6IC0oZWwub2Zmc2V0TGVmdCAtIHRoaXMudGFiTGlzdFNjcm9sbEVsLmNsaWVudFdpZHRoICsgZWwub2Zmc2V0V2lkdGgpO1xuXG4gICAgdGhpcy5fY2hlY2tYKCk7XG4gICAgdGhpcy5fdXBkYXRlUG9zaXRpb24oKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGVsZW1lbnQgZnJvbSB0aGUgRE9NIGFuZCBwcmVwYXJlIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24gYnkgZGVyZWZlcmVuY2luZyB2YWx1ZXMuXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gbGVhdmVFbGVtZW50IExlYXZlIHRoZSBlbGVtZW50IGludGFjdC5cbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUobGVhdmVFbGVtZW50KSB7XG4gICAgdGhpcy5fcmVtb3ZlTW92ZUV2ZW50TGlzdGVuZXJzKCd0b3VjaCcpO1xuICAgIHRoaXMuX3JlbW92ZU1vdmVFdmVudExpc3RlbmVycygnbW91c2UnKTtcbiAgICB0aGlzLl9yZW1vdmVNb3ZlRXZlbnRMaXN0ZW5lcnMoJ2tleWJvYXJkJyk7XG4gICAgcmV0dXJuIF9CYXNlQ29tcG9uZW50LnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzLCBsZWF2ZUVsZW1lbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGVsZW1lbnRzIHVzZWQuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWwgT3B0aW9uYWxcbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZWwpIHtcblxuICAgIF9CYXNlQ29tcG9uZW50LnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzLCBlbCk7XG5cbiAgICAvLyBSdW4gb24gdGhlIG5leHQgZnJhbWUgc28gc2l6ZXMgaGF2ZSB1cGRhdGVkXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9kZXRlcm1pbmVTaXplKCk7XG4gICAgICB0aGlzLmZvY3VzKHRoaXMuYWN0aXZlVGFiRWwpO1xuICAgIH0uYmluZCh0aGlzKSwgMCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogRmluZCBhIHBhbmVsIGVsZW1lbnQgYnkgbmFtZS5cbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7T2JqZWN0fE51bGx9XG4gICAqL1xuXG5cbiAgVGFicy5wcm90b3R5cGUuX2ZpbmRQYW5lbEJ5TmFtZSA9IGZ1bmN0aW9uIF9maW5kUGFuZWxCeU5hbWUobmFtZSkge1xuXG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgnIycsICcnKTtcblxuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuID0gdGhpcy5wYW5lbEVscy5sZW5ndGg7XG4gICAgdmFyIGZvdW5kID0gbnVsbDtcbiAgICB2YXIgZWw7XG5cbiAgICBmb3IgKDsgaSA8IGxlbiAmJiAhZm91bmQ7IGkrKykge1xuICAgICAgaWYgKHRoaXMucGFuZWxFbHNbaV0uZ2V0QXR0cmlidXRlKCdpZCcpID09PSBuYW1lKSB7XG4gICAgICAgIGVsID0gdGhpcy5wYW5lbEVsc1tpXTtcbiAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmb3VuZCAmJiBlbDtcbiAgfTtcblxuICAvKipcbiAgICogRmluZCBhIHBhbmVsIGdpdmVuIGl0cyBjb3JyZXNwb25kaW5nIHRhYi4gVHJ5IHRvIG1hdGNoIGJhc2VkIG9uIHRoZVxuICAgKiBpZCBhdHRyaWJ1dGUsIGJ1dCBmYWxsIGJhY2sgdG8gbWF0Y2hpbmcgYmFzZWQgb24gaW5kZXguXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0YWJcbiAgICogQHJldHVybiB7T2JqZWN0fE51bGx9XG4gICAqL1xuXG5cbiAgVGFicy5wcm90b3R5cGUuX2ZpbmRQYW5lbEJ5VGFiID0gZnVuY3Rpb24gX2ZpbmRQYW5lbEJ5VGFiKHRhYikge1xuXG4gICAgdmFyIGFuY2hvckNoaWxkID0gdGFiLnF1ZXJ5U2VsZWN0b3IoJ2EnKTtcbiAgICB2YXIgaWQgPSBhbmNob3JDaGlsZCAmJiBhbmNob3JDaGlsZC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICB2YXIgaW5kZXggPSAoMCwgX2dldEluZGV4Mi5kZWZhdWx0KSh0YWIucGFyZW50Tm9kZS5jaGlsZHJlbiwgdGFiKTtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGxlbiA9IHRoaXMucGFuZWxFbHMubGVuZ3RoO1xuICAgIHZhciBmb3VuZEJ5SWQgPSBudWxsO1xuICAgIHZhciBpZE1hdGNoID0gbnVsbDtcbiAgICB2YXIgaW5kZXhNYXRjaCA9IG51bGw7XG5cbiAgICBpZCA9IGlkID8gaWQucmVwbGFjZSgnIycsICcnKSA6IGlkO1xuXG4gICAgZm9yICg7IGkgPCBsZW4gJiYgIWZvdW5kQnlJZDsgaSsrKSB7XG4gICAgICBpZiAoaWQgJiYgdGhpcy5wYW5lbEVsc1tpXS5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09IGlkKSB7XG4gICAgICAgIGZvdW5kQnlJZCA9IHRydWU7XG4gICAgICAgIGlkTWF0Y2ggPSB0aGlzLnBhbmVsRWxzW2ldO1xuICAgICAgfSBlbHNlIGlmIChpID09PSBpbmRleCkge1xuICAgICAgICBpbmRleE1hdGNoID0gdGhpcy5wYW5lbEVsc1tpXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZm91bmRCeUlkICYmIGlkTWF0Y2ggfHwgaW5kZXhNYXRjaDtcbiAgfTtcblxuICAvKipcbiAgICogRmluZCBhIHRhYiBnaXZlbiBpdHMgY29ycmVzcG9uZGluZyBwYW5lbC4gVHJ5IHRvIG1hdGNoIGJhc2VkIG9uIHRoZVxuICAgKiBbaHJlZl0gYXR0cmlidXRlLCBidXQgZmFsbCBiYWNrIHRvIG1hdGNoaW5nIGJhc2VkIG9uIGluZGV4LlxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFuZWxcbiAgICogQHJldHVybiB7T2JqZWN0fE51bGx9XG4gICAqL1xuXG5cbiAgVGFicy5wcm90b3R5cGUuX2ZpbmRUYWJCeVBhbmVsID0gZnVuY3Rpb24gX2ZpbmRUYWJCeVBhbmVsKHBhbmVsKSB7XG5cbiAgICB2YXIgaWQgPSBwYW5lbC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgdmFyIGluZGV4ID0gKDAsIF9nZXRJbmRleDIuZGVmYXVsdCkocGFuZWwucGFyZW50Tm9kZS5jaGlsZHJlbiwgcGFuZWwpO1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuID0gdGhpcy50YWJFbHMubGVuZ3RoO1xuICAgIHZhciBmb3VuZEJ5SWQgPSBudWxsO1xuICAgIHZhciBpZE1hdGNoID0gbnVsbDtcbiAgICB2YXIgaW5kZXhNYXRjaCA9IG51bGw7XG5cbiAgICBmb3IgKDsgaSA8IGxlbiAmJiAhZm91bmRCeUlkOyBpKyspIHtcbiAgICAgIGlmIChpZCAmJiAodGhpcy50YWJFbHMuaXRlbShpKS5xdWVyeVNlbGVjdG9yKCdhJykuZ2V0QXR0cmlidXRlKCdocmVmJykgPT09ICcjJyArIGlkIHx8IHRoaXMudGFiRWxzLml0ZW0oaSkuZ2V0QXR0cmlidXRlKCdocmVmJykgPT09ICcjJyArIGlkKSkge1xuICAgICAgICBmb3VuZEJ5SWQgPSB0cnVlO1xuICAgICAgICBpZE1hdGNoID0gdGhpcy50YWJFbHMuaXRlbShpKTtcbiAgICAgIH0gZWxzZSBpZiAoaSA9PT0gaW5kZXgpIHtcbiAgICAgICAgaW5kZXhNYXRjaCA9IHRoaXMudGFiRWxzLml0ZW0oaSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvdW5kQnlJZCAmJiBpZE1hdGNoIHx8IGluZGV4TWF0Y2g7XG4gIH07XG5cbiAgLyoqXG4gICAqIEZpbmQgdGhlIHRhYiB3aGljaCBhbiBlbGVtZW50IGxpdmVzIGluc2lkZS5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuXG5cbiAgVGFicy5wcm90b3R5cGUuX2ZpbmRUYWJCeUNoaWxkRWxlbWVudCA9IGZ1bmN0aW9uIF9maW5kVGFiQnlDaGlsZEVsZW1lbnQoZWwpIHtcblxuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuID0gdGhpcy50YWJFbHMubGVuZ3RoO1xuICAgIHZhciBmb3VuZDtcbiAgICB2YXIgdGFiO1xuXG4gICAgZm9yICg7IGkgPCBsZW4gJiYgIWZvdW5kOyBpKyspIHtcblxuICAgICAgLy8gVGhlcmUgaXMgYSBjaGFuY2UgdGhhdCB0aGUgZWxlbWVudCBwYXNzZWQgSVMgYSB0YWIuIE9yIG1heWJlIGEgdGFiIGlzIGl0cyBwYXJlbnQuXG4gICAgICBpZiAodGhpcy50YWJFbHMuaXRlbShpKSA9PT0gZWwgfHwgKDAsIF9oYXNQYXJlbnQyLmRlZmF1bHQpKGVsLCB0aGlzLnRhYkVscy5pdGVtKGkpKSkge1xuICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgIHRhYiA9IHRoaXMudGFiRWxzLml0ZW0oaSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvdW5kICYmIHRhYjtcbiAgfTtcblxuICAvKipcbiAgICogU3RvcmUgYSByZWZlcmVuY2UgdG8gdGhlIHRhYnMgbGlzdCwgZWFjaCB0YWIgYW5kIGVhY2ggcGFuZWwuXG4gICAqIFNldCB3aGljaCB0YWIgaXMgYWN0aXZlLCBvciB1c2UgdGhlIGZpcnN0LlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG5cbiAgVGFicy5wcm90b3R5cGUuX2NhY2hlRWxlbWVudHMgPSBmdW5jdGlvbiBfY2FjaGVFbGVtZW50cyhlbCkge1xuXG4gICAgdGhpcy5lbCA9IGVsO1xuICAgIHRoaXMudGFiTGlzdEVsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuc3BhcmstdGFic19fbGlzdCcpO1xuICAgIHRoaXMudGFiTGlzdFNjcm9sbEVsID0gdGhpcy50YWJMaXN0RWwucGFyZW50Tm9kZTtcbiAgICB0aGlzLnRhYkVscyA9IHRoaXMudGFiTGlzdEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zcGFyay10YWJzX190YWInKTtcbiAgICB0aGlzLnBhbmVsRWxzID0gKDAsIF9nZXRDaGlsZHJlbjIuZGVmYXVsdCkodGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuc3BhcmstdGFic19fcGFuZWxzJyksICdbcm9sZT1cInRhYnBhbmVsXCJdJyk7XG4gICAgdGhpcy5uYXZFbCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLnNwYXJrLXRhYnNfX25hdicpO1xuICAgIHRoaXMubGVmdEVsID0gdGhpcy5uYXZFbC5xdWVyeVNlbGVjdG9yKCcuc3BhcmstdGFic19fYnRuLS1sZWZ0Jyk7XG4gICAgdGhpcy5yaWdodEVsID0gdGhpcy5uYXZFbC5xdWVyeVNlbGVjdG9yKCcuc3BhcmstdGFic19fYnRuLS1yaWdodCcpO1xuXG4gICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgdGhlIGVsZW1lbnRzIHdlIG5lZWRcbiAgICBpZiAoIXRoaXMudGFiTGlzdEVsIHx8ICF0aGlzLnRhYkVscy5sZW5ndGggfHwgIXRoaXMucGFuZWxFbHMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RhYiBlbGVtZW50IG1pc3NpbmcgZWl0aGVyIGEgLnNwYXJrLXRhYnNfX2xpc3QsIG9yIGVsZW1lbnRzIHdpdGggLnNwYXJrLXRhYnNfX3RhYiBhbmQgLnNwYXJrLXRhYnNfX3BhbmVsIScsIHRoaXMuZWwpO1xuICAgIH1cblxuICAgIC8vIElmIHRoZXJlIGlzIGEgaGFzaCBzZXQsIHVzZSB0aGF0IHRvIHRyeSBhbmQgc2V0IHRoZSBhY3RpdmUgcGFuZWxcbiAgICB2YXIgaGFzaFNldCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoICYmIHRoaXMuc2V0QWN0aXZlKHdpbmRvdy5sb2NhdGlvbi5oYXNoKTtcblxuICAgIC8vIElmIHdlIHdlcmVuJ3QgYWJsZSB0byBzZXQgd2l0aCBhIGhhc2gsIGZpbmQgdGhlIHRhYiBtYXJrZWQgYWN0aXZlIG9yIGRlZmF1bHQgdG8gdGhlIGZpcnN0IHRhYlxuICAgIGlmICghaGFzaFNldCkge1xuICAgICAgdGhpcy5zZXRBY3RpdmUodGhpcy50YWJMaXN0RWwucXVlcnlTZWxlY3RvcignLnNwYXJrLXRhYnNfX3RhYi5hY3RpdmUnKSB8fCAwKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBib3VuZCB2ZXJzaW9ucyBvZiBldmVudCBsaXN0ZW5lciBjYWxsYmFja3MgYW5kIHN0b3JlIHRoZW0uXG4gICAqIE90aGVyd2lzZSB3ZSBjYW4ndCB1bmJpbmQgZnJvbSB0aGVzZSBldmVudHMgbGF0ZXIgYmVjYXVzZSB0aGVcbiAgICogZnVuY3Rpb24gc2lnbmF0dXJlcyB3b24ndCBtYXRjaC5cbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5fYmluZEV2ZW50TGlzdGVuZXJDYWxsYmFja3MgPSBmdW5jdGlvbiBfYmluZEV2ZW50TGlzdGVuZXJDYWxsYmFja3MoKSB7XG5cbiAgICB0aGlzLl9vblJlc2l6ZUJvdW5kID0gdGhpcy5fb25SZXNpemUuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuX29uVGFiTGlzdENsaWNrQm91bmQgPSB0aGlzLl9vblRhYkxpc3RDbGljay5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5fb25SaWdodENsaWNrQm91bmQgPSB0aGlzLl9vblJpZ2h0Q2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbkxlZnRDbGlja0JvdW5kID0gdGhpcy5fb25MZWZ0Q2xpY2suYmluZCh0aGlzKTtcblxuICAgIHRoaXMuX29uVG91Y2hTdGFydEJvdW5kID0gdGhpcy5fb25Ub3VjaFN0YXJ0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Ub3VjaE1vdmVCb3VuZCA9IHRoaXMuX29uVG91Y2hNb3ZlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Ub3VjaEVuZEJvdW5kID0gdGhpcy5fb25Ub3VjaEVuZC5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5fb25Nb3VzZURvd25Cb3VuZCA9IHRoaXMuX29uTW91c2VEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Nb3VzZU1vdmVCb3VuZCA9IHRoaXMuX29uTW91c2VNb3ZlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Nb3VzZVVwQm91bmQgPSB0aGlzLl9vbk1vdXNlVXAuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuX29uU2Nyb2xsQm91bmQgPSB0aGlzLl9vblNjcm9sbC5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5fb25Gb2N1c0JvdW5kID0gdGhpcy5fb25Gb2N1cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uQmx1ckJvdW5kID0gdGhpcy5fb25CbHVyLmJpbmQodGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBldmVudCBsaXN0ZW5lcnMgZm9yIERPTSBldmVudHMuXG4gICAqL1xuXG5cbiAgVGFicy5wcm90b3R5cGUuX2FkZEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX2FkZEV2ZW50TGlzdGVuZXJzKCkge1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX29uUmVzaXplQm91bmQpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIHRoaXMuX29uUmVzaXplQm91bmQpO1xuXG4gICAgdGhpcy50YWJMaXN0RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9vblRhYkxpc3RDbGlja0JvdW5kKTtcblxuICAgIHRoaXMudGFiTGlzdEVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLl9vblRvdWNoU3RhcnRCb3VuZCk7XG4gICAgdGhpcy50YWJMaXN0RWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5fb25Nb3VzZURvd25Cb3VuZCk7XG4gICAgdGhpcy50YWJMaXN0RWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V3aGVlbCcsIHRoaXMuX29uU2Nyb2xsQm91bmQpO1xuICAgIHRoaXMudGFiTGlzdEVsLmFkZEV2ZW50TGlzdGVuZXIoJ0RPTU1vdXNlU2Nyb2xsJywgdGhpcy5fb25TY3JvbGxCb3VuZCk7XG5cbiAgICB0aGlzLnRhYkxpc3RFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX29uRm9jdXNCb3VuZCwgdHJ1ZSk7XG4gICAgdGhpcy50YWJMaXN0RWwuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX29uQmx1ckJvdW5kLCB0cnVlKTtcblxuICAgIGlmICh0aGlzLmxlZnRFbCkge1xuICAgICAgdGhpcy5sZWZ0RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9vbkxlZnRDbGlja0JvdW5kKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yaWdodEVsKSB7XG4gICAgICB0aGlzLnJpZ2h0RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9vblJpZ2h0Q2xpY2tCb3VuZCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzIGZvciBET00gZXZlbnRzLi5cbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG5cbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5fb25SZXNpemVCb3VuZCk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgdGhpcy5fb25SZXNpemVCb3VuZCk7XG5cbiAgICB0aGlzLnRhYkxpc3RFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX29uVGFiTGlzdENsaWNrQm91bmQpO1xuXG4gICAgdGhpcy50YWJMaXN0RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX29uVG91Y2hTdGFydEJvdW5kKTtcbiAgICB0aGlzLnRhYkxpc3RFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9vbk1vdXNlRG93bkJvdW5kKTtcbiAgICB0aGlzLnRhYkxpc3RFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXdoZWVsJywgdGhpcy5fb25TY3JvbGxCb3VuZCk7XG4gICAgdGhpcy50YWJMaXN0RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NTW91c2VTY3JvbGwnLCB0aGlzLl9vblNjcm9sbEJvdW5kKTtcblxuICAgIHRoaXMudGFiTGlzdEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fb25Gb2N1c0JvdW5kKTtcbiAgICB0aGlzLnRhYkxpc3RFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5fb25CbHVyQm91bmQpO1xuXG4gICAgaWYgKHRoaXMubGVmdEVsKSB7XG4gICAgICB0aGlzLmxlZnRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX29uTGVmdENsaWNrQm91bmQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJpZ2h0RWwpIHtcbiAgICAgIHRoaXMucmlnaHRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX29uUmlnaHRDbGlja0JvdW5kKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBldmVudCBsaXN0ZW5lcnMgZm9yIHRvdWNobW92ZSwgdG91Y2hlbmQsIG1vdXNlbW92ZSBhbmQgbW91c2V1cC5cbiAgICogV2UgYWRkIHRoZXNlIHRvIHRoZSB3aW5kb3cgc28gdGhhdCB0aGUgdXNlciBjYW4gbW92ZSBvZmYgb2YgdGhlIGVsZW1lbnRcbiAgICogYnV0IGtlZXAgZHJhZ2dpbmcgdGhlIHRhYnMuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFdoaWNoIHR5cGUgb2YgbGlzdGVuZXJzIHRvIGFkZFxuICAgKi9cblxuXG4gIFRhYnMucHJvdG90eXBlLl9hZGRNb3ZlRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfYWRkTW92ZUV2ZW50TGlzdGVuZXJzKHR5cGUpIHtcblxuICAgIC8vIE9ubHkgbGlzdGVuIGZvciBldmVudHMgb2YgdGhlIHR5cGUgd2UgYXNrZWQgZm9yLlxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnbW91c2UnOlxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fb25Nb3VzZU1vdmVCb3VuZCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fb25Nb3VzZVVwQm91bmQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RvdWNoJzpcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX29uVG91Y2hNb3ZlQm91bmQpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9vblRvdWNoRW5kQm91bmQpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBldmVudCBsaXN0ZW5lcnMgZm9yIG1vdmUgZXZlbnRzLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBXaGljaCB0eXBlIG9mIGxpc3RlbmVycyB0byByZW1vdmVcbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5fcmVtb3ZlTW92ZUV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX3JlbW92ZU1vdmVFdmVudExpc3RlbmVycyh0eXBlKSB7XG5cbiAgICAvLyBPbmx5IHVuYmluZCBldmVudHMgb2YgdGhlIHR5cGUgd2UgYXNrZWQgZm9yLlxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnbW91c2UnOlxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fb25Nb3VzZU1vdmVCb3VuZCk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fb25Nb3VzZVVwQm91bmQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RvdWNoJzpcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX29uVG91Y2hNb3ZlQm91bmQpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9vblRvdWNoRW5kQm91bmQpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERldGVybWluZSB3aGljaCBzaXplIGNsYXNzIHRvIHNldCBvbiB0aGUgZWxlbWVudC4gVGhpcyBpcyBhIHdheSBvZiB1c2luZyBicmVha3BvaW50LWxpa2VcbiAgICogbG9naWMgZm9yIHRoZSB0YWJzLiBXZSBjYW4ndCByZWx5IG9uIHJlYWwgYnJlYWtwb2ludHMgYmVjYXVzZSB0aGVyZSBpcyBubyBndWFyYW50ZWUgdGhhdFxuICAgKiB0aGUgdGFicyB3aWxsIGJlIHRoZSB3aWR0aCBvZiB0aGUgd2luZG93LlxuICAgKiBBbHNvIGRldGVybWluZSBpZiB3ZSBzaG91bGQgYmUgc2hvd2luZyBuYXZpZ2F0aW9uIGFycm93cy5cbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5fZGV0ZXJtaW5lU2l6ZSA9IGZ1bmN0aW9uIF9kZXRlcm1pbmVTaXplKCkge1xuXG4gICAgdmFyIHdpZHRoID0gdGhpcy5lbC5jbGllbnRXaWR0aDtcbiAgICB2YXIgYnAgPSAoMCwgX2JyZWFrcG9pbnQuZ2V0KSh3aWR0aCwgdGhpcy5icmVha3BvaW50cyk7XG5cbiAgICAvLyBJZiB0aGUgZm91bmQgYnJlYWtwb2ludCBpcyBkaWZmZXJlbnQgdGhhbiB0aGUgY3VycmVudCBicmVha3BvaW50LCBzZXQgdGhlIHByb3BlciBzdGF0ZS5cbiAgICBpZiAodGhpcy5jdXJyZW50QnJlYWtwb2ludCAhPT0gYnApIHtcbiAgICAgICgwLCBfdG9nZ2xlQ2xhc3MyLmRlZmF1bHQpKHRoaXMuZWwsIHRoaXMuY3VycmVudEJyZWFrcG9pbnQsIGZhbHNlKTtcbiAgICAgIHRoaXMuY3VycmVudEJyZWFrcG9pbnQgPSBicDtcbiAgICAgICgwLCBfdG9nZ2xlQ2xhc3MyLmRlZmF1bHQpKHRoaXMuZWwsIHRoaXMuY3VycmVudEJyZWFrcG9pbnQsIHRydWUpO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSB0YWIgbGlzdCBpcyB3aWRlciB0aGFuIHRoZSBzY3JvbGwgY29udGFpbmVyLCBzZXQgdGhlIHNjcm9sbGFibGUgY2xhc3MuXG4gICAgdGhpcy5pc1Njcm9sbGFibGUgPSB0aGlzLnRhYkxpc3RFbC5jbGllbnRXaWR0aCA+IHRoaXMudGFiTGlzdFNjcm9sbEVsLmNsaWVudFdpZHRoO1xuICAgICgwLCBfdG9nZ2xlQ2xhc3MyLmRlZmF1bHQpKHRoaXMubmF2RWwsICdzY3JvbGxhYmxlJywgdGhpcy5pc1Njcm9sbGFibGUpO1xuICAgIHRoaXMuX2RldGVybWluZU1pbk1heCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgdGhlIG1pbiBhbmQgbWF4IHZhbHVlcyBmb3IgdGhlIHNsaWRlci5cbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5fZGV0ZXJtaW5lTWluTWF4ID0gZnVuY3Rpb24gX2RldGVybWluZU1pbk1heCgpIHtcblxuICAgIGlmICghdGhpcy50YWJMaXN0RWwgfHwgIXRoaXMudGFiTGlzdFNjcm9sbEVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5tYXhYID0gMDtcbiAgICB0aGlzLm1pblggPSB0aGlzLnRhYkxpc3RTY3JvbGxFbC5jbGllbnRXaWR0aCAtIHRoaXMudGFiTGlzdEVsLmNsaWVudFdpZHRoIC0gdGhpcy5tYXhYO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFbmFibGUgdGhlIGFuaW1hdGlvbiBzdGF0ZS5cbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5fZW5hYmxlQW5pbWF0aW9uID0gZnVuY3Rpb24gX2VuYWJsZUFuaW1hdGlvbigpIHtcbiAgICB0aGlzLmlzQW5pbWF0YWJsZSA9IHRydWU7XG4gICAgKDAsIF90b2dnbGVDbGFzczIuZGVmYXVsdCkodGhpcy5uYXZFbCwgJ25vLWFuaW1hdGlvbicsICF0aGlzLmlzQW5pbWF0YWJsZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc2FibGUgdGhlIGFuaW1hdGlvbiBzdGF0ZS5cbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5fZGlzYWJsZUFuaW1hdGlvbiA9IGZ1bmN0aW9uIF9kaXNhYmxlQW5pbWF0aW9uKCkge1xuICAgIHRoaXMuaXNBbmltYXRhYmxlID0gZmFsc2U7XG4gICAgKDAsIF90b2dnbGVDbGFzczIuZGVmYXVsdCkodGhpcy5uYXZFbCwgJ25vLWFuaW1hdGlvbicsICF0aGlzLmlzQW5pbWF0YWJsZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIHRhYnMuXG4gICAqL1xuXG5cbiAgVGFicy5wcm90b3R5cGUuX3VwZGF0ZVBvc2l0aW9uID0gZnVuY3Rpb24gX3VwZGF0ZVBvc2l0aW9uKCkge1xuICAgIHRoaXMudGFiTGlzdEVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAoMCwgX3RyYW5zZm9ybTIuZGVmYXVsdCkoJ3RyYW5zbGF0ZScsIHRoaXMueCArICdweCcpKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2sgdGhlIHggcG9zaXRpb25cbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5fY2hlY2tYID0gZnVuY3Rpb24gX2NoZWNrWCgpIHtcblxuICAgIGlmICh0aGlzLnggPCB0aGlzLm1pblgpIHtcbiAgICAgIHRoaXMueCA9IHRoaXMubWluWDtcbiAgICAgIHRoaXMuX3VwZGF0ZVBvc2l0aW9uKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMueCA+IDApIHtcbiAgICAgIHRoaXMueCA9IDA7XG4gICAgICB0aGlzLl91cGRhdGVQb3NpdGlvbigpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgdXNlciBjbGlja3Mgb24gYSB0YWIsIG1ha2UgaXQgYWN0aXZlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFRhYnMucHJvdG90eXBlLl9vblRhYkxpc3RDbGljayA9IGZ1bmN0aW9uIF9vblRhYkxpc3RDbGljayhlKSB7XG5cbiAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZW4ndCBzY3JvbGxlZC5cbiAgICBpZiAodGhpcy5zY3JvbGxEaXN0YW5jZSA+IDUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdGFiO1xuXG4gICAgLy8gRmluZCBpZiBvbmUgb2Ygb3VyIHRhYiBlbGVtZW50cyBpcyBpbiB0aGUgcGF0aFxuICAgIGlmICh0YWIgPSB0aGlzLl9maW5kVGFiQnlDaGlsZEVsZW1lbnQoZS50YXJnZXQpKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnNldEFjdGl2ZSh0YWIpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgd2luZG93IHJlc2l6ZXMsIGRldGVybWluZSB0aGUgc2l6ZSB3ZSBzaG91bGQgYmUgdXNpbmcgZm9yIHRhYnMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlXG4gICAqL1xuXG5cbiAgVGFicy5wcm90b3R5cGUuX29uUmVzaXplID0gZnVuY3Rpb24gX29uUmVzaXplKCkge1xuICAgIHRoaXMuX2RldGVybWluZVNpemUoKTtcbiAgICB0aGlzLmZvY3VzKHRoaXMuYWN0aXZlVGFiRWwpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSB0b3VjaHN0YXJ0IGV2ZW50IGZpcmVzLCBzdGFydCB0aGUgc2Nyb2xsaW5nIHByb2Nlc3NcbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5fb25Ub3VjaFN0YXJ0ID0gZnVuY3Rpb24gX29uVG91Y2hTdGFydChlKSB7XG5cbiAgICBpZiAoIXRoaXMuaXNTY3JvbGxhYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRGlzYWJsZSB0aGUgYW5pbWF0aW9uIGNsYXNzIHNvIHdlIHNjcm9sbCBzbW9vdGhseVxuICAgIHRoaXMuX2Rpc2FibGVBbmltYXRpb24oKTtcblxuICAgIHRoaXMuc3RhcnQoe1xuICAgICAgbGFzdFg6IGUudG91Y2hlc1swXS5jbGllbnRYLFxuICAgICAgbGFzdFk6IGUudG91Y2hlc1swXS5jbGllbnRZLFxuICAgICAgdHlwZTogJ3RvdWNoJ1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBcyB0aGUgdXNlciBjb250aW51ZXMgbW92aW5nIHRoZSB0b3VjaCwgZGV0ZXJtaW5lXG4gICAqIGlmIHdlIHNob3VsZCBtb3ZlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFRhYnMucHJvdG90eXBlLl9vblRvdWNoTW92ZSA9IGZ1bmN0aW9uIF9vblRvdWNoTW92ZShlKSB7XG5cbiAgICB2YXIgeERpc3RhbmNlID0gZS50b3VjaGVzWzBdLmNsaWVudFggLSB0aGlzLmxhc3RYO1xuICAgIHZhciB5RGlzdGFuY2UgPSBlLnRvdWNoZXNbMF0uY2xpZW50WSAtIHRoaXMubGFzdFk7XG5cbiAgICAvLyBJZiB3ZSBoYXZlbid0IHlldCBkZXRlcm1pbmVkIGEgc2Nyb2xsIGRpcmVjdGlvblxuICAgIGlmICghdGhpcy5zY3JvbGxEaXJlY3Rpb24pIHtcblxuICAgICAgLy8gTW92aW5nIHVwIGFuZCBkb3duXG4gICAgICBpZiAoTWF0aC5hYnMoeURpc3RhbmNlKSA+IE1hdGguYWJzKHhEaXN0YW5jZSkpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxEaXJlY3Rpb24gPSAnbnMnO1xuICAgICAgfVxuICAgICAgLy8gTW92aW5nIHNpZGUgdG8gc2lkZVxuICAgICAgZWxzZSB7XG4gICAgICAgICAgdGhpcy5zY3JvbGxEaXJlY3Rpb24gPSAnZXcnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgV2UncmUgbW92aW5nIGxlZnQgdG8gcmlnaHQsIHN0YXJ0IHRoZSBtb3ZlLlxuICAgIGlmICh0aGlzLnNjcm9sbERpcmVjdGlvbiA9PT0gJ2V3Jykge1xuXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIHRoaXMubW92ZSh7XG4gICAgICAgIHg6IHhEaXN0YW5jZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5sYXN0WCA9IGUudG91Y2hlc1swXS5jbGllbnRYO1xuICAgIHRoaXMubGFzdFkgPSBlLnRvdWNoZXNbMF0uY2xpZW50WTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgdG91Y2ggaXMgb3Zlci5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5fb25Ub3VjaEVuZCA9IGZ1bmN0aW9uIF9vblRvdWNoRW5kKCkge1xuXG4gICAgLy8gRW5hYmxlIHRoZSBhbmltYXRpb24gY2xhc3NcbiAgICB0aGlzLl9lbmFibGVBbmltYXRpb24oKTtcblxuICAgIC8vIFN0b3AgYWZ0ZXIgb25lIGZyYW1lIHNvIHRoYXQgYW5pbWF0aW9uIGlzIGZ1bGx5IHJlZW5hYmxlZFxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuc3RvcCh7XG4gICAgICAgIHR5cGU6ICd0b3VjaCdcbiAgICAgIH0pO1xuICAgIH0uYmluZCh0aGlzKSwgMSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIG1vdXNlZG93biBldmVudCBmaXJlcywgc3RhcnQgdGhlIHNjcm9sbGluZyBwcm9jZXNzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlXG4gICAqL1xuXG5cbiAgVGFicy5wcm90b3R5cGUuX29uTW91c2VEb3duID0gZnVuY3Rpb24gX29uTW91c2VEb3duKGUpIHtcblxuICAgIGlmICghdGhpcy5pc1Njcm9sbGFibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBEaXNhYmxlIHRoZSBhbmltYXRpb24gY2xhc3Mgc28gd2Ugc2Nyb2xsIHNtb290aGx5XG4gICAgdGhpcy5fZGlzYWJsZUFuaW1hdGlvbigpO1xuXG4gICAgdGhpcy5zdGFydCh7XG4gICAgICBsYXN0WDogZS5jbGllbnRYLFxuICAgICAgbGFzdFk6IGUuY2xpZW50WSxcbiAgICAgIHR5cGU6ICdtb3VzZSdcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQXMgdGhlIHVzZXIgY29udGludWVzIG1vdmluZyB0aGUgbW91c2UsIGRldGVybWluZVxuICAgKiBpZiB3ZSBzaG91bGQgbW92ZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5fb25Nb3VzZU1vdmUgPSBmdW5jdGlvbiBfb25Nb3VzZU1vdmUoZSkge1xuXG4gICAgdmFyIHhEaXN0YW5jZSA9IGUuY2xpZW50WCAtIHRoaXMubGFzdFg7XG4gICAgdmFyIHlEaXN0YW5jZSA9IGUuY2xpZW50WSAtIHRoaXMubGFzdFk7XG5cbiAgICAvLyBJZiB3ZSBoYXZlbid0IHlldCBkZXRlcm1pbmVkIGEgc2Nyb2xsIGRpcmVjdGlvblxuICAgIGlmICghdGhpcy5zY3JvbGxEaXJlY3Rpb24pIHtcblxuICAgICAgLy8gTW92aW5nIHVwIGFuZCBkb3duXG4gICAgICBpZiAoTWF0aC5hYnMoeURpc3RhbmNlKSA+IE1hdGguYWJzKHhEaXN0YW5jZSkpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxEaXJlY3Rpb24gPSAnbnMnO1xuICAgICAgfVxuICAgICAgLy8gTW92aW5nIHNpZGUgdG8gc2lkZVxuICAgICAgZWxzZSB7XG4gICAgICAgICAgdGhpcy5zY3JvbGxEaXJlY3Rpb24gPSAnZXcnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgV2UncmUgbW92aW5nIGxlZnQgdG8gcmlnaHQsIHN0YXJ0IHRoZSBtb3ZlLlxuICAgIGlmICh0aGlzLnNjcm9sbERpcmVjdGlvbiA9PT0gJ2V3Jykge1xuXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIHRoaXMubW92ZSh7XG4gICAgICAgIHg6IHhEaXN0YW5jZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5sYXN0WCA9IGUuY2xpZW50WDtcbiAgICB0aGlzLmxhc3RZID0gZS5jbGllbnRZO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSBtb3VzZSBtb3ZlIGlzIGNvbXBsZXRlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFRhYnMucHJvdG90eXBlLl9vbk1vdXNlVXAgPSBmdW5jdGlvbiBfb25Nb3VzZVVwKCkge1xuXG4gICAgLy8gSWYgd2UgaGF2ZW4ndCBiZWVuIGRyYWdnaW5nLCBnZXQgb3V0dGEgaGVyZSFcbiAgICBpZiAoIXRoaXMuaXNEcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEVuYWJsZSB0aGUgYW5pbWF0aW9uIGNsYXNzXG4gICAgdGhpcy5fZW5hYmxlQW5pbWF0aW9uKCk7XG5cbiAgICAvLyBTdG9wIGFmdGVyIG9uZSBmcmFtZSBzbyB0aGF0IGFuaW1hdGlvbiBpcyBmdWxseSByZWVuYWJsZWRcbiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnN0b3Aoe1xuICAgICAgICB0eXBlOiAnbW91c2UnXG4gICAgICB9KTtcbiAgICB9LmJpbmQodGhpcyksIDEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSB1c2VyIHNjcm9sbHMgaG9yaXpvbnRhbGx5IG9uIHRoZSB0YWJzLCBzbGlkZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5fb25TY3JvbGwgPSBmdW5jdGlvbiBfb25TY3JvbGwoZSkge1xuXG4gICAgLy8gRG9uJ3QgYm90aGVyIGlmIHdlIGFyZW4ndCBzY3JvbGxhYmxlXG4gICAgaWYgKCF0aGlzLmlzU2Nyb2xsYWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERpc2FibGUgdGhlIGFuaW1hdGlvbiBjbGFzcyBzbyB3ZSBzY3JvbGwgc21vb3RobHlcbiAgICB0aGlzLl9kaXNhYmxlQW5pbWF0aW9uKCk7XG5cbiAgICAvLyBBbGxvdyBmb3IgRmlyZWZveCdzIHdoZWVsIGRldGFpbFxuICAgIHZhciB2YWwgPSBlLndoZWVsRGVsdGFYIHx8IC1lLmRldGFpbCAqIDQwO1xuXG4gICAgLy8gSWYgdGhlIHNjcm9sbCBoYXMgbW92ZWQuLi5cbiAgICBpZiAodmFsKSB7XG5cbiAgICAgIC8vIFN1cHJlc3MgbmF0aXZlXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIC8vIE1vdmUgdXMgdG8gdGhlIG5ldyBwb3NpdGlvblxuICAgICAgdGhpcy5tb3ZlKHtcbiAgICAgICAgeDogdmFsLFxuICAgICAgICBzY3JvbGw6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENhbmNlbCBhbiBleGlzdGluZyBzY3JvbGwgdGltZXJcbiAgICBpZiAodGhpcy5zY3JvbGxUaW1lcikge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnNjcm9sbFRpbWVyKTtcbiAgICAgIHRoaXMuc2Nyb2xsVGltZXIgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFRoZSBzY3JvbGwgaXMgY29uc2lkZXJlZCBcImRvbmVcIiBhZnRlciAxMDBtc1xuICAgIHRoaXMuc2Nyb2xsVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCh0aGlzLl9vblNjcm9sbEVuZC5iaW5kKHRoaXMpLCAxMDApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSBzY3JvbGxpbmcgZW5kcywgcmVzZXQgdGhlIHNjcm9sbFRvcFxuICAgKi9cblxuXG4gIFRhYnMucHJvdG90eXBlLl9vblNjcm9sbEVuZCA9IGZ1bmN0aW9uIF9vblNjcm9sbEVuZCgpIHtcblxuICAgIC8vIEVuYWJsZSB0aGUgYW5pbWF0aW9uIGNsYXNzXG4gICAgdGhpcy5fZW5hYmxlQW5pbWF0aW9uKCk7XG5cbiAgICAvLyBTdG9wIGFmdGVyIG9uZSBmcmFtZSBzbyB0aGF0IGFuaW1hdGlvbiBpcyBmdWxseSByZWVuYWJsZWRcbiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnN0b3Aoe1xuICAgICAgICB0eXBlOiAnc2Nyb2xsJ1xuICAgICAgfSk7XG4gICAgfS5iaW5kKHRoaXMpLCAxKTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgbGVmdCBidXR0b24gaXMgY2xpY2tlZCwgc2xpZGUgdGhlIHRhYnMgdG8gdGhlIHJpZ2h0LlxuICAgKi9cblxuXG4gIFRhYnMucHJvdG90eXBlLl9vbkxlZnRDbGljayA9IGZ1bmN0aW9uIF9vbkxlZnRDbGljaygpIHtcbiAgICB0aGlzLm1vdmUoe1xuICAgICAgeDogdGhpcy50YWJMaXN0U2Nyb2xsRWwuY2xpZW50V2lkdGgsXG4gICAgICBmb3JjZTogdHJ1ZVxuICAgIH0pO1xuICAgIHRoaXMuc3RvcCh7XG4gICAgICB0eXBlOiAnZm9yY2UnXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIHJpZ2h0IGJ1dHRvbiBpcyBjbGlja2VkLCBzbGlkZSB0aGUgdGFicyB0byB0aGUgbGVmdC5cbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5fb25SaWdodENsaWNrID0gZnVuY3Rpb24gX29uUmlnaHRDbGljaygpIHtcbiAgICB0aGlzLm1vdmUoe1xuICAgICAgeDogLXRoaXMudGFiTGlzdFNjcm9sbEVsLmNsaWVudFdpZHRoLFxuICAgICAgZm9yY2U6IHRydWVcbiAgICB9KTtcbiAgICB0aGlzLnN0b3Aoe1xuICAgICAgdHlwZTogJ2ZvcmNlJ1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIGZvY3VzIGlzIGdhaW5lZCBvbiBhIHRhYi5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBUYWJzLnByb3RvdHlwZS5fb25Gb2N1cyA9IGZ1bmN0aW9uIF9vbkZvY3VzKGUpIHtcbiAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuICAgIHZhciBwYXJlbnQgPSAoMCwgX2dldFBhcmVudDIuZGVmYXVsdCkodGFyZ2V0LCAnLnNwYXJrLXRhYnNfX3RhYicsIHRoaXMudGFiTGlzdEVsKTtcbiAgICBpZiAocGFyZW50KSAoMCwgX2FkZENsYXNzMi5kZWZhdWx0KShwYXJlbnQsICdmb2N1cycpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIGZvY3VzIGlzIGxvc3Qgb24gYSB0YWIuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlXG4gICAqL1xuXG5cbiAgVGFicy5wcm90b3R5cGUuX29uQmx1ciA9IGZ1bmN0aW9uIF9vbkJsdXIoZSkge1xuICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG4gICAgdmFyIHBhcmVudCA9ICgwLCBfZ2V0UGFyZW50Mi5kZWZhdWx0KSh0YXJnZXQsICcuc3BhcmstdGFic19fdGFiJywgdGhpcy50YWJMaXN0RWwpO1xuICAgIGlmIChwYXJlbnQpICgwLCBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKHBhcmVudCwgJ2ZvY3VzJyk7XG4gIH07XG5cbiAgcmV0dXJuIFRhYnM7XG59KF9iYXNlMi5kZWZhdWx0KTtcblxuLyoqXG4gKiBXaGl0ZWxpc3RlZCBwYXJhbWV0ZXJzIHdoaWNoIGNhbiBiZSBzZXQgb24gY29uc3RydWN0aW9uLlxuICogQHR5cGUge0FycmF5fVxuICovXG5cblxuVGFicy5wcm90b3R5cGUuX3doaXRlbGlzdGVkUGFyYW1zID0gWyd1c2VIYXNoJywgJ2JyZWFrcG9pbnRzJ107XG5cbi8qKlxuICogRGVmYXVsdCB2YWx1ZXMgZm9yIGludGVybmFsIHByb3BlcnRpZXMgd2Ugd2lsbCBiZSBzZXR0aW5nLlxuICogVGhlc2UgYXJlIHNldCBvbiBlYWNoIGNvbnN0cnVjdGlvbiBzbyB3ZSBkb24ndCBsZWFrIHByb3BlcnRpZXNcbiAqIGludG8gdGhlIHByb3RvdHlwZSBjaGFpbi5cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cblRhYnMucHJvdG90eXBlLmRlZmF1bHRzID0ge1xuICBlbDogbnVsbCxcbiAgdGFiTGlzdEVsOiBudWxsLFxuICB0YWJMaXN0U2Nyb2xsRWw6IG51bGwsXG4gIHRhYkVsczogbnVsbCxcbiAgcGFuZWxFbHM6IG51bGwsXG4gIGFjdGl2ZVRhYkVsOiBudWxsLFxuICBhY3RpdmVQYW5lbEVsOiBudWxsLFxuICBuYXZFbDogbnVsbCxcbiAgbGVmdEVsOiBudWxsLFxuICByaWdodEVsOiBudWxsLFxuICB1c2VIYXNoOiBmYWxzZSxcbiAgaXNTY3JvbGxhYmxlOiBmYWxzZSxcbiAgaXNEcmFnZ2luZzogZmFsc2UsXG4gIGlzQW5pbWF0YWJsZTogZmFsc2UsXG4gIHNjcm9sbERpcmVjdGlvbjogJycsXG4gIHNjcm9sbERpc3RhbmNlOiAwLFxuICBsYXN0WDogMCxcbiAgbGFzdFk6IDAsXG4gIG1pblg6IDAsXG4gIG1heFg6IDAsXG4gIHg6IDAsXG4gIF9vbkZvY3VzQm91bmQ6IG51bGwsXG4gIF9vbkJsdXJCb3VuZDogbnVsbCxcbiAgX29uVGFiTGlzdENsaWNrQm91bmQ6IG51bGwsXG4gIF9vbkxlZnRDbGlja0JvdW5kOiBudWxsLFxuICBfb25SaWdodENsaWNrQm91bmQ6IG51bGwsXG4gIF9vblJlc2l6ZUJvdW5kOiBudWxsLFxuICBfb25Ub3VjaFN0YXJ0Qm91bmQ6IG51bGwsXG4gIF9vblRvdWNoTW92ZUJvdW5kOiBudWxsLFxuICBfb25Ub3VjaEVuZEJvdW5kOiBudWxsLFxuICBfb25Nb3VzZURvd25Cb3VuZDogbnVsbCxcbiAgX29uTW91c2VNb3ZlQm91bmQ6IG51bGwsXG4gIF9vbk1vdXNlVXBCb3VuZDogbnVsbCxcbiAgX29uU2Nyb2xsQm91bmQ6IG51bGxcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFRhYnM7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRhYnMuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAjIFRyYW5zZm9ybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQXBwbHkgYSBjcm9zcy1icm93c2VyIHRyYW5zZm9ybSBzdHlsZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogdHJhbnNmb3JtKCd0cmFuc2xhdGVYJywgJy0xMDBweCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQG1vZHVsZSBoZWxwZXJzL2Nzcy90cmFuc2Zvcm0uanNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG52YXIgX2VhY2ggPSByZXF1aXJlKCcuLi91dGlsL2VhY2gnKTtcblxudmFyIF9lYWNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VhY2gpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgcHJlZml4ZXMgPSBbJy13ZWJraXQtJywgJy1tb3otJywgJy1vLScsICctbXMtJywgJyddO1xuXG5mdW5jdGlvbiB0cmFuc2Zvcm0odHlwZSwgdmFsKSB7XG5cbiAgdmFyIHN0ciA9ICcnO1xuXG4gICgwLCBfZWFjaDIuZGVmYXVsdCkocHJlZml4ZXMsIGZ1bmN0aW9uIChwKSB7XG5cbiAgICBpZiAoKHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHZhbCkpID09PSAnb2JqZWN0Jykge1xuICAgICAgc3RyICs9IHAgKyAndHJhbnNmb3JtOiAnO1xuXG4gICAgICBmb3IgKHZhciBqIGluIHZhbCkge1xuICAgICAgICBzdHIgKz0gaiArICcoJyArIHZhbFtqXSArICcpOyAnO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgKz0gcCArICd0cmFuc2Zvcm06ICcgKyB0eXBlICsgJygnICsgdmFsICsgJyk7ICc7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gc3RyO1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSB0cmFuc2Zvcm07XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF90cmltID0gcmVxdWlyZSgnLi4vdXRpbC90cmltJyk7XG5cbnZhciBfdHJpbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmltKTtcblxudmFyIF9oYXNDbGFzcyA9IHJlcXVpcmUoJy4vaGFzLWNsYXNzJyk7XG5cbnZhciBfaGFzQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGFzQ2xhc3MpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqICMgQWRkIENsYXNzXG4gKiBBZGQgYSBjbGFzcyBvbiBhbiBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxBcnJheX0gZWwgQW4gZWxlbWVudCBvciBhcnJheSBvZiBlbGVtZW50cyB0byB1cGRhdGUuXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7RWxlbWVudH1cbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvZG9tL2FkZC1jbGFzcy5qc1xuICovXG5cbnZhciB3cyA9IC9cXHMrLztcbnZhciBjbGVhbnVwID0gL1xcc3syLH0vZztcblxuZnVuY3Rpb24gYWRkQ2xhc3MoZWwsIG5hbWUpIHtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMiAmJiB0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICBuYW1lID0gKDAsIF90cmltMi5kZWZhdWx0KShuYW1lKS5zcGxpdCh3cyk7XG4gIH0gZWxzZSB7XG4gICAgbmFtZSA9IG5hbWUgaW5zdGFuY2VvZiBBcnJheSA/IG5hbWUgOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICB9XG5cbiAgLy8gb3B0aW1pemUgZm9yIGJlc3QsIG1vc3QgY29tbW9uIGNhc2VcbiAgaWYgKG5hbWUubGVuZ3RoID09PSAxICYmIGVsLmNsYXNzTGlzdCkge1xuICAgIGlmIChuYW1lWzBdKSB7XG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKG5hbWVbMF0pO1xuICAgIH1cbiAgICByZXR1cm4gZWw7XG4gIH1cblxuICB2YXIgdG9BZGQgPSBbXTtcbiAgdmFyIGkgPSAwO1xuICB2YXIgbCA9IG5hbWUubGVuZ3RoO1xuICB2YXIgaXRlbSA9IHZvaWQgMDtcbiAgdmFyIGNsc05hbWUgPSB0eXBlb2YgZWwuY2xhc3NOYW1lID09PSAnc3RyaW5nJyA/IGVsLmNsYXNzTmFtZSA6IGVsLmdldEF0dHJpYnV0ZSA/IGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSA6ICcnO1xuXG4gIC8vIHNlZSBpZiB3ZSBoYXZlIGFueXRoaW5nIHRvIGFkZFxuICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgIGl0ZW0gPSBuYW1lW2ldO1xuICAgIGlmIChpdGVtICYmICEoMCwgX2hhc0NsYXNzMi5kZWZhdWx0KShjbHNOYW1lLCBpdGVtKSkge1xuICAgICAgdG9BZGQucHVzaChpdGVtKTtcbiAgICB9XG4gIH1cblxuICBpZiAodG9BZGQubGVuZ3RoKSB7XG4gICAgaWYgKHR5cGVvZiBlbC5jbGFzc05hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbC5jbGFzc05hbWUgPSAoMCwgX3RyaW0yLmRlZmF1bHQpKChjbHNOYW1lICsgJyAnICsgdG9BZGQuam9pbignICcpKS5yZXBsYWNlKGNsZWFudXAsICcgJykpO1xuICAgIH0gZWxzZSBpZiAoZWwuc2V0QXR0cmlidXRlKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgKDAsIF90cmltMi5kZWZhdWx0KSgoY2xzTmFtZSArICcgJyArIHRvQWRkLmpvaW4oJyAnKSkucmVwbGFjZShjbGVhbnVwLCAnICcpKSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGVsO1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSBhZGRDbGFzcztcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRkLWNsYXNzLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKipcbiAqICMgQnJlYWtwb2ludCBIZWxwZXJzXG4gKiBGaW5kIHRoZSBhY3RpdmUgYnJlYWtwb2ludC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gd2lkdGhcbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvZG9tL2JyZWFrcG9pbnQuanNcbiAqL1xuXG4vKipcbiAqIEJyZWFrcG9pbnRzIGJlaW5nIHVzZWQgaW4gdGhlIENTUy5cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbnZhciBkZWZhdWx0QnJlYWtwb2ludHMgPSB7XG4gIHhzOiB7XG4gICAgbWluOiAwLFxuICAgIG1heDogNTQzXG4gIH0sXG4gIHNtOiB7XG4gICAgbWluOiA1NDQsXG4gICAgbWF4OiA3OTVcbiAgfSxcbiAgbWQ6IHtcbiAgICBtaW46IDc5NixcbiAgICBtYXg6IDEwNDdcbiAgfSxcbiAgbGc6IHtcbiAgICBtaW46IDEwNDgsXG4gICAgbWF4OiAxNzk5XG4gIH0sXG4gIHhsOiB7XG4gICAgbWluOiAxODAwLFxuICAgIG1heDogSW5maW5pdHlcbiAgfVxufTtcblxuZnVuY3Rpb24gZ2V0KHdpZHRoLCBicmVha3BvaW50cykge1xuXG4gIGJyZWFrcG9pbnRzID0gYnJlYWtwb2ludHMgfHwgZGVmYXVsdEJyZWFrcG9pbnRzO1xuXG4gIHZhciBpID0gdm9pZCAwO1xuXG4gIGZvciAoaSBpbiBicmVha3BvaW50cykge1xuICAgIGlmICh3aWR0aCA+PSBicmVha3BvaW50c1tpXS5taW4gJiYgd2lkdGggPD0gYnJlYWtwb2ludHNbaV0ubWF4KSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0cy5nZXQgPSBnZXQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1icmVha3BvaW50LmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbi8qKlxuICogIyBIYXMgQ2xhc3NcbiAqIFNlZSBpZiBhbiBlbGVtZW50IGhhcyBhIGNsYXNzLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxTdHJpbmd9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvZG9tL2hhcy1jbGFzcy5qc1xuICovXG5mdW5jdGlvbiBoYXNDbGFzcyhlbCwgbmFtZSkge1xuICB2YXIgY05hbWUgPSAoKHR5cGVvZiBlbCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoZWwpKSA9PT0gJ29iamVjdCcgPyBlbC5jbGFzc05hbWUgfHwgZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJyA6IGVsIHx8ICcnKS5yZXBsYWNlKC9bXFx0XFxyXFxuXFxmXS9nLCAnICcpO1xuICByZXR1cm4gKCcgJyArIGNOYW1lICsgJyAnKS5pbmRleE9mKCcgJyArIG5hbWUgKyAnICcpICE9PSAtMTtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gaGFzQ2xhc3M7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhcy1jbGFzcy5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF90cmltID0gcmVxdWlyZSgnLi4vdXRpbC90cmltJyk7XG5cbnZhciBfdHJpbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmltKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIHdzID0gL1xccysvOyAvKipcbiAgICAgICAgICAgICAgICAgKiAjIFJlbW92ZSBDbGFzc1xuICAgICAgICAgICAgICAgICAqIFJlbW92ZSBhIGNsYXNzIG9uIGFuIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0VsZW1lbnR8QXJyYXl9IGVsIEFuIGVsZW1lbnQgb3IgYXJyYXkgb2YgZWxlbWVudHMgdG8gdXBkYXRlLlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAgICAgICAgICAgICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBtb2R1bGUgaGVscGVycy9kb20vcmVtb3ZlLWNsYXNzLmpzXG4gICAgICAgICAgICAgICAgICovXG5cbnZhciBjbGVhbnVwID0gL1xcc3syLH0vZztcblxuZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIG5hbWUpIHtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMiAmJiB0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICBuYW1lID0gKDAsIF90cmltMi5kZWZhdWx0KShuYW1lKS5zcGxpdCh3cyk7XG4gIH0gZWxzZSB7XG4gICAgbmFtZSA9IG5hbWUgaW5zdGFuY2VvZiBBcnJheSA/IG5hbWUgOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICB9XG5cbiAgLy8gb3B0aW1pemUgZm9yIGJlc3QsIG1vc3QgY29tbW9uIGNhc2VcbiAgaWYgKG5hbWUubGVuZ3RoID09PSAxICYmIGVsLmNsYXNzTGlzdCkge1xuICAgIGlmIChuYW1lWzBdKSBlbC5jbGFzc0xpc3QucmVtb3ZlKG5hbWVbMF0pO1xuICAgIHJldHVybiBlbDtcbiAgfVxuXG4gIC8vIHN0b3JlIHR3byBjb3BpZXNcbiAgdmFyIGNsc05hbWUgPSAnICcgKyAodHlwZW9mIGVsLmNsYXNzTmFtZSA9PT0gJ3N0cmluZycgPyBlbC5jbGFzc05hbWUgOiBlbC5nZXRBdHRyaWJ1dGUgPyBlbC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgOiAnJykgKyAnICc7XG4gIHZhciByZXN1bHQgPSBjbHNOYW1lO1xuICB2YXIgY3VycmVudCA9IHZvaWQgMDtcbiAgdmFyIHN0YXJ0ID0gdm9pZCAwO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IG5hbWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgY3VycmVudCA9IG5hbWVbaV07XG4gICAgc3RhcnQgPSBjdXJyZW50ID8gcmVzdWx0LmluZGV4T2YoJyAnICsgY3VycmVudCArICcgJykgOiAtMTtcbiAgICBpZiAoc3RhcnQgIT09IC0xKSB7XG4gICAgICBzdGFydCArPSAxO1xuICAgICAgcmVzdWx0ID0gcmVzdWx0LnNsaWNlKDAsIHN0YXJ0KSArIHJlc3VsdC5zbGljZShzdGFydCArIGN1cnJlbnQubGVuZ3RoKTtcbiAgICB9XG4gIH1cblxuICAvLyBvbmx5IHdyaXRlIGlmIG1vZGlmaWVkXG4gIGlmIChjbHNOYW1lICE9PSByZXN1bHQpIHtcbiAgICBpZiAodHlwZW9mIGVsLmNsYXNzTmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVsLmNsYXNzTmFtZSA9ICgwLCBfdHJpbTIuZGVmYXVsdCkocmVzdWx0LnJlcGxhY2UoY2xlYW51cCwgJyAnKSk7XG4gICAgfSBlbHNlIGlmIChlbC5zZXRBdHRyaWJ1dGUpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAoMCwgX3RyaW0yLmRlZmF1bHQpKHJlc3VsdC5yZXBsYWNlKGNsZWFudXAsICcgJykpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZWw7XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IHJlbW92ZUNsYXNzO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZW1vdmUtY2xhc3MuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfaGFzQ2xhc3MgPSByZXF1aXJlKCcuL2hhcy1jbGFzcycpO1xuXG52YXIgX2hhc0NsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhc0NsYXNzKTtcblxudmFyIF9hZGRDbGFzcyA9IHJlcXVpcmUoJy4vYWRkLWNsYXNzJyk7XG5cbnZhciBfYWRkQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYWRkQ2xhc3MpO1xuXG52YXIgX3JlbW92ZUNsYXNzID0gcmVxdWlyZSgnLi9yZW1vdmUtY2xhc3MnKTtcblxudmFyIF9yZW1vdmVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZW1vdmVDbGFzcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIHRvZ2dsZUNsYXNzKGVsLCBuYW1lLCBlbmFibGUpIHtcblxuICBpZiAoIWVsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gSWYgd2UncmUgcGFzc2VkIGFuIGFycmF5LCB0b2dnbGUgdGhlIGNsYXNzIG9uIGVhY2guXG4gIGlmIChlbCBpbnN0YW5jZW9mIE5vZGVMaXN0IHx8IGVsIGluc3RhbmNlb2YgQXJyYXkpIHtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBlbC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgdG9nZ2xlQ2xhc3MoZWxbaV0sIG5hbWUsIGVuYWJsZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGFjdGlvbiA9IHZvaWQgMDtcbiAgaWYgKGVuYWJsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZW5hYmxlID0gdHlwZW9mIGVuYWJsZSA9PT0gJ2Z1bmN0aW9uJyA/IGVuYWJsZS5jYWxsKG51bGwsIGVsKSA6IGVuYWJsZTtcbiAgICBhY3Rpb24gPSBlbmFibGUgPyAnYWRkJyA6ICdyZW1vdmUnO1xuICB9IGVsc2Uge1xuICAgIGFjdGlvbiA9ICgwLCBfaGFzQ2xhc3MyLmRlZmF1bHQpKGVsLCBuYW1lKSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gIH1cblxuICByZXR1cm4gKGFjdGlvbiA9PT0gJ2FkZCcgPyBfYWRkQ2xhc3MyLmRlZmF1bHQgOiBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKGVsLCBuYW1lKTtcbn0gLyoqXG4gICAqICMgVG9nZ2xlIENsYXNzXG4gICAqIFRvZ2dsZSBhIGNsYXNzIG9uIGFuIGVsZW1lbnQgZ2l2ZW4gYSBjb25kaXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudHxBcnJheX0gZWwgQW4gZWxlbWVudCBvciBhcnJheSBvZiBlbGVtZW50cyB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZW5hYmxlXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqXG4gICAqIEBtb2R1bGUgIGhlbHBlcnMvZG9tL3RvZ2dsZS1jbGFzcy5qc1xuICAgKi9cblxuZXhwb3J0cy5kZWZhdWx0ID0gdG9nZ2xlQ2xhc3M7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvZ2dsZS1jbGFzcy5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9tYXRjaGVzID0gcmVxdWlyZSgnLi9tYXRjaGVzJyk7XG5cbnZhciBfbWF0Y2hlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tYXRjaGVzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gZ2V0Q2hpbGRyZW4oZWwsIHF1ZXJ5KSB7XG5cbiAgdmFyIGxpc3QgPSBbXTtcbiAgdmFyIGkgPSAwO1xuICB2YXIgbGVuID0gZWwuY2hpbGRyZW4ubGVuZ3RoO1xuXG4gIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAoKDAsIF9tYXRjaGVzMi5kZWZhdWx0KShlbC5jaGlsZHJlbltpXSwgcXVlcnkpKSB7XG4gICAgICBsaXN0LnB1c2goZWwuY2hpbGRyZW5baV0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBsaXN0O1xufSAvKipcbiAgICogIyBHZXQgQ2hpbGRyZW5cbiAgICogU2VlIGlmIGFuIGVsZW1lbnQgaGFzIGNoaWxkcmVuIHdoaWNoIG1hdGNoIGEgcXVlcnkuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtTdHJpbmd9IHF1ZXJ5XG4gICAqIEByZXR1cm4ge0xpc3R9XG4gICAqXG4gICAqIEBtb2R1bGUgaGVscGVycy90cmF2ZXJzYWwvZ2V0LWNoaWxkcmVuLmpzXG4gICAqL1xuXG5leHBvcnRzLmRlZmF1bHQgPSBnZXRDaGlsZHJlbjtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0LWNoaWxkcmVuLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKipcbiAqICMgR2V0IEluZGV4XG4gKiBHZXQgdGhlIGluZGV4IG9mIGFuIGVsZW1lbnQgaW4gYSBub2RlbGlzdC5cbiAqXG4gKiBAcGFyYW0ge05vZGVMaXN0fSBlbHNcbiAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvdHJhdmVyc2FsL2dldC1pbmRleC5qc1xuICovXG5mdW5jdGlvbiBnZXRJbmRleChlbHMsIGVsKSB7XG4gIHJldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGVscywgZWwpO1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSBnZXRJbmRleDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXQtaW5kZXguanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbWF0Y2hlcyA9IHJlcXVpcmUoJy4vbWF0Y2hlcycpO1xuXG52YXIgX21hdGNoZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWF0Y2hlcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGdldFBhcmVudChwYXJlbnQsIHF1ZXJ5LCBsaW1pdEVsKSB7XG5cbiAgbGltaXRFbCA9IGxpbWl0RWwgaW5zdGFuY2VvZiBBcnJheSA/IGxpbWl0RWwgOiBbbGltaXRFbCB8fCBkb2N1bWVudC5ib2R5XTtcblxuICB3aGlsZSAocGFyZW50KSB7XG5cbiAgICBpZiAoKDAsIF9tYXRjaGVzMi5kZWZhdWx0KShwYXJlbnQsIHF1ZXJ5KSkge1xuICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICB9XG5cbiAgICBpZiAobGltaXRFbC5pbmRleE9mKHBhcmVudCkgIT09IC0xKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59IC8qKlxuICAgKiAjIEdldCBQYXJlbnRcbiAgICogU2VlIGlmIGFuIGVsZW1lbnQgaGFzIGFub3RoZXIgZWxlbWVudCBmb3IgYSBwYXJlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gcGFyZW50XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBxdWVyeVxuICAgKiBAcGFyYW0ge0FycmF5fEVsZW1lbnR9IGxpbWl0RWwgVGhlIGxhc3QgZWxlbWVudCB3ZSBzaG91bGQgY2hlY2suXG4gICAqIEByZXR1cm4ge0Jvb2xlYW58RWxlbWVudH1cbiAgICpcbiAgICogQG1vZHVsZSBoZWxwZXJzL3RyYXZlcnNhbC9nZXQtcGFyZW50LmpzXG4gICAqL1xuXG5leHBvcnRzLmRlZmF1bHQgPSBnZXRQYXJlbnQ7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldC1wYXJlbnQuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbi8qKlxuICogIyBIYXMgUGFyZW50XG4gKiBTZWUgaWYgYW4gZWxlbWVudCBoYXMgYW5vdGhlciBlbGVtZW50IGZvciBhIHBhcmVudC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNoaWxkXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHBvc3NpYmxlUGFyZW50XG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICpcbiAqIEBtb2R1bGUgaGVscGVycy90cmF2ZXJzYWwvaGFzLXBhcmVudC5qc1xuICovXG5mdW5jdGlvbiBoYXNQYXJlbnQoY2hpbGQsIHBvc3NpYmxlUGFyZW50KSB7XG5cbiAgdmFyIHBhcmVudCA9IGNoaWxkLnBhcmVudE5vZGU7XG5cbiAgd2hpbGUgKHBhcmVudCkge1xuXG4gICAgaWYgKHBhcmVudCA9PT0gcG9zc2libGVQYXJlbnQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSBoYXNQYXJlbnQ7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzLXBhcmVudC5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbi8qKlxuICogIyBNYXRjaGVzXG4gKiBTZWUgaWYgYW4gZWxlbWVudCBtYXRjaGVzIGEgcXVlcnkgc2VsZWN0b3IuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IHF1ZXJ5XG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICpcbiAqIEBtb2R1bGUgaGVscGVycy90cmF2ZXJzYWwvbWF0Y2hlcy5qc1xuICovXG52YXIgdmVuZG9yTWF0Y2ggPSB0eXBlb2YgRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgKEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgfHwgRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUub01hdGNoZXNTZWxlY3Rvcik7XG5cbmZ1bmN0aW9uIG1hdGNoZXMoZWwsIHF1ZXJ5KSB7XG5cbiAgaWYgKHZlbmRvck1hdGNoKSByZXR1cm4gdmVuZG9yTWF0Y2guY2FsbChlbCwgcXVlcnkpO1xuXG4gIHZhciBub2RlcyA9IGVsLnBhcmVudE5vZGUgPyBlbC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwocXVlcnkpIDogW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChub2Rlc1tpXSA9PT0gZWwpIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSBtYXRjaGVzO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXRjaGVzLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuLyoqXG4gKiAjIEVhY2hcbiAqIEFwcGx5IGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gYSBsaXN0IG9mIGFueSBraW5kOiBBcnJheSwgTm9kZUxpc3QsIEhUTUxDb2xsZWN0aW9uIG9yIE9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fE5vZGVMaXN0fEhUTUxDb2xsZWN0aW9ufE9iamVjdH0gbGlzdFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqXG4gKiBAZXhhbXBsZVxuICogZWFjaChbXSwgY2FsbGJhY2spO1xuICogZWFjaChlbC5jaGlsZHJlbiwgY2FsbGJhY2spO1xuICogZWFjaChlbC5jaGlsZE5vZGVzLCBjYWxsYmFjayk7XG4gKiBlYWNoKHt9LCBjYWxsYmFjayk7XG4gKlxuICogQG1vZHVsZSBoZWxwZXJzL3V0aWwvZWFjaC5qc1xuICovXG5mdW5jdGlvbiBlYWNoKGxpc3QsIGNiKSB7XG5cbiAgaWYgKCFsaXN0KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBjYiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGludm9rZSBgZWFjaGAgd2l0aG91dCBhIGNhbGxiYWNrIScpO1xuICB9XG5cbiAgdmFyIGkgPSAwO1xuICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG5cbiAgLy8gT2JqZWN0XG4gIGlmIChsZW4gPT09IHVuZGVmaW5lZCkge1xuICAgIGZvciAoaSBpbiBsaXN0KSB7XG4gICAgICBpZiAoaSAhPT0gJ3Byb3RvdHlwZScgJiYgbGlzdC5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICBjYihpLCBsaXN0W2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gQXJyYXktbGlrZVxuICBlbHNlIHtcbiAgICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgY2IobGlzdFtpXSk7XG4gICAgICB9XG4gICAgfVxufVxuXG5leHBvcnRzLmRlZmF1bHQgPSBlYWNoO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lYWNoLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuLyoqXG4gKiAjIFRyaW1cbiAqIFRyaW0gd2hpdGVzcGFjZSBvbiBhIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKlxuICogQG1vZHVsZSBoZWxwZXJzL3V0aWwvdHJpbS5qc1xuICovXG5cbnZhciB0cmltUkUgPSAvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2c7XG5cbmZ1bmN0aW9uIHRyaW0oc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSh0cmltUkUsICcnKTtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gdHJpbTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJpbS5qcy5tYXBcbiJdfQ=="}