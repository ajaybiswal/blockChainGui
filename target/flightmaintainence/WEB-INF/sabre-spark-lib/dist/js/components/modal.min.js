/* sabre-spark - v2.4.4 - 2018-3-6 DO NOT MODIFY THIS FILE DIRECTLY OR YOU WILL NOT BE ABLE TO UPDATE YOUR VERSION OF SPARK. */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;((t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Spark||(t.Spark={})).Modal=e()}}(function(){return function r(l,i,a){function u(o,e){if(!i[o]){if(!l[o]){var t="function"==typeof require&&require;if(!e&&t)return t(o,!0);if(d)return d(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var n=i[o]={exports:{}};l[o][0].call(n.exports,function(e){var t=l[o][1][e];return u(t||e)},n,n.exports,r,l,i,a)}return i[o].exports}for(var d="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s,n=e("../helpers/util/each"),r=(s=n)&&s.__esModule?s:{default:s};var l=function(){},i=function(){function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t.elRequired&&!e||(this.setParams(this.defaults||{},!0),this.setParams(t),(this._cacheElements||l).call(this,e,t),(this._parseParams||l).call(this))}return o.prototype.remove=function(e){return this._removeEventListeners&&this._removeEventListeners(),!e&&this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.unsetParams(this.defaults),this},o.prototype.update=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this._removeEventListeners&&this._removeEventListeners(),(this._cacheElements||l).call(this,e||this.el,t),(this._parseParams||l).call(this),this._addEventListeners&&this._addEventListeners(),this},o.prototype.setParams=function(e,o){var s=this;return(0,r.default)(e,function(e,t){(-1!==s._whitelistedParams.indexOf(e)||o)&&(s[e]=t)}),this},o.prototype.unsetParams=function(e,t){return e=e instanceof Array?e:Object.keys(e),t=t||this,(0,r.default)(e,function(e){delete t[e]}),this},o}();i.prototype._whitelistedParams=[],i.prototype.defaults={},o.default=i,t.exports=o.default},{"../helpers/util/each":9}],2:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=n(e("./base")),r=n(e("../helpers/dom/toggle-class")),l=n(e("../helpers/dom/add-class")),i=n(e("../helpers/dom/remove-class")),a=n(e("../helpers/dom/has-class")),u=n(e("../helpers/traversal/get-parent"));function n(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(s){function n(e){var t,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o.elRequired=!0,(t=d(this,s.call(this,e,o)))&&(t._bindEventListenerCallbacks(),t._addEventListeners()),d(t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s),n.prototype.open=function(){this.isActive=!0,document.activeElement&&(this.focusedElBeforeOpen=document.activeElement);var e=this.modalEl.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]');return 0<e.length&&(this.modalFocusableEls=Array.prototype.slice.call(e),this.firstModalFocusableEl=this.modalFocusableEls[0],this.lastModalFocusableEl=this.modalFocusableEls[this.modalFocusableEls.length-1]),this._addWindowEventListeners(),this._updateClasses(),(0,l.default)(document.body,"spark-modal-open"),0<e.length&&this.firstModalFocusableEl.focus(),this},n.prototype.close=function(){return this.isActive=!1,this.focusedElBeforeOpen&&this.focusedElBeforeOpen.focus(),this._removeWindowEventListeners(),this._updateClasses(),(0,i.default)(document.body,"spark-modal-open"),this},n.prototype.update=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this._removeEventListeners(),this._cacheElements(e||this.el,t),this._addEventListeners(),this._updateClasses(),this._removeWindowEventListeners(),this.isActive&&this._addWindowEventListeners(),this},n.prototype._cacheElements=function(e,t){var o=(0,a.default)(e,"spark-modal"),s=t.modalEl;o?this.modalEl=e:(this.el=e,this.modalEl=s||document.querySelector(e.getAttribute("data-modal"))),this.scrollEl=this.modalEl.querySelector(".spark-modal__scroll")||this.modalEl,this.isActive=(0,a.default)(this.el||this.modalEl,"active")},n.prototype._updateClasses=function(){(0,r.default)(this.modalEl,"active",this.isActive)},n.prototype._bindEventListenerCallbacks=function(){this._onClickBound=this._onClick.bind(this),this._onKeyupBound=this._onKeyup.bind(this),this._onKeydownBound=this._onKeydown.bind(this),this._onModalClickBound=this._onModalClick.bind(this)},n.prototype._addEventListeners=function(){this.el&&this.el.addEventListener("click",this._onClickBound),this.modalEl&&this.modalEl.addEventListener("click",this._onModalClickBound)},n.prototype._removeEventListeners=function(){this.el&&this.el.removeEventListener("click",this._onClickBound),this.modalEl&&this.modalEl.removeEventListener("click",this._onModalClickBound)},n.prototype._addWindowEventListeners=function(){this._removeWindowEventListeners(),window.addEventListener("keyup",this._onKeyupBound),window.addEventListener("keydown",this._onKeydownBound)},n.prototype._removeWindowEventListeners=function(){window.removeEventListener("keyup",this._onKeyupBound),window.removeEventListener("keydown",this._onKeydownBound)},n.prototype._onClick=function(){this.open()},n.prototype._onModalClick=function(e){(e.target===this.scrollEl||e.target===this.modalEl||(0,u.default)(e.target,".spark-modal__close, .spark-modal__dismiss",this.scrollEl))&&(e.preventDefault(),this.close())},n.prototype._onBackwardTab=function(e){document.activeElement===this.firstModalFocusableEl&&(e.preventDefault(),this.lastModalFocusableEl.focus())},n.prototype._onForwardTab=function(e){document.activeElement===this.lastModalFocusableEl&&(e.preventDefault(),this.firstModalFocusableEl.focus())},n.prototype._onKeyup=function(e){27===e.keyCode&&this.close()},n.prototype._onKeydown=function(e){9===e.keyCode&&(1===this.modalFocusableEls.length&&e.preventDefault(),e.shiftKey?this._onBackwardTab(e):this._onForwardTab(e)),13===e.keyCode&&(e.target!==document.querySelector(".spark-modal__close")&&e.target!==document.querySelector(".spark-modal__dismiss")||(e.preventDefault(),this.close()))},n}(s.default);c.prototype.defaults={el:null,modalEl:null,scrollEl:null,isActive:!1,_onClickBound:null,_onKeyupBound:null,_onKeydownBound:null,_onModalClickBound:null},o.default=c,t.exports=o.default},{"../helpers/dom/add-class":3,"../helpers/dom/has-class":4,"../helpers/dom/remove-class":5,"../helpers/dom/toggle-class":6,"../helpers/traversal/get-parent":7,"./base":1}],3:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=s(e("../util/trim")),a=s(e("./has-class"));function s(e){return e&&e.__esModule?e:{default:e}}var u=/\s+/,d=/\s{2,}/g;o.default=function(e,t){if(1===(t=2===arguments.length&&"string"==typeof t?(0,i.default)(t).split(u):t instanceof Array?t:Array.prototype.slice.call(arguments,1)).length&&e.classList)return t[0]&&e.classList.add(t[0]),e;for(var o=[],s=0,n=t.length,r=void 0,l="string"==typeof e.className?e.className:e.getAttribute?e.getAttribute("class"):"";s<n;s++)(r=t[s])&&!(0,a.default)(l,r)&&o.push(r);return o.length&&("string"==typeof e.className?e.className=(0,i.default)((l+" "+o.join(" ")).replace(d," ")):e.setAttribute&&e.setAttribute("class",(0,i.default)((l+" "+o.join(" ")).replace(d," ")))),e},t.exports=o.default},{"../util/trim":10,"./has-class":4}],4:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o.default=function(e,t){return-1!==(" "+("object"===(void 0===e?"undefined":s(e))?e.className||e.getAttribute&&e.getAttribute("class")||"":e||"").replace(/[\t\r\n\f]/g," ")+" ").indexOf(" "+t+" ")},t.exports=o.default},{}],5:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s,n=e("../util/trim"),a=(s=n)&&s.__esModule?s:{default:s};var u=/\s+/,d=/\s{2,}/g;o.default=function(e,t){if(1===(t=2===arguments.length&&"string"==typeof t?(0,a.default)(t).split(u):t instanceof Array?t:Array.prototype.slice.call(arguments,1)).length&&e.classList)return t[0]&&e.classList.remove(t[0]),e;for(var o=" "+("string"==typeof e.className?e.className:e.getAttribute?e.getAttribute("class"):"")+" ",s=o,n=void 0,r=void 0,l=0,i=t.length;l<i;l++)-1!==(r=(n=t[l])?s.indexOf(" "+n+" "):-1)&&(r+=1,s=s.slice(0,r)+s.slice(r+n.length));return o!==s&&("string"==typeof e.className?e.className=(0,a.default)(s.replace(d," ")):e.setAttribute&&e.setAttribute("class",(0,a.default)(s.replace(d," ")))),e},t.exports=o.default},{"../util/trim":10}],6:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var l=s(e("./has-class")),i=s(e("./add-class")),a=s(e("./remove-class"));function s(e){return e&&e.__esModule?e:{default:e}}o.default=function e(t,o,s){if(t){if(!(t instanceof NodeList||t instanceof Array))return("add"==(void 0!==s?(s="function"==typeof s?s.call(null,t):s)?"add":"remove":(0,l.default)(t,o)?"remove":"add")?i.default:a.default)(t,o);for(var n=0,r=t.length;n<r;n++)e(t[n],o,s)}},t.exports=o.default},{"./add-class":3,"./has-class":4,"./remove-class":5}],7:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s,n=e("./matches"),r=(s=n)&&s.__esModule?s:{default:s};o.default=function(e,t,o){for(o=o instanceof Array?o:[o||document.body];e;){if((0,r.default)(e,t))return e;if(-1!==o.indexOf(e))return!1;e=e.parentNode}return!1},t.exports=o.default},{"./matches":8}],8:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector);o.default=function(e,t){if(n)return n.call(e,t);for(var o=e.parentNode?e.parentNode.querySelectorAll(t):[],s=0;s<o.length;s++)if(o[s]===e)return!0;return!1},t.exports=o.default},{}],9:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t){if(e){if("function"!=typeof t)throw new Error("Cannot invoke `each` without a callback!");var o=0,s=e.length;if(void 0===s)for(o in e)"prototype"!==o&&e.hasOwnProperty(o)&&t(o,e[o]);else for(;o<s;o++)t(e[o])}},t.exports=o.default},{}],10:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;o.default=function(e){return e.replace(s,"")},t.exports=o.default},{}]},{},[2])(2)});