{"version":3,"sources":["components/slider.js"],"names":["noop","Slider","el","params","elRequired","_bindEventListenerCallbacks","_addEventListeners","start","position","type","inputEl","getAttribute","_addMoveEventListeners","_cacheSize","isActive","_updateActiveClasses","_oldVal","value","move","force","isX","offsetLeft","width","offsetTop","height","percentage","handleSize","setValue","Math","round","handleSizePercentage","max","min","stop","onChange","_removeMoveEventListeners","step","onWillChange","change","handleEl","setAttribute","_truncateValueText","_updateHandlePosition","getValue","clearValue","setErrorState","opt","removeAttribute","enable","disable","increment","useMultiplier","decrement","remove","leaveElement","update","_removeEventListeners","_cacheElements","controlsEl","querySelector","trackEl","trackFillEl","messageEl","Error","parseInt","isNaN","offsetWidth","offsetHeight","offset","left","top","trackPercentage","handlePos","handlePosPercentage","_onTouchStartBound","_onTouchStart","bind","_onTouchMoveBound","_onTouchMove","_onTouchEndBound","_onTouchEnd","_onClickBound","_onClick","_onMouseDownBound","_onMouseDown","_onMouseMoveBound","_onMouseMove","_onMouseUpBound","_onMouseUp","_onMouseOutBound","_onMouseOut","_onFocusBound","_onFocus","_onKeydownBound","_onKeydown","_onBlurBound","_onBlur","_onChangeBound","_onChange","_onResizeBound","_onResize","_onVisibleChildrenBound","_onVisibleChildren","addEventListener","window","document","removeEventListener","precision","characters","length","isNegative","abs","truncatePrecision","truncateCharacters","i","pow","size","e","preventDefault","touches","pageX","pageY","target","contains","setTimeout","keyCode","shiftKey","_onWindowClick","prototype","_whitelistedParams","defaults","onValidate"],"mappings":";;;;;;AAcA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;+eArBA;;;;;;;;;;;;;;;;AAuBA,IAAMA,OAAO,SAAPA,IAAO,GAAW,CAAE,CAA1B;;IAEMC,M;;;AAEJ;;;;;AAKA,kBAAYC,EAAZ,EAA6B;AAAA;;AAAA,QAAbC,MAAa,uEAAJ,EAAI;;AAAA;;AAE3BA,WAAOC,UAAP,GAAoB,IAApB;;AAEA,QAAI,2CAAC,0BAAMF,EAAN,EAAUC,MAAV,CAAD,SAAJ,EAAwB;AACtB;AACD;;AAED,UAAKE,2BAAL;AACA,UAAKC,kBAAL;AAT2B;AAU5B;;AAGD;;;;;;;mBAKAC,K,kBAAMC,Q,EAAUC,I,EAAM;;AAEpB,QAAI,KAAKC,OAAL,CAAaC,YAAb,CAA0B,UAA1B,MAA0C,IAA9C,EAAoD;AAClD,aAAO,IAAP;AACD;;AAED,SAAKC,sBAAL,CAA4BH,QAAQ,OAApC;AACA,SAAKI,UAAL;AACA,SAAKC,QAAL,GAAgB,IAAhB;AACA,SAAKC,oBAAL;AACA,SAAKC,OAAL,GAAe,KAAKC,KAApB;AACA,SAAKC,IAAL,CAAUV,QAAV;;AAEA,WAAO,IAAP;AACD,G;;AAGD;;;;;;;mBAKAU,I,iBAAKV,Q,EAAUW,K,EAAO;;AAEpB;AACA,QAAI,CAAC,CAACX,QAAD,IAAa,CAAC,KAAKM,QAApB,KAAiC,CAACK,KAAtC,EAA6C;AAC3C,aAAO,IAAP;AACD;;AAED;AACA,QAAI,KAAKC,GAAT,EAAc;;AAEZ;AACA,UAAIZ,WAAW,KAAKa,UAApB,EAAgC;AAC9Bb,mBAAW,KAAKa,UAAhB;AACD;AACD;AAHA,WAIK,IAAIb,WAAW,KAAKa,UAAL,GAAkB,KAAKC,KAAtC,EAA6C;AAChDd,qBAAW,KAAKa,UAAL,GAAkB,KAAKC,KAAlC;AACD;AACF,KAVD,MAUO;;AAEL;AACA,UAAId,WAAW,KAAKe,SAApB,EAA+B;AAC7Bf,mBAAW,KAAKe,SAAhB;AACD;AACD;AAHA,WAIK,IAAIf,WAAW,KAAKe,SAAL,GAAiB,KAAKC,MAArC,EAA6C;AAChDhB,qBAAW,KAAKe,SAAL,GAAiB,KAAKC,MAAjC;AACD;AACF;;AAED;AACA,QAAIC,aAAa,KAAKL,GAAL,GAAW,CAACZ,WAAW,KAAKa,UAAjB,KAAgC,KAAKC,KAAL,GAAa,KAAKI,UAAlD,CAAX,GAA2E,CAAClB,WAAW,KAAKe,SAAjB,IAA8B,KAAKC,MAA/H;;AAEA;AACA,WAAO,KAAKG,QAAL,CAAcC,KAAKC,KAAL,CAAW,CAACJ,aAAa,KAAKK,oBAAL,GAA4B,CAA1C,KAAgD,KAAKC,GAAL,GAAW,KAAKC,GAAhE,CAAX,IAAmF,KAAKA,GAAtG,CAAP;AACD,G;;AAGD;;;;;;mBAIAC,I,iBAAKxB,I,EAAM;;AAET,SAAKK,QAAL,GAAgB,KAAhB;;AAEA,QAAG,KAAKE,OAAL,KAAiB,KAAKC,KAAzB,EAAgC;AAC9B,OAAC,KAAKiB,QAAL,IAAiBlC,IAAlB,EAAwB,KAAKiB,KAA7B,EAAoC,IAApC;AACD;;AAED,SAAKF,oBAAL;AACA,SAAKoB,yBAAL,CAA+B1B,QAAQ,OAAvC;;AAEA,WAAO,IAAP;AACD,G;;AAGD;;;;;;mBAIAkB,Q,qBAASV,K,EAAO;;AAEd;AACA,QAAI,KAAKmB,IAAT,EAAe;AACbnB,cAAQA,QAASA,QAAQ,KAAKmB,IAA9B;AACD;;AAED;AACA,QAAInB,QAAQ,KAAKc,GAAjB,EAAsB;AACpBd,cAAQ,KAAKc,GAAb;AACD,KAFD,MAEO,IAAId,QAAQ,KAAKe,GAAjB,EAAsB;AAC3Bf,cAAQ,KAAKe,GAAb;AACD;;AAED;AACA;AACA,QAAI,OAAO,KAAKK,YAAZ,KAA6B,UAAjC,EAA6C;AAC3C,UAAIC,SAAS,KAAKD,YAAL,CAAkBpB,KAAlB,EAAyB,IAAzB,CAAb;AACA,UAAI,OAAOqB,MAAP,KAAkB,QAAtB,EAAgC;AAC9BrB,gBAAQqB,MAAR;AACD;AACF;;AAED;AACA,SAAKrB,KAAL,GAAaA,KAAb;;AAEA;AACA,SAAKP,OAAL,CAAaO,KAAb,GAAqB,KAAKA,KAA1B;AACA,SAAKsB,QAAL,CAAcC,YAAd,CAA2B,YAA3B,EAAyC,KAAKC,kBAAL,CAAwB,KAAKxB,KAA7B,CAAzC;AACA,SAAKsB,QAAL,CAAcC,YAAd,CAA2B,eAA3B,EAA4C,KAAKC,kBAAL,CAAwB,KAAKxB,KAA7B,CAA5C;AACA,SAAKsB,QAAL,CAAcC,YAAd,CAA2B,gBAA3B,EAA6C,KAAKC,kBAAL,CAAwB,KAAKxB,KAA7B,CAA7C;;AAEA;AACA,SAAKQ,UAAL,GAAkB,CAAC,KAAKR,KAAL,GAAa,KAAKe,GAAnB,KAA2B,KAAKD,GAAL,GAAW,KAAKC,GAA3C,CAAlB;;AAEA;AACA,SAAKU,qBAAL;;AAEA,WAAO,IAAP;AACD,G;;AAGD;;;;;;mBAIAC,Q,uBAAW;AACT,WAAO,KAAK1B,KAAZ;AACD,G;;AAGD;;;;;mBAGA2B,U,yBAAa;AACX,WAAO,KAAKjB,QAAL,CAAc,CAAd,CAAP;AACD,G;;AAED;;;;;;mBAIAkB,a,0BAAcC,G,EAAK;AACjB,QAAGA,GAAH,EAAO;AACL,WAAK5C,EAAL,CAAQsC,YAAR,CAAqB,YAArB,EAAmC,EAAnC;AACD,KAFD,MAGK;AACH,WAAKtC,EAAL,CAAQ6C,eAAR,CAAwB,YAAxB;AACD;AACF,G;;AAED;;;;;mBAGAC,M,qBAAS;AACP,SAAKtC,OAAL,CAAaqC,eAAb,CAA6B,UAA7B;AACA,SAAKrC,OAAL,CAAaqC,eAAb,CAA6B,UAA7B;AACA,SAAKR,QAAL,CAAcQ,eAAd,CAA8B,UAA9B;AACA,SAAKR,QAAL,CAAcQ,eAAd,CAA8B,UAA9B;AACA,WAAO,IAAP;AACD,G;;AAGD;;;;;mBAGAE,O,sBAAU;AACR,SAAKvC,OAAL,CAAa8B,YAAb,CAA0B,UAA1B,EAAsC,EAAtC;AACA,SAAK9B,OAAL,CAAa8B,YAAb,CAA0B,UAA1B,EAAsC,IAAtC;AACA,SAAKD,QAAL,CAAcC,YAAd,CAA2B,UAA3B,EAAuC,EAAvC;AACA,SAAKD,QAAL,CAAcC,YAAd,CAA2B,UAA3B,EAAuC,IAAvC;AACA,WAAO,IAAP;AACD,G;;AAGD;;;;;;mBAIAU,S,sBAAUC,a,EAAe;AACvB,WAAO,KAAKxB,QAAL,CAAc,KAAKV,KAAL,GAAa,KAAKmB,IAAL,IAAae,gBAAgB,EAAhB,GAAqB,CAAlC,CAA3B,CAAP;AACD,G;;AAGD;;;;;;mBAIAC,S,sBAAUD,a,EAAe;AACvB,WAAO,KAAKxB,QAAL,CAAc,KAAKV,KAAL,GAAa,KAAKmB,IAAL,IAAae,gBAAgB,EAAhB,GAAqB,CAAlC,CAA3B,CAAP;AACD,G;;AAGD;;;;;;mBAIAE,M,mBAAOC,Y,EAAc;AACnB,SAAKnB,yBAAL,CAA+B,OAA/B;AACA,SAAKA,yBAAL,CAA+B,OAA/B;AACA,SAAKA,yBAAL,CAA+B,UAA/B;AACA,WAAO,yBAAMkB,MAAN,YAAaC,YAAb,CAAP;AACD,G;;AAGD;;;;;;;mBAKAC,M,mBAAOrD,E,EAAI;;AAET,SAAKsD,qBAAL;AACA,SAAKrB,yBAAL,CAA+B,OAA/B;AACA,SAAKA,yBAAL,CAA+B,OAA/B;AACA,SAAKA,yBAAL,CAA+B,UAA/B;;AAEA,SAAKsB,cAAL,CAAoBvD,EAApB;AACA,SAAKI,kBAAL;AACA,SAAKoC,qBAAL;;AAEA,WAAO,IAAP;AACD,G;;AAGD;;;;;;;;mBAMAe,c,2BAAevD,E,EAAI;;AAEjB,SAAKA,EAAL,GAAUA,EAAV;AACA,SAAKwD,UAAL,GAAkB,KAAKxD,EAAL,CAAQyD,aAAR,CAAsB,yBAAtB,CAAlB;AACA,SAAKjD,OAAL,GAAe,KAAKR,EAAL,CAAQyD,aAAR,CAAsB,sBAAtB,CAAf;AACA,SAAKpB,QAAL,GAAgB,KAAKrC,EAAL,CAAQyD,aAAR,CAAsB,uBAAtB,CAAhB;AACA,SAAKC,OAAL,GAAe,KAAK1D,EAAL,CAAQyD,aAAR,CAAsB,sBAAtB,CAAf;AACA,SAAKE,WAAL,GAAmB,KAAKD,OAAL,CAAaD,aAAb,CAA2B,2BAA3B,CAAnB;;AAEA,SAAKG,SAAL,GAAiB,KAAK5D,EAAL,CAAQyD,aAAR,CAAsB,wBAAtB,KAAmD,2BAAY,6CAAZ,CAApE;;AAEA,QAAI,CAAC,KAAKjD,OAAV,EAAmB;AACjB,YAAM,IAAIqD,KAAJ,CAAU,2DAAV,CAAN;AACD;;AAED,QAAI,CAAC,KAAKxB,QAAV,EAAoB;AAClB,YAAM,IAAIwB,KAAJ,CAAU,4DAAV,CAAN;AACD;;AAED,SAAK/B,GAAL,GAAWgC,SAAS,KAAKtD,OAAL,CAAaC,YAAb,CAA0B,KAA1B,CAAT,EAA2C,EAA3C,KAAkD,KAAKqB,GAAlE;AACA,SAAKD,GAAL,GAAWiC,SAAS,KAAKtD,OAAL,CAAaC,YAAb,CAA0B,KAA1B,CAAT,EAA2C,EAA3C,KAAkD,KAAKoB,GAAlE;AACA,SAAKK,IAAL,GAAY4B,SAAS,KAAKtD,OAAL,CAAaC,YAAb,CAA0B,MAA1B,CAAT,EAA4C,EAA5C,KAAmD,KAAKyB,IAApE;;AAEA;AACA;AACA,QAAInB,QAAQ+C,SAAS,KAAKtD,OAAL,CAAaC,YAAb,CAA0B,OAA1B,CAAT,EAA6C,EAA7C,KAAoDqD,SAAS,KAAKtD,OAAL,CAAaC,YAAb,CAA0B,KAA1B,CAAT,EAA2C,EAA3C,CAAhE;AACA,QAAI,CAACsD,MAAMhD,KAAN,CAAL,EAAmB;AACjB,WAAKJ,UAAL;AACA,WAAKc,QAAL,CAAcV,KAAd;AACD;AACF,G;;AAGD;;;;;mBAGAJ,U,yBAAa;;AAEX,SAAKS,KAAL,GAAa,KAAKsC,OAAL,CAAaM,WAA1B;AACA,SAAK1C,MAAL,GAAc,KAAKoC,OAAL,CAAaO,YAA3B;;AAEA,SAAKzC,UAAL,GAAkB,KAAKN,GAAL,GAAW,KAAKmB,QAAL,CAAc2B,WAAzB,GAAuC,KAAK3B,QAAL,CAAc4B,YAAvE;AACA,SAAKrC,oBAAL,GAA4B,KAAKV,GAAL,GAAW,KAAKmB,QAAL,CAAc2B,WAAd,GAA4B,KAAK5C,KAA5C,GAAoD,KAAKiB,QAAL,CAAc4B,YAAd,GAA6B,KAAK3C,MAAlH;;AAEA,QAAI4C,SAAS,sBAAU,KAAKV,UAAf,CAAb;AACA,SAAKrC,UAAL,GAAkB+C,OAAOC,IAAzB;AACA,SAAK9C,SAAL,GAAiB6C,OAAOE,GAAxB;AACD,G;;AAGD;;;;;mBAGA5B,qB,oCAAwB;;AAEtB;AACA,QAAI6B,kBAAkB3C,KAAKC,KAAL,CAAWD,KAAKI,GAAL,CAAS,KAAKP,UAAd,EAA0B,CAA1B,IAA+B,GAA1C,CAAtB;AACA,SAAKmC,OAAL,CAAapB,YAAb,CAA0B,iBAA1B,EAA6C+B,eAA7C;AACA,SAAKV,WAAL,CAAiBrB,YAAjB,CAA8B,OAA9B,EAAuC,YAAY+B,eAAZ,GAA8B,IAArE;;AAEA;AACA,QAAIC,YAAc,KAAK9C,UAAL,GAAkB,CAApB,GAA4B,CAAE,KAAKT,KAAL,GAAa,KAAKe,GAApB,KAA8B,CAAE,KAAKV,KAAL,GAAa,KAAKI,UAApB,KAAqC,KAAKK,GAAL,GAAW,KAAKC,GAArD,CAA9B,CAA5C;AACA,QAAIyC,sBAAuBD,YAAY,KAAKlD,KAAlB,GAA2B,GAArD;AACA,SAAKiB,QAAL,CAAcC,YAAd,CAA2B,OAA3B,EAAoC,WAAWiC,mBAAX,GAAiC,IAArE;AACD,G;;AAGD;;;;;mBAGA1D,oB,mCAAuB;AACrB,+BAAY,KAAKwB,QAAjB,EAA2B,QAA3B,EAAqC,KAAKzB,QAA1C;AACA,+BAAY,KAAKZ,EAAjB,EAAqB,QAArB,EAA+B,KAAKY,QAApC;AACD,G;;AAGD;;;;;;;mBAKAT,2B,0CAA8B;;AAE5B,SAAKqE,kBAAL,GAA0B,KAAKC,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAA1B;AACA,SAAKC,iBAAL,GAAyB,KAAKC,YAAL,CAAkBF,IAAlB,CAAuB,IAAvB,CAAzB;AACA,SAAKG,gBAAL,GAAwB,KAAKC,WAAL,CAAiBJ,IAAjB,CAAsB,IAAtB,CAAxB;;AAEA,SAAKK,aAAL,GAAqB,KAAKC,QAAL,CAAcN,IAAd,CAAmB,IAAnB,CAArB;AACA,SAAKO,iBAAL,GAAyB,KAAKC,YAAL,CAAkBR,IAAlB,CAAuB,IAAvB,CAAzB;AACA,SAAKS,iBAAL,GAAyB,KAAKC,YAAL,CAAkBV,IAAlB,CAAuB,IAAvB,CAAzB;AACA,SAAKW,eAAL,GAAuB,KAAKC,UAAL,CAAgBZ,IAAhB,CAAqB,IAArB,CAAvB;AACA,SAAKa,gBAAL,GAAwB,KAAKC,WAAL,CAAiBd,IAAjB,CAAsB,IAAtB,CAAxB;;AAEA,SAAKe,aAAL,GAAqB,KAAKC,QAAL,CAAchB,IAAd,CAAmB,IAAnB,CAArB;AACA,SAAKiB,eAAL,GAAuB,KAAKC,UAAL,CAAgBlB,IAAhB,CAAqB,IAArB,CAAvB;AACA,SAAKmB,YAAL,GAAoB,KAAKC,OAAL,CAAapB,IAAb,CAAkB,IAAlB,CAApB;;AAEA,SAAKqB,cAAL,GAAsB,KAAKC,SAAL,CAAetB,IAAf,CAAoB,IAApB,CAAtB;;AAEA,SAAKuB,cAAL,GAAsB,KAAKC,SAAL,CAAexB,IAAf,CAAoB,IAApB,CAAtB;;AAEA,SAAKyB,uBAAL,GAA+B,KAAKC,kBAAL,CAAwB1B,IAAxB,CAA6B,IAA7B,CAA/B;AACD,G;;AAGD;;;;;mBAGAtE,kB,iCAAqB;;AAEnB,SAAKoD,UAAL,CAAgB6C,gBAAhB,CAAiC,YAAjC,EAA+C,KAAK7B,kBAApD;AACA,SAAKhB,UAAL,CAAgB6C,gBAAhB,CAAiC,WAAjC,EAA8C,KAAKpB,iBAAnD;;AAEA,SAAKzE,OAAL,CAAa6F,gBAAb,CAA8B,QAA9B,EAAwC,KAAKN,cAA7C;;AAEA,SAAK1D,QAAL,CAAcgE,gBAAd,CAA+B,OAA/B,EAAwC,KAAKZ,aAA7C;AACA,SAAKpD,QAAL,CAAcgE,gBAAd,CAA+B,OAA/B,EAAwC,KAAKtB,aAA7C;;AAEAuB,WAAOD,gBAAP,CAAwB,QAAxB,EAAkC,KAAKJ,cAAvC;AACAK,WAAOD,gBAAP,CAAwB,mBAAxB,EAA6C,KAAKJ,cAAlD;;AAEAM,aAASF,gBAAT,CAA0B,wBAA1B,EAAoD,KAAKF,uBAAzD,EAAkF,IAAlF;AACD,G;;AAGD;;;;;mBAGA7C,qB,oCAAwB;;AAEtB,SAAKE,UAAL,CAAgBgD,mBAAhB,CAAoC,YAApC,EAAkD,KAAKhC,kBAAvD;AACA,SAAKhB,UAAL,CAAgBgD,mBAAhB,CAAoC,WAApC,EAAiD,KAAKvB,iBAAtD;;AAEA,SAAKzE,OAAL,CAAagG,mBAAb,CAAiC,QAAjC,EAA2C,KAAKT,cAAhD;;AAEA,SAAK1D,QAAL,CAAcmE,mBAAd,CAAkC,OAAlC,EAA2C,KAAKf,aAAhD;AACA,SAAKpD,QAAL,CAAcmE,mBAAd,CAAkC,OAAlC,EAA2C,KAAKzB,aAAhD;;AAEAuB,WAAOE,mBAAP,CAA2B,QAA3B,EAAqC,KAAKP,cAA1C;AACAK,WAAOE,mBAAP,CAA2B,mBAA3B,EAAgD,KAAKP,cAArD;;AAEAM,aAASC,mBAAT,CAA6B,wBAA7B,EAAuD,KAAKL,uBAA5D;AACD,G;;AAGD;;;;;;;;;mBAOAzF,sB,mCAAuBH,I,EAAM;;AAE3B;AACA,YAAQA,IAAR;AACE,WAAK,OAAL;AACE+F,eAAOD,gBAAP,CAAwB,WAAxB,EAAqC,KAAKlB,iBAA1C;AACAmB,eAAOD,gBAAP,CAAwB,UAAxB,EAAoC,KAAKd,gBAAzC;AACAe,eAAOD,gBAAP,CAAwB,SAAxB,EAAmC,KAAKhB,eAAxC;AACA;AACF,WAAK,OAAL;AACEiB,eAAOD,gBAAP,CAAwB,WAAxB,EAAqC,KAAK1B,iBAA1C;AACA2B,eAAOD,gBAAP,CAAwB,UAAxB,EAAoC,KAAKxB,gBAAzC;AACA;AACF,WAAK,UAAL;AACEyB,eAAOD,gBAAP,CAAwB,SAAxB,EAAmC,KAAKV,eAAxC;AACA,aAAKtD,QAAL,CAAcgE,gBAAd,CAA+B,MAA/B,EAAuC,KAAKR,YAA5C;AACA;AAbJ;AAeD,G;;AAGD;;;;;;mBAIA5D,yB,sCAA0B1B,I,EAAM;;AAE9B;AACA,YAAQA,IAAR;AACE,WAAK,OAAL;AACE+F,eAAOE,mBAAP,CAA2B,WAA3B,EAAwC,KAAKrB,iBAA7C;AACAmB,eAAOE,mBAAP,CAA2B,SAA3B,EAAsC,KAAKnB,eAA3C;AACA;AACF,WAAK,OAAL;AACEiB,eAAOE,mBAAP,CAA2B,WAA3B,EAAwC,KAAK7B,iBAA7C;AACA2B,eAAOE,mBAAP,CAA2B,UAA3B,EAAuC,KAAK3B,gBAA5C;AACA;AACF,WAAK,UAAL;AACEyB,eAAOE,mBAAP,CAA2B,SAA3B,EAAsC,KAAKb,eAA3C;AACA,aAAKtD,QAAL,CAAcmE,mBAAd,CAAkC,MAAlC,EAA0C,KAAKX,YAA/C;AACA;AAZJ;AAcD,G;;AAGD;;;;;;;mBAKAtD,kB,+BAAmBxB,K,EAAO0F,S,EAAWC,U,EAAY;;AAE/C,QAAI3F,MAAM4F,MAAN,GAAe,CAAnB,EAAsB;AACpB,aAAO5F,KAAP;AACD;;AAED,QAAI6F,aAAa7F,QAAQ,CAAR,GAAY,IAAZ,GAAmB,KAApC;;AAEAA,YAAQW,KAAKmF,GAAL,CAAS9F,KAAT,CAAR;AACA0F,gBAAYA,aAAa,KAAKK,iBAA9B;AACAJ,iBAAaA,cAAc,KAAKK,kBAAhC;;AAEA,QAAIC,IAAIN,WAAWC,MAAX,GAAoB,CAA5B;;AAEAF,gBAAY/E,KAAKuF,GAAL,CAAS,EAAT,EAAaR,SAAb,CAAZ;;AAEA,SAAKO,CAAL,EAAQA,KAAK,CAAb,EAAgBA,GAAhB,EAAqB;;AAEnB,UAAIE,OAAOxF,KAAKuF,GAAL,CAAS,EAAT,EAAa,CAACD,IAAI,CAAL,IAAU,CAAvB,CAAX;;AAEA,UAAIE,QAAQnG,KAAZ,EAAmB;;AAEjBA,gBAAQW,KAAKC,KAAL,CAAWZ,QAAQ0F,SAAR,GAAoBS,IAA/B,IAAuCT,SAA/C;;AAEA;AACA;AACA,YAAK1F,UAAU,IAAX,IAAqBiG,IAAIN,WAAWC,MAAX,GAAoB,CAAjD,EAAqD;AACnD5F,kBAAQ,CAAR;AACAiG;AACD;;AAEDjG,iBAAS2F,WAAWM,CAAX,CAAT;;AAEA;AACD;AACF;;AAED,WAAO,CAACJ,aAAa,GAAb,GAAmB,EAApB,IAA0B7F,KAAjC;AACD,G;;AAGD;;;;;;mBAIA0D,a,0BAAc0C,C,EAAG;;AAEf,QAAI,KAAK3G,OAAL,CAAaC,YAAb,CAA0B,UAA1B,MAA0C,IAA9C,EAAoD;AAClD;AACD;;AAED0G,MAAEC,cAAF;;AAEA,SAAK/G,KAAL,CAAW,KAAKa,GAAL,GAAWiG,EAAEE,OAAF,CAAU,CAAV,EAAaC,KAAxB,GAAgCH,EAAEE,OAAF,CAAU,CAAV,EAAaE,KAAxD,EAA+D,OAA/D;AACD,G;;AAGD;;;;;;mBAIA3C,Y,yBAAauC,C,EAAG;;AAEd,QAAI,CAAC,KAAKvG,QAAV,EAAoB;AAClB;AACD;;AAEDuG,MAAEC,cAAF;;AAEA,SAAKpG,IAAL,CAAU,KAAKE,GAAL,GAAWiG,EAAEE,OAAF,CAAU,CAAV,EAAaC,KAAxB,GAAgCH,EAAEE,OAAF,CAAU,CAAV,EAAaE,KAAvD;AACD,G;;AAGD;;;;;;mBAIAzC,W,wBAAYqC,C,EAAG;;AAEb,QAAI,CAAC,KAAKvG,QAAV,EAAoB;AAClB;AACD;;AAEDuG,MAAEC,cAAF;;AAEA,SAAKrF,IAAL,CAAU,OAAV;AACD,G;;AAGD;;;;;;mBAIAmD,Y,yBAAaiC,C,EAAG;;AAEd,QAAI,KAAK3G,OAAL,CAAaC,YAAb,CAA0B,UAA1B,MAA0C,IAA9C,EAAoD;AAClD;AACD;;AAED0G,MAAEC,cAAF;;AAEA,SAAK/G,KAAL,CAAW,KAAKa,GAAL,GAAWiG,EAAEG,KAAb,GAAqBH,EAAEI,KAAlC,EAAyC,OAAzC;AACD,G;;AAGD;;;;;;mBAIAnC,Y,yBAAa+B,C,EAAG;;AAEd,QAAI,CAAC,KAAKvG,QAAV,EAAoB;AAClB;AACD;;AAEDuG,MAAEC,cAAF;;AAEA,SAAKpG,IAAL,CAAU,KAAKE,GAAL,GAAWiG,EAAEG,KAAb,GAAqBH,EAAEI,KAAjC;AACD,G;;AAGD;;;;;;mBAIAjC,U,yBAAa;;AAEX,QAAI,CAAC,KAAK1E,QAAV,EAAoB;AAClB;AACD;;AAED,SAAKmB,IAAL,CAAU,OAAV;AACD,G;;AAGD;;;;;;mBAIAyD,W,0BAAc,CAKb;AAJC;AACA;AACA;AACA;;;AAIF;;;;;;mBAIAY,kB,+BAAmBe,C,EAAG;AACpB,QAAGA,EAAEK,MAAF,CAASC,QAAT,CAAkB,KAAKzH,EAAvB,CAAH,EAA+B;AAC7BsG,aAAOoB,UAAP,CAAkB,YAAW;AAC3B,aAAKxB,SAAL;AACD,OAFiB,CAEhBxB,IAFgB,CAEX,IAFW,CAAlB,EAEa,CAFb;AAGD;AACF,G;;AAGD;;;;;;mBAIAwB,S,wBAAY;AACV,SAAKvF,UAAL;AACA,SAAK6B,qBAAL;AACD,G;;AAGD;;;;;;mBAIAkD,Q,uBAAW;AACT,SAAKrF,KAAL,CAAW,IAAX,EAAiB,UAAjB;AACD,G;;AAGD;;;;;;;;mBAMAuF,U,uBAAWuB,C,EAAG;AACZ,QAAIA,EAAEQ,OAAF,KAAc,EAAd,IAAoBR,EAAEQ,OAAF,KAAc,EAAtC,EAA0C;AAAE;AAC1C,WAAK3E,SAAL,CAAemE,EAAES,QAAjB;AACD,KAFD,MAGK,IAAIT,EAAEQ,OAAF,KAAc,EAAd,IAAoBR,EAAEQ,OAAF,KAAc,EAAtC,EAA0C;AAAE;AAC/C,WAAKzE,SAAL,CAAeiE,EAAES,QAAjB;AACD,KAFI,MAGA,IAAIT,EAAEQ,OAAF,KAAc,EAAlB,EAAsB;AAAE;AAC3B,WAAK3E,SAAL,CAAe,IAAf;AACD,KAFI,MAGA,IAAImE,EAAEQ,OAAF,KAAc,EAAlB,EAAsB;AAAE;AAC3B,WAAKzE,SAAL,CAAe,IAAf;AACD,KAFI,MAGA,IAAIiE,EAAEQ,OAAF,KAAc,EAAlB,EAAsB;AAAE;AAC3B,WAAKlG,QAAL,CAAc,KAAKI,GAAnB;AACD,KAFI,MAGA,IAAIsF,EAAEQ,OAAF,KAAc,EAAlB,EAAsB;AAAE;AAC3B,WAAKlG,QAAL,CAAc,KAAKK,GAAnB;AACD;AACF,G;;AAGD;;;;;;mBAIAgE,O,sBAAU;AACR,SAAK/D,IAAL,CAAU,UAAV;AACD,G;;AAGD;;;;;;mBAIAiE,S,sBAAUmB,C,EAAG;AACX,QAAIA,EAAEK,MAAF,CAASzG,KAAT,KAAmB,KAAKA,KAA5B,EAAmC;AACjC,WAAKU,QAAL,CAAc0F,EAAEK,MAAF,CAASzG,KAAvB;AACD;AACD,KAAC,KAAKiB,QAAL,IAAiBlC,IAAlB,EAAwB,KAAKiB,KAA7B,EAAoC,IAApC;AACD,G;;AAGD;;;;;;mBAIAiE,Q,qBAASmC,C,EAAG;AACVA,MAAEC,cAAF;AACD,G;;AAGD;;;;;;mBAIAS,c,2BAAeV,C,EAAG;;AAEhB,QAAI,yBAAUA,EAAEK,MAAZ,EAAoB,KAAKxH,EAAzB,CAAJ,EAAkC;AAChC,WAAK8F,OAAL;AACD;AACF,G;;;;;AAIH;;;;;;AAIA/F,OAAO+H,SAAP,CAAiBC,kBAAjB,GAAsC,CAAC,KAAD,EAAQ,UAAR,EAAoB,YAApB,EAAkC,UAAlC,EAA8C,cAA9C,CAAtC;;AAGA;;;;;;AAMAhI,OAAO+H,SAAP,CAAiBE,QAAjB,GAA4B;AAC1BhI,MAAI,IADsB;AAE1B4D,aAAW,IAFe;AAG1BJ,cAAY,IAHc;AAI1BhD,WAAS,IAJiB;AAK1B6B,YAAU,IALgB;AAM1BqB,WAAS,IANiB;AAO1BC,eAAa,IAPa;AAQ1B/C,YAAU,KARgB;AAS1BM,OAAK,IATqB;AAU1B+G,cAAY,IAVc;AAW1BjG,YAAU,IAXgB;AAY1BG,gBAAc,IAZY;AAa1B7B,YAAU,CAbgB;AAc1Bc,SAAO,CAdmB;AAe1BE,UAAQ,CAfkB;AAgB1BQ,OAAK,CAhBqB;AAiB1BD,OAAK,CAjBqB;AAkB1BK,QAAM,CAlBoB;AAmB1BnB,SAAO,CAnBmB;AAoB1BQ,cAAY,CApBc;AAqB1BJ,cAAY,CArBc;AAsB1BE,aAAW,CAtBe;AAuB1BO,wBAAsB,CAvBI;AAwB1BkF,qBAAmB,CAxBO;AAyB1BC,sBAAoB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,CAzBM;AA0B1BjG,WAAS,IA1BiB;AA2B1B0D,sBAAoB,IA3BM;AA4B1BG,qBAAmB,IA5BO;AA6B1BE,oBAAkB,IA7BQ;AA8B1BI,qBAAmB,IA9BO;AA+B1BE,qBAAmB,IA/BO;AAgC1BE,mBAAiB,IAhCS;AAiC1BE,oBAAkB,IAjCQ;AAkC1BE,iBAAe,IAlCW;AAmC1BE,mBAAiB,IAnCS;AAoC1BE,gBAAc,IApCY;AAqC1BE,kBAAgB,IArCU;AAsC1BE,kBAAgB,IAtCU;AAuC1BlB,iBAAe,IAvCW;AAwC1BoB,2BAAyB;AAxCC,CAA5B;;AA2CA,qBAAMpG,OAAO+H,SAAb;;kBAEe/H,M","file":"slider.js","sourcesContent":["/**\n * # Slider\n * A slider for number inputs.\n *\n * @example\n * new Slider(el, {\n *   // Optional. Slide along the x or y-axis?\n *   isX: true,\n *   // onChange callback\n *   onChange: function(inst, val){},\n * });\n *\n * @module components/slider.js\n */\nimport BaseComponent from './base';\nimport toggleClass from '../helpers/dom/toggle-class';\nimport getOffset from '../helpers/dom/offset';\nimport hasParent from '../helpers/traversal/has-parent';\nimport messaging from '../mixins/messaging';\nimport mixin from '../helpers/util/mixin';\nimport validation from '../mixins/validation';\nimport makeElement from '../helpers/dom/make-element';\n\nconst noop = function() {};\n\nclass Slider extends BaseComponent {\n\n  /**\n   * Slider constructor.\n   * @param {Element} el\n   * @param {Object} params\n   */\n  constructor(el, params = {}) {\n\n    params.elRequired = true;\n\n    if (!super(el, params)) {\n      return;\n    }\n\n    this._bindEventListenerCallbacks();\n    this._addEventListeners();\n  }\n\n\n  /**\n   * Start the slider moving.\n   * @param {Number} position The position of the pointer.\n   * @param {String} type Optional Which type of events to listen for.\n   */\n  start(position, type) {\n\n    if (this.inputEl.getAttribute('disabled') !== null) {\n      return this;\n    }\n\n    this._addMoveEventListeners(type || 'mouse');\n    this._cacheSize();\n    this.isActive = true;\n    this._updateActiveClasses();\n    this._oldVal = this.value;\n    this.move(position);\n\n    return this;\n  }\n\n\n  /**\n   * Move the value to a given position\n   * @param {Number} position\n   * @param {Boolean} force Force the move Optional\n   */\n  move(position, force) {\n\n    // Noop if we haven't yet started dragging\n    if ((!position || !this.isActive) && !force) {\n      return this;\n    }\n\n    // Treat positions beyond the boundaries as the boundaries\n    if (this.isX) {\n\n      // Too far left\n      if (position < this.offsetLeft) {\n        position = this.offsetLeft;\n      }\n      // Too far right\n      else if (position > this.offsetLeft + this.width) {\n        position = this.offsetLeft + this.width;\n      }\n    } else {\n\n      // Too far top\n      if (position < this.offsetTop) {\n        position = this.offsetTop;\n      }\n      // Too far bottom\n      else if (position > this.offsetTop + this.height) {\n        position = this.offsetTop + this.height;\n      }\n    }\n\n    // The percentage of the new position relative to slider-container width or height.\n    var percentage = this.isX ? (position - this.offsetLeft) / (this.width - this.handleSize) : (position - this.offsetTop) / this.height;\n\n    // The value of the input as a percentage of the value range.\n    return this.setValue(Math.round((percentage - this.handleSizePercentage / 2) * (this.max - this.min)) + this.min);\n  }\n\n\n  /**\n   * Stop listening to movements.\n   * @param {String} type Optional Which type of events to listen for.\n   */\n  stop(type) {\n\n    this.isActive = false;\n\n    if(this._oldVal !== this.value) {\n      (this.onChange || noop)(this.value, this);\n    }\n\n    this._updateActiveClasses();\n    this._removeMoveEventListeners(type || 'mouse');\n\n    return this;\n  }\n\n\n  /**\n   * Set the value of the handle.\n   * @param {Number} value\n   */\n  setValue(value) {\n\n    // Move in increments if we have a defined step size\n    if (this.step) {\n      value = value - (value % this.step);\n    }\n\n    // Check bounds of the new value\n    if (value > this.max) {\n      value = this.max;\n    } else if (value < this.min) {\n      value = this.min;\n    }\n\n    // If there is an onWillChange callback, run it. If it returns\n    // false, then this new value should be considered invalid.\n    if (typeof this.onWillChange === 'function') {\n      var change = this.onWillChange(value, this);\n      if (typeof change === 'number') {\n        value = change;\n      }\n    }\n\n    // Store value\n    this.value = value;\n\n    // Update elements\n    this.inputEl.value = this.value;\n    this.handleEl.setAttribute('data-value', this._truncateValueText(this.value));\n    this.handleEl.setAttribute('aria-valuenow', this._truncateValueText(this.value));\n    this.handleEl.setAttribute('aria-valuetext', this._truncateValueText(this.value));\n\n    // Set the percentage\n    this.percentage = (this.value - this.min) / (this.max - this.min);\n\n    // Update the position of the handle\n    this._updateHandlePosition();\n\n    return this;\n  }\n\n\n  /**\n   * Get the value.\n   * @return {Number}\n   */\n  getValue() {\n    return this.value;\n  }\n\n\n  /**\n   * Clear the value.\n   */\n  clearValue() {\n    return this.setValue(0);\n  }\n\n  /**\n   * Set/reset error state\n   * @param {Boolean} true: set error state, false: reset\n   */\n  setErrorState(opt) {\n    if(opt){\n      this.el.setAttribute('data-error', '');\n    }\n    else {\n      this.el.removeAttribute('data-error');\n    }\n  }\n\n  /**\n   * Enable the input.\n   */\n  enable() {\n    this.inputEl.removeAttribute('disabled');\n    this.inputEl.removeAttribute('tabindex');\n    this.handleEl.removeAttribute('disabled');\n    this.handleEl.removeAttribute('tabindex');\n    return this;\n  }\n\n\n  /**\n   * Disable the input.\n   */\n  disable() {\n    this.inputEl.setAttribute('disabled', '');\n    this.inputEl.setAttribute('tabindex', '-1');\n    this.handleEl.setAttribute('disabled', '');\n    this.handleEl.setAttribute('tabindex', '-1');\n    return this;\n  }\n\n\n  /**\n   * Increment the value by the step size.\n   * @param {Boolean} useMultiplier Optional Increment by a multiplied version of the step\n   */\n  increment(useMultiplier) {\n    return this.setValue(this.value + this.step * (useMultiplier ? 10 : 1));\n  }\n\n\n  /**\n   * Decrement the value by the step size.\n   * @param {Boolean} useMultiplier Optional Increment by a multiplied version of the step\n   */\n  decrement(useMultiplier) {\n    return this.setValue(this.value - this.step * (useMultiplier ? 10 : 1));\n  }\n\n\n  /**\n   * Remove the element from the DOM and prepare for garbage collection by dereferencing values.\n   * @param {Boolean} leaveElement Leave the element intact.\n   */\n  remove(leaveElement) {\n    this._removeMoveEventListeners('touch');\n    this._removeMoveEventListeners('mouse');\n    this._removeMoveEventListeners('keyboard');\n    return super.remove(leaveElement);\n  }\n\n\n  /**\n   * Update the component to use a new element or reparse from\n   * the existing element.\n   * @param {Element} el Optional\n   */\n  update(el) {\n\n    this._removeEventListeners();\n    this._removeMoveEventListeners('touch');\n    this._removeMoveEventListeners('mouse');\n    this._removeMoveEventListeners('keyboard');\n\n    this._cacheElements(el);\n    this._addEventListeners();\n    this._updateHandlePosition();\n\n    return this;\n  }\n\n\n  /**\n   * Store a reference to the whole slider, as well as the\n   * input element. Also, get some default values from the input\n   * element (min, max, steps).\n   * @param {Element} el\n   */\n  _cacheElements(el) {\n\n    this.el = el;\n    this.controlsEl = this.el.querySelector('.spark-slider__controls');\n    this.inputEl = this.el.querySelector('input[type=\"number\"]');\n    this.handleEl = this.el.querySelector('.spark-slider__handle');\n    this.trackEl = this.el.querySelector('.spark-slider__track');\n    this.trackFillEl = this.trackEl.querySelector('.spark-slider__track-fill');\n\n    this.messageEl = this.el.querySelector('.spark-slider__message') || makeElement('<span class=\"spark-slider__message\"></span>');\n\n    if (!this.inputEl) {\n      throw new Error('Tried to create a slider instance without a number input.');\n    }\n\n    if (!this.handleEl) {\n      throw new Error('Tried to create a slider instance without a handle button.');\n    }\n\n    this.min = parseInt(this.inputEl.getAttribute('min'), 10) || this.min;\n    this.max = parseInt(this.inputEl.getAttribute('max'), 10) || this.max;\n    this.step = parseInt(this.inputEl.getAttribute('step'), 10) || this.step;\n\n    // If we have a default value, set it after we cache the size of the element.\n    // We have to do that first so we know the bounds of the slider.\n    var value = parseInt(this.inputEl.getAttribute('value'), 10) || parseInt(this.inputEl.getAttribute('min'), 10);\n    if (!isNaN(value)) {\n      this._cacheSize();\n      this.setValue(value);\n    }\n  }\n\n\n  /**\n   * Save the element dimensions.\n   */\n  _cacheSize() {\n\n    this.width = this.trackEl.offsetWidth;\n    this.height = this.trackEl.offsetHeight;\n\n    this.handleSize = this.isX ? this.handleEl.offsetWidth : this.handleEl.offsetHeight;\n    this.handleSizePercentage = this.isX ? this.handleEl.offsetWidth / this.width : this.handleEl.offsetHeight / this.height;\n\n    var offset = getOffset(this.controlsEl);\n    this.offsetLeft = offset.left;\n    this.offsetTop = offset.top;\n  }\n\n\n  /**\n   * Set the position of the handle.\n   */\n  _updateHandlePosition() {\n\n    // Track and Track-Fill elements\n    let trackPercentage = Math.round(Math.min(this.percentage, 1) * 100);\n    this.trackEl.setAttribute('data-percentage', trackPercentage);\n    this.trackFillEl.setAttribute('style', 'width: ' + trackPercentage + '%;');\n\n    // Handle position\n    let handlePos = ( this.handleSize / 2 ) + ( ( this.value - this.min ) * ( ( this.width - this.handleSize ) / ( this.max - this.min ) ) );\n    let handlePosPercentage = (handlePos / this.width) * 100;\n    this.handleEl.setAttribute('style', 'left: ' + handlePosPercentage + '%;');\n  }\n\n\n  /**\n   * Update the active class on the handle.\n   */\n  _updateActiveClasses() {\n    toggleClass(this.handleEl, 'active', this.isActive);\n    toggleClass(this.el, 'active', this.isActive);\n  }\n\n\n  /**\n   * Create bound versions of event listener callbacks and store them.\n   * Otherwise we can't unbind from these events later because the\n   * function signatures won't match.\n   */\n  _bindEventListenerCallbacks() {\n\n    this._onTouchStartBound = this._onTouchStart.bind(this);\n    this._onTouchMoveBound = this._onTouchMove.bind(this);\n    this._onTouchEndBound = this._onTouchEnd.bind(this);\n\n    this._onClickBound = this._onClick.bind(this);\n    this._onMouseDownBound = this._onMouseDown.bind(this);\n    this._onMouseMoveBound = this._onMouseMove.bind(this);\n    this._onMouseUpBound = this._onMouseUp.bind(this);\n    this._onMouseOutBound = this._onMouseOut.bind(this);\n\n    this._onFocusBound = this._onFocus.bind(this);\n    this._onKeydownBound = this._onKeydown.bind(this);\n    this._onBlurBound = this._onBlur.bind(this);\n\n    this._onChangeBound = this._onChange.bind(this);\n\n    this._onResizeBound = this._onResize.bind(this);\n\n    this._onVisibleChildrenBound = this._onVisibleChildren.bind(this);\n  }\n\n\n  /**\n   * Add event listeners for touchstart and mouse click.\n   */\n  _addEventListeners() {\n\n    this.controlsEl.addEventListener('touchstart', this._onTouchStartBound);\n    this.controlsEl.addEventListener('mousedown', this._onMouseDownBound);\n\n    this.inputEl.addEventListener('change', this._onChangeBound);\n\n    this.handleEl.addEventListener('focus', this._onFocusBound);\n    this.handleEl.addEventListener('click', this._onClickBound);\n\n    window.addEventListener('resize', this._onResizeBound);\n    window.addEventListener('orientationchange', this._onResizeBound);\n\n    document.addEventListener('spark.visible-children', this._onVisibleChildrenBound, true);\n  }\n\n\n  /**\n   * Remove event listeners for touchstart and mouse click.\n   */\n  _removeEventListeners() {\n\n    this.controlsEl.removeEventListener('touchstart', this._onTouchStartBound);\n    this.controlsEl.removeEventListener('mousedown', this._onMouseDownBound);\n\n    this.inputEl.removeEventListener('change', this._onChangeBound);\n\n    this.handleEl.removeEventListener('focus', this._onFocusBound);\n    this.handleEl.removeEventListener('click', this._onClickBound);\n\n    window.removeEventListener('resize', this._onResizeBound);\n    window.removeEventListener('orientationchange', this._onResizeBound);\n\n    document.removeEventListener('spark.visible-children', this._onVisibleChildrenBound);\n  }\n\n\n  /**\n   * Add event listeners for touchmove, touchend, mousemove and mouseup.\n   * We add these to the window so that the user can move off of the element\n   * but keep dragging the slider handle. Otherwise it's really hard to\n   * use the slider unless it's massive.\n   * @param {String} type Which type of listeners to add\n   */\n  _addMoveEventListeners(type) {\n\n    // Only listen for events of the type we asked for.\n    switch (type) {\n      case 'mouse':\n        window.addEventListener('mousemove', this._onMouseMoveBound);\n        window.addEventListener('mouseout', this._onMouseOutBound);\n        window.addEventListener('mouseup', this._onMouseUpBound);\n        break;\n      case 'touch':\n        window.addEventListener('touchmove', this._onTouchMoveBound);\n        window.addEventListener('touchend', this._onTouchEndBound);\n        break;\n      case 'keyboard':\n        window.addEventListener('keydown', this._onKeydownBound);\n        this.handleEl.addEventListener('blur', this._onBlurBound);\n        break;\n    }\n  }\n\n\n  /**\n   * Remove event listeners for move events.\n   * @param {String} type Which type of listeners to remove\n   */\n  _removeMoveEventListeners(type) {\n\n    // Only unbind events of the type we asked for.\n    switch (type) {\n      case 'mouse':\n        window.removeEventListener('mousemove', this._onMouseMoveBound);\n        window.removeEventListener('mouseup', this._onMouseUpBound);\n        break;\n      case 'touch':\n        window.removeEventListener('touchmove', this._onTouchMoveBound);\n        window.removeEventListener('touchend', this._onTouchEndBound);\n        break;\n      case 'keyboard':\n        window.removeEventListener('keydown', this._onKeydownBound);\n        this.handleEl.removeEventListener('blur', this._onBlurBound);\n        break;\n    }\n  }\n\n\n  /**\n   * Truncate value text to fit.\n   * @param {String} value\n   * @return {String}\n   */\n  _truncateValueText(value, precision, characters) {\n\n    if (value.length < 5) {\n      return value;\n    }\n\n    var isNegative = value < 0 ? true : false;\n\n    value = Math.abs(value);\n    precision = precision || this.truncatePrecision;\n    characters = characters || this.truncateCharacters;\n\n    var i = characters.length - 1;\n\n    precision = Math.pow(10, precision);\n\n    for (i; i >= 0; i--) {\n\n      var size = Math.pow(10, (i + 1) * 3);\n\n      if (size <= value) {\n\n        value = Math.round(value * precision / size) / precision;\n\n        // @todo: what is this doing? i can't remember how we would ever\n        // end up inside this condition.\n        if ((value === 1000) && (i < characters.length - 1)) {\n          value = 1;\n          i++;\n        }\n\n        value += characters[i];\n\n        break;\n      }\n    }\n\n    return (isNegative ? '-' : '') + value;\n  }\n\n\n  /**\n   * When the touch starts, start the slider.\n   * @param {Object} e\n   */\n  _onTouchStart(e) {\n\n    if (this.inputEl.getAttribute('disabled') !== null) {\n      return;\n    }\n\n    e.preventDefault();\n\n    this.start(this.isX ? e.touches[0].pageX : e.touches[0].pageY, 'touch');\n  }\n\n\n  /**\n   * When the window fires a touchmove event, adjust our value accordingly\n   * @param {Object} e\n   */\n  _onTouchMove(e) {\n\n    if (!this.isActive) {\n      return;\n    }\n\n    e.preventDefault();\n\n    this.move(this.isX ? e.touches[0].pageX : e.touches[0].pageY);\n  }\n\n\n  /**\n   * When the window fires a touchend event, stop tracking touches\n   * @param {Object} e\n   */\n  _onTouchEnd(e) {\n\n    if (!this.isActive) {\n      return;\n    }\n\n    e.preventDefault();\n\n    this.stop('touch');\n  }\n\n\n  /**\n   * When the mouse presses down, start the slider.\n   * @param {Object} e\n   */\n  _onMouseDown(e) {\n\n    if (this.inputEl.getAttribute('disabled') !== null) {\n      return;\n    }\n\n    e.preventDefault();\n\n    this.start(this.isX ? e.pageX : e.pageY, 'mouse');\n  }\n\n\n  /**\n   * When the window fires a mousemove event, adjust our value accordingly\n   * @param {Object} e\n   */\n  _onMouseMove(e) {\n\n    if (!this.isActive) {\n      return;\n    }\n\n    e.preventDefault();\n\n    this.move(this.isX ? e.pageX : e.pageY);\n  }\n\n\n  /**\n   * When the window fires a mouseup event, stop tracking\n   * @param {Object} e\n   */\n  _onMouseUp() {\n\n    if (!this.isActive) {\n      return;\n    }\n\n    this.stop('mouse');\n  }\n\n\n  /**\n   * When the window fires a mouseout event, stop tracking if it was the html element.\n   * @param {Object} e\n   */\n  _onMouseOut() {\n    // @todo: make this work\n    // if (e.relatedTarget === doc.body.parentNode) {\n    //   this.stop('mouse');\n    // }\n  }\n\n\n  /**\n   * Handle the spark.visible-children event\n   * @param {Object} e\n   */\n  _onVisibleChildren(e) {\n    if(e.target.contains(this.el)) {\n      window.setTimeout(function() {\n        this._onResize();\n      }.bind(this),0);\n    }\n  }\n\n\n  /**\n   * When the window resizes, cache size values for the slider.\n   * @param {Object} e\n   */\n  _onResize() {\n    this._cacheSize();\n    this._updateHandlePosition();\n  }\n\n\n  /**\n   * When the element receives focus, start listening for keyboard events\n   * @param {Object} e\n   */\n  _onFocus() {\n    this.start(null, 'keyboard');\n  }\n\n\n  /**\n   * When a key is pressed, see if it's one of the Arrow, Page up, Page down, Home\n   * or End keys move the handle accordingly. If the shift key is pressed in combination\n   * with the arrow keys, we'll increment and decrement by bigger values.\n   * @param {Object} e\n   */\n  _onKeydown(e) {\n    if (e.keyCode === 39 || e.keyCode === 38) { // Right or Up arrow\n      this.increment(e.shiftKey);\n    }\n    else if (e.keyCode === 37 || e.keyCode === 40) { // Left or down arrow\n      this.decrement(e.shiftKey);\n    }\n    else if (e.keyCode === 33) { // Page Up\n      this.increment(true);\n    }\n    else if (e.keyCode === 34) { // Page Down\n      this.decrement(true);\n    }\n    else if (e.keyCode === 35) { // End\n      this.setValue(this.max);\n    }\n    else if (e.keyCode === 36) { // Home\n      this.setValue(this.min);\n    }\n  }\n\n\n  /**\n   * When the element loses focus, stop listening for keyboard events\n   * @param {Object} e\n   */\n  _onBlur() {\n    this.stop('keyboard');\n  }\n\n\n  /**\n   * When the input value changes, set our internal value if it's not already our value.\n   * @param {Object} e\n   */\n  _onChange(e) {\n    if (e.target.value !== this.value) {\n      this.setValue(e.target.value);\n    }\n    (this.onChange || noop)(this.value, this);\n  }\n\n\n  /**\n   * Prevent click events on the button. This way we don't accidentally submit the form.\n   * @param {Object} e\n   */\n  _onClick(e) {\n    e.preventDefault();\n  }\n\n\n  /**\n   * When the window is clicked and the element isn't part of the slider, trigger a blur.\n   * @param {Object} e\n   */\n  _onWindowClick(e) {\n\n    if (hasParent(e.target, this.el)) {\n      this._onBlur();\n    }\n  }\n}\n\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\nSlider.prototype._whitelistedParams = ['isX', 'validate', 'onValidate', 'onChange', 'onWillChange'];\n\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nSlider.prototype.defaults = {\n  el: null,\n  messageEl: null,\n  controlsEl: null,\n  inputEl: null,\n  handleEl: null,\n  trackEl: null,\n  trackFillEl: null,\n  isActive: false,\n  isX: true,\n  onValidate: null,\n  onChange: null,\n  onWillChange: null,\n  position: 0,\n  width: 0,\n  height: 0,\n  min: 0,\n  max: 0,\n  step: 1,\n  value: 0,\n  percentage: 0,\n  offsetLeft: 0,\n  offsetTop: 0,\n  handleSizePercentage: 0,\n  truncatePrecision: 0,\n  truncateCharacters: ['k', 'm', 'b', 't'],\n  _oldVal: null,\n  _onTouchStartBound: null,\n  _onTouchMoveBound: null,\n  _onTouchEndBound: null,\n  _onMouseDownBound: null,\n  _onMouseMoveBound: null,\n  _onMouseUpBound: null,\n  _onMouseOutBound: null,\n  _onFocusBound: null,\n  _onKeydownBound: null,\n  _onBlurBound: null,\n  _onChangeBound: null,\n  _onResizeBound: null,\n  _onClickBound: null,\n  _onVisibleChildrenBound: null\n};\n\nmixin(Slider.prototype, messaging, validation);\n\nexport default Slider;\n"]}