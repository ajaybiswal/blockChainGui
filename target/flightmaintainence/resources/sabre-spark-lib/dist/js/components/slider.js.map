{"version":3,"sources":["js/dist/components/node_modules/browser-pack/_prelude.js","js/dist/components/js/dist/components/base.js","js/dist/components/js/dist/components/slider.js","js/dist/components/js/dist/helpers/animation/height.js","js/dist/components/js/dist/helpers/dom/add-class.js","js/dist/components/js/dist/helpers/dom/has-class.js","js/dist/components/js/dist/helpers/dom/make-element.js","js/dist/components/js/dist/helpers/dom/offset.js","js/dist/components/js/dist/helpers/dom/outer-height.js","js/dist/components/js/dist/helpers/dom/remove-class.js","js/dist/components/js/dist/helpers/dom/toggle-class.js","js/dist/components/js/dist/helpers/traversal/has-parent.js","js/dist/components/js/dist/helpers/util/each.js","js/dist/components/js/dist/helpers/util/mixin.js","js/dist/components/js/dist/helpers/util/trim.js","js/dist/components/js/dist/mixins/messaging.js","js/dist/components/js/dist/mixins/validation.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACn3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"slider.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _each = require('../helpers/util/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /**\n                                                                                                                                                           * # Base Component\n                                                                                                                                                           * The base class for Spark JS components. This class should never be\n                                                                                                                                                           * instantiated directly.\n                                                                                                                                                           *\n                                                                                                                                                           * @param {Element} el\n                                                                                                                                                           * @param {Object} params\n                                                                                                                                                           *\n                                                                                                                                                           * @module components/base.js\n                                                                                                                                                           */\n\nvar noop = function noop() {};\n\nvar Base = function () {\n\n  /**\n   * Set parameters and cache elements.\n   */\n  function Base(el) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Base);\n\n    if (params.elRequired && !el) {\n      return;\n    }\n\n    this.setParams(this.defaults || {}, true);\n    this.setParams(params);\n    (this._cacheElements || noop).call(this, el, params);\n    (this._parseParams || noop).call(this);\n  }\n\n  /**\n   * Remove the component from the DOM and prepare for garbage collection by dereferencing values.\n   * @param {Boolean} leaveElement Leave the element intact.\n   */\n\n\n  Base.prototype.remove = function remove(leaveElement) {\n\n    if (this._removeEventListeners) {\n      this._removeEventListeners();\n    }\n\n    if (!leaveElement && this.el && this.el.parentNode) {\n      this.el.parentNode.removeChild(this.el);\n    }\n\n    this.unsetParams(this.defaults);\n\n    return this;\n  };\n\n  /**\n   * Update the component to use a new element or reparse from\n   * the existing element.\n   * @param {Element} el Optional\n   * @param {Object} params Optional\n   */\n\n\n  Base.prototype.update = function update(el) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\n    if (this._removeEventListeners) {\n      this._removeEventListeners();\n    }\n\n    (this._cacheElements || noop).call(this, el || this.el, params);\n    (this._parseParams || noop).call(this);\n\n    if (this._addEventListeners) {\n      this._addEventListeners();\n    }\n\n    return this;\n  };\n\n  /**\n   * Set a hash of parameters if they're whitelisted or we're told to force the set.\n   * This is used to set initial values as well as set passed parameters.\n   * @param {Object} params\n   * @param {Boolean} force Force setting even if the param is not whitelisted.\n   */\n\n\n  Base.prototype.setParams = function setParams(params, force) {\n    var _this = this;\n\n    (0, _each2.default)(params, function (k, v) {\n      if (_this._whitelistedParams.indexOf(k) !== -1 || force) {\n        _this[k] = v;\n      }\n    });\n\n    return this;\n  };\n\n  /**\n   * Unset all parameters.\n   * @param {Array|Object} keys\n   * @param {Object} scope The object to unset the params from. Defaults to `this`.\n   */\n\n\n  Base.prototype.unsetParams = function unsetParams(keys, scope) {\n\n    keys = keys instanceof Array ? keys : Object.keys(keys);\n    scope = scope || this;\n    (0, _each2.default)(keys, function (k) {\n      delete scope[k];\n    });\n\n    return this;\n  };\n\n  return Base;\n}();\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nBase.prototype._whitelistedParams = [];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nBase.prototype.defaults = {};\n\nexports.default = Base;\nmodule.exports = exports['default'];\n//# sourceMappingURL=base.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _toggleClass = require('../helpers/dom/toggle-class');\n\nvar _toggleClass2 = _interopRequireDefault(_toggleClass);\n\nvar _offset = require('../helpers/dom/offset');\n\nvar _offset2 = _interopRequireDefault(_offset);\n\nvar _hasParent = require('../helpers/traversal/has-parent');\n\nvar _hasParent2 = _interopRequireDefault(_hasParent);\n\nvar _messaging = require('../mixins/messaging');\n\nvar _messaging2 = _interopRequireDefault(_messaging);\n\nvar _mixin = require('../helpers/util/mixin');\n\nvar _mixin2 = _interopRequireDefault(_mixin);\n\nvar _validation = require('../mixins/validation');\n\nvar _validation2 = _interopRequireDefault(_validation);\n\nvar _makeElement = require('../helpers/dom/make-element');\n\nvar _makeElement2 = _interopRequireDefault(_makeElement);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * # Slider\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * A slider for number inputs.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @example\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * new Slider(el, {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *   // Optional. Slide along the x or y-axis?\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *   isX: true,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *   // onChange callback\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *   onChange: function(inst, val){},\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * });\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @module components/slider.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar noop = function noop() {};\n\nvar Slider = function (_BaseComponent) {\n  _inherits(Slider, _BaseComponent);\n\n  /**\n   * Slider constructor.\n   * @param {Element} el\n   * @param {Object} params\n   */\n  function Slider(el) {\n    var _this;\n\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Slider);\n\n    params.elRequired = true;\n\n    if (!(_this = _possibleConstructorReturn(this, _BaseComponent.call(this, el, params)), _this)) {\n      return _possibleConstructorReturn(_this);\n    }\n\n    _this._bindEventListenerCallbacks();\n    _this._addEventListeners();\n    return _possibleConstructorReturn(_this);\n  }\n\n  /**\n   * Start the slider moving.\n   * @param {Number} position The position of the pointer.\n   * @param {String} type Optional Which type of events to listen for.\n   */\n\n\n  Slider.prototype.start = function start(position, type) {\n\n    if (this.inputEl.getAttribute('disabled') !== null) {\n      return this;\n    }\n\n    this._addMoveEventListeners(type || 'mouse');\n    this._cacheSize();\n    this.isActive = true;\n    this._updateActiveClasses();\n    this._oldVal = this.value;\n    this.move(position);\n\n    return this;\n  };\n\n  /**\n   * Move the value to a given position\n   * @param {Number} position\n   * @param {Boolean} force Force the move Optional\n   */\n\n\n  Slider.prototype.move = function move(position, force) {\n\n    // Noop if we haven't yet started dragging\n    if ((!position || !this.isActive) && !force) {\n      return this;\n    }\n\n    // Treat positions beyond the boundaries as the boundaries\n    if (this.isX) {\n\n      // Too far left\n      if (position < this.offsetLeft) {\n        position = this.offsetLeft;\n      }\n      // Too far right\n      else if (position > this.offsetLeft + this.width) {\n          position = this.offsetLeft + this.width;\n        }\n    } else {\n\n      // Too far top\n      if (position < this.offsetTop) {\n        position = this.offsetTop;\n      }\n      // Too far bottom\n      else if (position > this.offsetTop + this.height) {\n          position = this.offsetTop + this.height;\n        }\n    }\n\n    // The percentage of the new position relative to slider-container width or height.\n    var percentage = this.isX ? (position - this.offsetLeft) / (this.width - this.handleSize) : (position - this.offsetTop) / this.height;\n\n    // The value of the input as a percentage of the value range.\n    return this.setValue(Math.round((percentage - this.handleSizePercentage / 2) * (this.max - this.min)) + this.min);\n  };\n\n  /**\n   * Stop listening to movements.\n   * @param {String} type Optional Which type of events to listen for.\n   */\n\n\n  Slider.prototype.stop = function stop(type) {\n\n    this.isActive = false;\n\n    if (this._oldVal !== this.value) {\n      (this.onChange || noop)(this.value, this);\n    }\n\n    this._updateActiveClasses();\n    this._removeMoveEventListeners(type || 'mouse');\n\n    return this;\n  };\n\n  /**\n   * Set the value of the handle.\n   * @param {Number} value\n   */\n\n\n  Slider.prototype.setValue = function setValue(value) {\n\n    // Move in increments if we have a defined step size\n    if (this.step) {\n      value = value - value % this.step;\n    }\n\n    // Check bounds of the new value\n    if (value > this.max) {\n      value = this.max;\n    } else if (value < this.min) {\n      value = this.min;\n    }\n\n    // If there is an onWillChange callback, run it. If it returns\n    // false, then this new value should be considered invalid.\n    if (typeof this.onWillChange === 'function') {\n      var change = this.onWillChange(value, this);\n      if (typeof change === 'number') {\n        value = change;\n      }\n    }\n\n    // Store value\n    this.value = value;\n\n    // Update elements\n    this.inputEl.value = this.value;\n    this.handleEl.setAttribute('data-value', this._truncateValueText(this.value));\n    this.handleEl.setAttribute('aria-valuenow', this._truncateValueText(this.value));\n    this.handleEl.setAttribute('aria-valuetext', this._truncateValueText(this.value));\n\n    // Set the percentage\n    this.percentage = (this.value - this.min) / (this.max - this.min);\n\n    // Update the position of the handle\n    this._updateHandlePosition();\n\n    return this;\n  };\n\n  /**\n   * Get the value.\n   * @return {Number}\n   */\n\n\n  Slider.prototype.getValue = function getValue() {\n    return this.value;\n  };\n\n  /**\n   * Clear the value.\n   */\n\n\n  Slider.prototype.clearValue = function clearValue() {\n    return this.setValue(0);\n  };\n\n  /**\n   * Set/reset error state\n   * @param {Boolean} true: set error state, false: reset\n   */\n\n\n  Slider.prototype.setErrorState = function setErrorState(opt) {\n    if (opt) {\n      this.el.setAttribute('data-error', '');\n    } else {\n      this.el.removeAttribute('data-error');\n    }\n  };\n\n  /**\n   * Enable the input.\n   */\n\n\n  Slider.prototype.enable = function enable() {\n    this.inputEl.removeAttribute('disabled');\n    this.inputEl.removeAttribute('tabindex');\n    this.handleEl.removeAttribute('disabled');\n    this.handleEl.removeAttribute('tabindex');\n    return this;\n  };\n\n  /**\n   * Disable the input.\n   */\n\n\n  Slider.prototype.disable = function disable() {\n    this.inputEl.setAttribute('disabled', '');\n    this.inputEl.setAttribute('tabindex', '-1');\n    this.handleEl.setAttribute('disabled', '');\n    this.handleEl.setAttribute('tabindex', '-1');\n    return this;\n  };\n\n  /**\n   * Increment the value by the step size.\n   * @param {Boolean} useMultiplier Optional Increment by a multiplied version of the step\n   */\n\n\n  Slider.prototype.increment = function increment(useMultiplier) {\n    return this.setValue(this.value + this.step * (useMultiplier ? 10 : 1));\n  };\n\n  /**\n   * Decrement the value by the step size.\n   * @param {Boolean} useMultiplier Optional Increment by a multiplied version of the step\n   */\n\n\n  Slider.prototype.decrement = function decrement(useMultiplier) {\n    return this.setValue(this.value - this.step * (useMultiplier ? 10 : 1));\n  };\n\n  /**\n   * Remove the element from the DOM and prepare for garbage collection by dereferencing values.\n   * @param {Boolean} leaveElement Leave the element intact.\n   */\n\n\n  Slider.prototype.remove = function remove(leaveElement) {\n    this._removeMoveEventListeners('touch');\n    this._removeMoveEventListeners('mouse');\n    this._removeMoveEventListeners('keyboard');\n    return _BaseComponent.prototype.remove.call(this, leaveElement);\n  };\n\n  /**\n   * Update the component to use a new element or reparse from\n   * the existing element.\n   * @param {Element} el Optional\n   */\n\n\n  Slider.prototype.update = function update(el) {\n\n    this._removeEventListeners();\n    this._removeMoveEventListeners('touch');\n    this._removeMoveEventListeners('mouse');\n    this._removeMoveEventListeners('keyboard');\n\n    this._cacheElements(el);\n    this._addEventListeners();\n    this._updateHandlePosition();\n\n    return this;\n  };\n\n  /**\n   * Store a reference to the whole slider, as well as the\n   * input element. Also, get some default values from the input\n   * element (min, max, steps).\n   * @param {Element} el\n   */\n\n\n  Slider.prototype._cacheElements = function _cacheElements(el) {\n\n    this.el = el;\n    this.controlsEl = this.el.querySelector('.spark-slider__controls');\n    this.inputEl = this.el.querySelector('input[type=\"number\"]');\n    this.handleEl = this.el.querySelector('.spark-slider__handle');\n    this.trackEl = this.el.querySelector('.spark-slider__track');\n    this.trackFillEl = this.trackEl.querySelector('.spark-slider__track-fill');\n\n    this.messageEl = this.el.querySelector('.spark-slider__message') || (0, _makeElement2.default)('<span class=\"spark-slider__message\"></span>');\n\n    if (!this.inputEl) {\n      throw new Error('Tried to create a slider instance without a number input.');\n    }\n\n    if (!this.handleEl) {\n      throw new Error('Tried to create a slider instance without a handle button.');\n    }\n\n    this.min = parseInt(this.inputEl.getAttribute('min'), 10) || this.min;\n    this.max = parseInt(this.inputEl.getAttribute('max'), 10) || this.max;\n    this.step = parseInt(this.inputEl.getAttribute('step'), 10) || this.step;\n\n    // If we have a default value, set it after we cache the size of the element.\n    // We have to do that first so we know the bounds of the slider.\n    var value = parseInt(this.inputEl.getAttribute('value'), 10) || parseInt(this.inputEl.getAttribute('min'), 10);\n    if (!isNaN(value)) {\n      this._cacheSize();\n      this.setValue(value);\n    }\n  };\n\n  /**\n   * Save the element dimensions.\n   */\n\n\n  Slider.prototype._cacheSize = function _cacheSize() {\n\n    this.width = this.trackEl.offsetWidth;\n    this.height = this.trackEl.offsetHeight;\n\n    this.handleSize = this.isX ? this.handleEl.offsetWidth : this.handleEl.offsetHeight;\n    this.handleSizePercentage = this.isX ? this.handleEl.offsetWidth / this.width : this.handleEl.offsetHeight / this.height;\n\n    var offset = (0, _offset2.default)(this.controlsEl);\n    this.offsetLeft = offset.left;\n    this.offsetTop = offset.top;\n  };\n\n  /**\n   * Set the position of the handle.\n   */\n\n\n  Slider.prototype._updateHandlePosition = function _updateHandlePosition() {\n\n    // Track and Track-Fill elements\n    var trackPercentage = Math.round(Math.min(this.percentage, 1) * 100);\n    this.trackEl.setAttribute('data-percentage', trackPercentage);\n    this.trackFillEl.setAttribute('style', 'width: ' + trackPercentage + '%;');\n\n    // Handle position\n    var handlePos = this.handleSize / 2 + (this.value - this.min) * ((this.width - this.handleSize) / (this.max - this.min));\n    var handlePosPercentage = handlePos / this.width * 100;\n    this.handleEl.setAttribute('style', 'left: ' + handlePosPercentage + '%;');\n  };\n\n  /**\n   * Update the active class on the handle.\n   */\n\n\n  Slider.prototype._updateActiveClasses = function _updateActiveClasses() {\n    (0, _toggleClass2.default)(this.handleEl, 'active', this.isActive);\n    (0, _toggleClass2.default)(this.el, 'active', this.isActive);\n  };\n\n  /**\n   * Create bound versions of event listener callbacks and store them.\n   * Otherwise we can't unbind from these events later because the\n   * function signatures won't match.\n   */\n\n\n  Slider.prototype._bindEventListenerCallbacks = function _bindEventListenerCallbacks() {\n\n    this._onTouchStartBound = this._onTouchStart.bind(this);\n    this._onTouchMoveBound = this._onTouchMove.bind(this);\n    this._onTouchEndBound = this._onTouchEnd.bind(this);\n\n    this._onClickBound = this._onClick.bind(this);\n    this._onMouseDownBound = this._onMouseDown.bind(this);\n    this._onMouseMoveBound = this._onMouseMove.bind(this);\n    this._onMouseUpBound = this._onMouseUp.bind(this);\n    this._onMouseOutBound = this._onMouseOut.bind(this);\n\n    this._onFocusBound = this._onFocus.bind(this);\n    this._onKeydownBound = this._onKeydown.bind(this);\n    this._onBlurBound = this._onBlur.bind(this);\n\n    this._onChangeBound = this._onChange.bind(this);\n\n    this._onResizeBound = this._onResize.bind(this);\n\n    this._onVisibleChildrenBound = this._onVisibleChildren.bind(this);\n  };\n\n  /**\n   * Add event listeners for touchstart and mouse click.\n   */\n\n\n  Slider.prototype._addEventListeners = function _addEventListeners() {\n\n    this.controlsEl.addEventListener('touchstart', this._onTouchStartBound);\n    this.controlsEl.addEventListener('mousedown', this._onMouseDownBound);\n\n    this.inputEl.addEventListener('change', this._onChangeBound);\n\n    this.handleEl.addEventListener('focus', this._onFocusBound);\n    this.handleEl.addEventListener('click', this._onClickBound);\n\n    window.addEventListener('resize', this._onResizeBound);\n    window.addEventListener('orientationchange', this._onResizeBound);\n\n    document.addEventListener('spark.visible-children', this._onVisibleChildrenBound, true);\n  };\n\n  /**\n   * Remove event listeners for touchstart and mouse click.\n   */\n\n\n  Slider.prototype._removeEventListeners = function _removeEventListeners() {\n\n    this.controlsEl.removeEventListener('touchstart', this._onTouchStartBound);\n    this.controlsEl.removeEventListener('mousedown', this._onMouseDownBound);\n\n    this.inputEl.removeEventListener('change', this._onChangeBound);\n\n    this.handleEl.removeEventListener('focus', this._onFocusBound);\n    this.handleEl.removeEventListener('click', this._onClickBound);\n\n    window.removeEventListener('resize', this._onResizeBound);\n    window.removeEventListener('orientationchange', this._onResizeBound);\n\n    document.removeEventListener('spark.visible-children', this._onVisibleChildrenBound);\n  };\n\n  /**\n   * Add event listeners for touchmove, touchend, mousemove and mouseup.\n   * We add these to the window so that the user can move off of the element\n   * but keep dragging the slider handle. Otherwise it's really hard to\n   * use the slider unless it's massive.\n   * @param {String} type Which type of listeners to add\n   */\n\n\n  Slider.prototype._addMoveEventListeners = function _addMoveEventListeners(type) {\n\n    // Only listen for events of the type we asked for.\n    switch (type) {\n      case 'mouse':\n        window.addEventListener('mousemove', this._onMouseMoveBound);\n        window.addEventListener('mouseout', this._onMouseOutBound);\n        window.addEventListener('mouseup', this._onMouseUpBound);\n        break;\n      case 'touch':\n        window.addEventListener('touchmove', this._onTouchMoveBound);\n        window.addEventListener('touchend', this._onTouchEndBound);\n        break;\n      case 'keyboard':\n        window.addEventListener('keydown', this._onKeydownBound);\n        this.handleEl.addEventListener('blur', this._onBlurBound);\n        break;\n    }\n  };\n\n  /**\n   * Remove event listeners for move events.\n   * @param {String} type Which type of listeners to remove\n   */\n\n\n  Slider.prototype._removeMoveEventListeners = function _removeMoveEventListeners(type) {\n\n    // Only unbind events of the type we asked for.\n    switch (type) {\n      case 'mouse':\n        window.removeEventListener('mousemove', this._onMouseMoveBound);\n        window.removeEventListener('mouseup', this._onMouseUpBound);\n        break;\n      case 'touch':\n        window.removeEventListener('touchmove', this._onTouchMoveBound);\n        window.removeEventListener('touchend', this._onTouchEndBound);\n        break;\n      case 'keyboard':\n        window.removeEventListener('keydown', this._onKeydownBound);\n        this.handleEl.removeEventListener('blur', this._onBlurBound);\n        break;\n    }\n  };\n\n  /**\n   * Truncate value text to fit.\n   * @param {String} value\n   * @return {String}\n   */\n\n\n  Slider.prototype._truncateValueText = function _truncateValueText(value, precision, characters) {\n\n    if (value.length < 5) {\n      return value;\n    }\n\n    var isNegative = value < 0 ? true : false;\n\n    value = Math.abs(value);\n    precision = precision || this.truncatePrecision;\n    characters = characters || this.truncateCharacters;\n\n    var i = characters.length - 1;\n\n    precision = Math.pow(10, precision);\n\n    for (i; i >= 0; i--) {\n\n      var size = Math.pow(10, (i + 1) * 3);\n\n      if (size <= value) {\n\n        value = Math.round(value * precision / size) / precision;\n\n        // @todo: what is this doing? i can't remember how we would ever\n        // end up inside this condition.\n        if (value === 1000 && i < characters.length - 1) {\n          value = 1;\n          i++;\n        }\n\n        value += characters[i];\n\n        break;\n      }\n    }\n\n    return (isNegative ? '-' : '') + value;\n  };\n\n  /**\n   * When the touch starts, start the slider.\n   * @param {Object} e\n   */\n\n\n  Slider.prototype._onTouchStart = function _onTouchStart(e) {\n\n    if (this.inputEl.getAttribute('disabled') !== null) {\n      return;\n    }\n\n    e.preventDefault();\n\n    this.start(this.isX ? e.touches[0].pageX : e.touches[0].pageY, 'touch');\n  };\n\n  /**\n   * When the window fires a touchmove event, adjust our value accordingly\n   * @param {Object} e\n   */\n\n\n  Slider.prototype._onTouchMove = function _onTouchMove(e) {\n\n    if (!this.isActive) {\n      return;\n    }\n\n    e.preventDefault();\n\n    this.move(this.isX ? e.touches[0].pageX : e.touches[0].pageY);\n  };\n\n  /**\n   * When the window fires a touchend event, stop tracking touches\n   * @param {Object} e\n   */\n\n\n  Slider.prototype._onTouchEnd = function _onTouchEnd(e) {\n\n    if (!this.isActive) {\n      return;\n    }\n\n    e.preventDefault();\n\n    this.stop('touch');\n  };\n\n  /**\n   * When the mouse presses down, start the slider.\n   * @param {Object} e\n   */\n\n\n  Slider.prototype._onMouseDown = function _onMouseDown(e) {\n\n    if (this.inputEl.getAttribute('disabled') !== null) {\n      return;\n    }\n\n    e.preventDefault();\n\n    this.start(this.isX ? e.pageX : e.pageY, 'mouse');\n  };\n\n  /**\n   * When the window fires a mousemove event, adjust our value accordingly\n   * @param {Object} e\n   */\n\n\n  Slider.prototype._onMouseMove = function _onMouseMove(e) {\n\n    if (!this.isActive) {\n      return;\n    }\n\n    e.preventDefault();\n\n    this.move(this.isX ? e.pageX : e.pageY);\n  };\n\n  /**\n   * When the window fires a mouseup event, stop tracking\n   * @param {Object} e\n   */\n\n\n  Slider.prototype._onMouseUp = function _onMouseUp() {\n\n    if (!this.isActive) {\n      return;\n    }\n\n    this.stop('mouse');\n  };\n\n  /**\n   * When the window fires a mouseout event, stop tracking if it was the html element.\n   * @param {Object} e\n   */\n\n\n  Slider.prototype._onMouseOut = function _onMouseOut() {}\n  // @todo: make this work\n  // if (e.relatedTarget === doc.body.parentNode) {\n  //   this.stop('mouse');\n  // }\n\n\n  /**\n   * Handle the spark.visible-children event\n   * @param {Object} e\n   */\n  ;\n\n  Slider.prototype._onVisibleChildren = function _onVisibleChildren(e) {\n    if (e.target.contains(this.el)) {\n      window.setTimeout(function () {\n        this._onResize();\n      }.bind(this), 0);\n    }\n  };\n\n  /**\n   * When the window resizes, cache size values for the slider.\n   * @param {Object} e\n   */\n\n\n  Slider.prototype._onResize = function _onResize() {\n    this._cacheSize();\n    this._updateHandlePosition();\n  };\n\n  /**\n   * When the element receives focus, start listening for keyboard events\n   * @param {Object} e\n   */\n\n\n  Slider.prototype._onFocus = function _onFocus() {\n    this.start(null, 'keyboard');\n  };\n\n  /**\n   * When a key is pressed, see if it's one of the Arrow, Page up, Page down, Home\n   * or End keys move the handle accordingly. If the shift key is pressed in combination\n   * with the arrow keys, we'll increment and decrement by bigger values.\n   * @param {Object} e\n   */\n\n\n  Slider.prototype._onKeydown = function _onKeydown(e) {\n    if (e.keyCode === 39 || e.keyCode === 38) {\n      // Right or Up arrow\n      this.increment(e.shiftKey);\n    } else if (e.keyCode === 37 || e.keyCode === 40) {\n      // Left or down arrow\n      this.decrement(e.shiftKey);\n    } else if (e.keyCode === 33) {\n      // Page Up\n      this.increment(true);\n    } else if (e.keyCode === 34) {\n      // Page Down\n      this.decrement(true);\n    } else if (e.keyCode === 35) {\n      // End\n      this.setValue(this.max);\n    } else if (e.keyCode === 36) {\n      // Home\n      this.setValue(this.min);\n    }\n  };\n\n  /**\n   * When the element loses focus, stop listening for keyboard events\n   * @param {Object} e\n   */\n\n\n  Slider.prototype._onBlur = function _onBlur() {\n    this.stop('keyboard');\n  };\n\n  /**\n   * When the input value changes, set our internal value if it's not already our value.\n   * @param {Object} e\n   */\n\n\n  Slider.prototype._onChange = function _onChange(e) {\n    if (e.target.value !== this.value) {\n      this.setValue(e.target.value);\n    }\n    (this.onChange || noop)(this.value, this);\n  };\n\n  /**\n   * Prevent click events on the button. This way we don't accidentally submit the form.\n   * @param {Object} e\n   */\n\n\n  Slider.prototype._onClick = function _onClick(e) {\n    e.preventDefault();\n  };\n\n  /**\n   * When the window is clicked and the element isn't part of the slider, trigger a blur.\n   * @param {Object} e\n   */\n\n\n  Slider.prototype._onWindowClick = function _onWindowClick(e) {\n\n    if ((0, _hasParent2.default)(e.target, this.el)) {\n      this._onBlur();\n    }\n  };\n\n  return Slider;\n}(_base2.default);\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nSlider.prototype._whitelistedParams = ['isX', 'validate', 'onValidate', 'onChange', 'onWillChange'];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nSlider.prototype.defaults = {\n  el: null,\n  messageEl: null,\n  controlsEl: null,\n  inputEl: null,\n  handleEl: null,\n  trackEl: null,\n  trackFillEl: null,\n  isActive: false,\n  isX: true,\n  onValidate: null,\n  onChange: null,\n  onWillChange: null,\n  position: 0,\n  width: 0,\n  height: 0,\n  min: 0,\n  max: 0,\n  step: 1,\n  value: 0,\n  percentage: 0,\n  offsetLeft: 0,\n  offsetTop: 0,\n  handleSizePercentage: 0,\n  truncatePrecision: 0,\n  truncateCharacters: ['k', 'm', 'b', 't'],\n  _oldVal: null,\n  _onTouchStartBound: null,\n  _onTouchMoveBound: null,\n  _onTouchEndBound: null,\n  _onMouseDownBound: null,\n  _onMouseMoveBound: null,\n  _onMouseUpBound: null,\n  _onMouseOutBound: null,\n  _onFocusBound: null,\n  _onKeydownBound: null,\n  _onBlurBound: null,\n  _onChangeBound: null,\n  _onResizeBound: null,\n  _onClickBound: null,\n  _onVisibleChildrenBound: null\n};\n\n(0, _mixin2.default)(Slider.prototype, _messaging2.default, _validation2.default);\n\nexports.default = Slider;\nmodule.exports = exports['default'];\n//# sourceMappingURL=slider.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _outerHeight = require('../dom/outer-height');\n\nvar _outerHeight2 = _interopRequireDefault(_outerHeight);\n\nvar _addClass = require('../dom/add-class');\n\nvar _addClass2 = _interopRequireDefault(_addClass);\n\nvar _removeClass = require('../dom/remove-class');\n\nvar _removeClass2 = _interopRequireDefault(_removeClass);\n\nvar _hasClass = require('../dom/has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nvar _toggleClass = require('../dom/toggle-class');\n\nvar _toggleClass2 = _interopRequireDefault(_toggleClass);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar noop = function noop() {}; /**\n                                * # Animate Height\n                                * Animate the height of an element since we can't do this w/ pure CSS. Sigh.\n                                *\n                                * @example\n                                * animateHeight({\n                                *   el: ...,\n                                *   toggleEl: ...,\n                                *   // Optional params\n                                *   action: 'collapse'|'expand',\n                                *   heightAnimationClass: 'spark-animate-height',\n                                *   opacityAnimationClass: 'spark-animate-opacity',\n                                *   toggleProperty: 'display'|'overflow'|'visibility',\n                                *   toggleValue: 'block'|'none'|'visible'|'hidden',\n                                *   animationDuration: 250\n                                * });\n                                *\n                                * @module helpers/animation/height.js\n                                */\n\nvar runningAnimations = {\n  els: [],\n  completeCallbacks: []\n};\n\n/**\n * Get the inverse toggle value\n * @param  {String} property\n * @param  {String} originalValue\n * @return {String}\n */\nfunction getInverseToggleValue(el, property, originalValue) {\n\n  // Get the value to toggle to for the given property\n  switch (property) {\n    case 'overflow':\n    case 'visibility':\n      return originalValue === 'visible' ? 'hidden' : 'visible';\n    default:\n      return originalValue === 'block' || originalValue === 'inline-block' ? 'none' : 'block';\n  }\n}\n\n/**\n * When an animation is complete, clean up and run the callback.\n * @param  {Object} params\n */\nfunction onComplete(params) {\n\n  // Reset toggle el visibility\n  if (params.toggleClassName) {\n    (0, _toggleClass2.default)(params.el, params.toggleClassName, !params.collapse);\n  } else {\n    params.toggleEl.style[params.toggleProperty] = '';\n  }\n\n  // Remove the height property\n  params.el.style.height = '';\n  params.toggleEl.style.height = '';\n  params.toggleEl.style.marginBottom = '';\n  params.toggleEl.style.marginTop = '';\n\n  // Remove the spark-animate-height class so the transitions no longer apply\n  (0, _removeClass2.default)(params.el, params.heightAnimationClass);\n  (0, _removeClass2.default)(params.toggleEl, params.heightAnimationClass);\n\n  // Run the callback\n  params.onComplete();\n\n  // Remove the element and callback from their respective arrays\n  var runningIndex = runningAnimations.els.indexOf(params.el);\n  runningAnimations.els.splice(runningIndex, 1);\n  runningAnimations.completeCallbacks.splice(runningIndex, 1);\n}\n\n/**\n * @param {Object} params\n */\nfunction animateHeight(params) {\n\n  params = params || {};\n\n  var el = params.el;\n\n  if (!el) {\n    return;\n  }\n\n  var collapse = params.action && params.action === 'collapse';\n  var heightAnimationClass = params.heightAnimationClass || 'spark-animate-height';\n\n  // Allow for elements to be passed or selector strings\n  var toggleEl = typeof params.toggleEl === 'string' ? el.querySelector(params.toggleEl) : params.toggleEl;\n\n  // No element to be switching with toggling so we can't determine the desired height to animate to.\n  if (!toggleEl || (0, _hasClass2.default)(el, 'spark-no-animate')) {\n    return;\n  }\n\n  var toggleClassName = params.toggleClass;\n\n  // The style property to use when toggling visibility\n  var toggleProperty = params.toggleProperty || 'display';\n  var toggleStyles = window.getComputedStyle(toggleEl);\n  var originalToggleValue = toggleStyles[toggleProperty];\n  var toggleValue = params.toggleValue || getInverseToggleValue(toggleProperty, originalToggleValue);\n\n  // If we are already animating, stop now.\n  var runningIndex = runningAnimations.els.indexOf(el);\n  if (runningIndex !== -1) {\n\n    var completeCallback = runningAnimations.completeCallbacks[runningIndex];\n    if (completeCallback) {\n      clearTimeout(completeCallback);\n    }\n\n    onComplete({\n      el: el,\n      toggleEl: toggleEl,\n      onComplete: params.onComplete || noop,\n      collapse: collapse,\n      toggleProperty: toggleProperty,\n      toggleClassName: toggleClassName,\n      toggleValue: toggleValue,\n      heightAnimationClass: heightAnimationClass\n    });\n  }\n\n  // Store the current height\n  var originalHeight = (0, _outerHeight2.default)(el);\n\n  // Toggle the visible property\n  if (toggleClassName) {\n    (0, _toggleClass2.default)(el, toggleClassName, !collapse);\n  } else {\n    toggleEl.style[toggleProperty] = toggleValue;\n  }\n\n  // When measuring the size for a collapse, we have to wait a tic for it to be\n  // accurate. Not sure why. Ugh.\n  if (collapse) {\n    setTimeout(runAnimation, 0);\n  } else {\n    runAnimation();\n  }\n\n  function runAnimation() {\n\n    // Now that the toggle el is taking up space, get the new height which we will be animating to\n    var targetElHeight = (0, _outerHeight2.default)(el);\n\n    // We need to store the original and target toggle element heights. They differ depending on\n    // whether we are going to expand or collapse.\n    var targetToggleElHeight = void 0;\n    var originalToggleElHeight = void 0;\n\n    // If we are collapsing, reset the toggle style and set it when we're done. Set the height so\n    // that we can animate down to 0 or up to the target height.\n    if (collapse) {\n\n      if (toggleClassName) {\n        (0, _removeClass2.default)(el, toggleClassName);\n      } else {\n        toggleEl.style[toggleProperty] = originalToggleValue;\n      }\n\n      originalToggleElHeight = (0, _outerHeight2.default)(toggleEl, toggleStyles);\n      targetToggleElHeight = 0;\n    } else {\n      targetToggleElHeight = (0, _outerHeight2.default)(toggleEl, toggleStyles);\n      originalToggleElHeight = 0;\n    }\n\n    // Set the original height\n    el.style.height = originalHeight + 'px';\n    toggleEl.style.height = originalToggleElHeight + 'px';\n    toggleEl.style.marginBottom = '0px';\n    toggleEl.style.marginTop = '0px';\n\n    // Add the spark-animate-height class which will setup the transition-property and duration\n    (0, _addClass2.default)(el, heightAnimationClass);\n    (0, _addClass2.default)(toggleEl, heightAnimationClass);\n\n    runningAnimations.els.push(el);\n\n    // We need to wait a tick to toggle the height or else the animation class won't function\n    setTimeout(function () {\n\n      // Set the height to the target height\n      el.style.height = targetElHeight + 'px';\n      toggleEl.style.height = targetToggleElHeight + 'px';\n\n      // Remove inline styles after the animation is complete\n      runningAnimations.completeCallbacks.push(setTimeout(function () {\n        onComplete({\n          el: el,\n          toggleEl: toggleEl,\n          onComplete: params.onComplete || noop,\n          collapse: collapse,\n          toggleProperty: toggleProperty,\n          toggleClassName: toggleClassName,\n          toggleValue: toggleValue,\n          heightAnimationClass: heightAnimationClass\n        });\n      }, params.animationDuration !== undefined ? params.animationDuration : 201));\n    }, 0);\n  }\n}\n\nexports.default = animateHeight;\nmodule.exports = exports['default'];\n//# sourceMappingURL=height.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _trim = require('../util/trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nvar _hasClass = require('./has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * # Add Class\n * Add a class on an element.\n *\n * @param {Element|Array} el An element or array of elements to update.\n * @param {String} name\n * @return {Element}\n *\n * @module helpers/dom/add-class.js\n */\n\nvar ws = /\\s+/;\nvar cleanup = /\\s{2,}/g;\n\nfunction addClass(el, name) {\n\n  if (arguments.length === 2 && typeof name === 'string') {\n    name = (0, _trim2.default)(name).split(ws);\n  } else {\n    name = name instanceof Array ? name : Array.prototype.slice.call(arguments, 1);\n  }\n\n  // optimize for best, most common case\n  if (name.length === 1 && el.classList) {\n    if (name[0]) {\n      el.classList.add(name[0]);\n    }\n    return el;\n  }\n\n  var toAdd = [];\n  var i = 0;\n  var l = name.length;\n  var item = void 0;\n  var clsName = typeof el.className === 'string' ? el.className : el.getAttribute ? el.getAttribute('class') : '';\n\n  // see if we have anything to add\n  for (; i < l; i++) {\n    item = name[i];\n    if (item && !(0, _hasClass2.default)(clsName, item)) {\n      toAdd.push(item);\n    }\n  }\n\n  if (toAdd.length) {\n    if (typeof el.className === 'string') {\n      el.className = (0, _trim2.default)((clsName + ' ' + toAdd.join(' ')).replace(cleanup, ' '));\n    } else if (el.setAttribute) {\n      el.setAttribute('class', (0, _trim2.default)((clsName + ' ' + toAdd.join(' ')).replace(cleanup, ' ')));\n    }\n  }\n\n  return el;\n}\n\nexports.default = addClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=add-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/**\n * # Has Class\n * See if an element has a class.\n *\n * @param {Element|String} el\n * @param {String} name\n * @return {Boolean}\n *\n * @module helpers/dom/has-class.js\n */\nfunction hasClass(el, name) {\n  var cName = ((typeof el === 'undefined' ? 'undefined' : _typeof(el)) === 'object' ? el.className || el.getAttribute && el.getAttribute('class') || '' : el || '').replace(/[\\t\\r\\n\\f]/g, ' ');\n  return (' ' + cName + ' ').indexOf(' ' + name + ' ') !== -1;\n}\n\nexports.default = hasClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=has-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (html) {\n\n  if (!html) {\n    throw new Error('Cannot create element with no HTML!');\n  }\n\n  var el = document.createElement('div');\n  el.innerHTML = html;\n  var el2 = el.children[0];\n  el2.parentNode.removeChild(el2);\n  return el2;\n};\n\nmodule.exports = exports['default']; /**\n                                      * # Make Element\n                                      * Make en element using a string of HTML.\n                                      *\n                                      * @example\n                                      * makeElement('<div></div>');\n                                      *\n                                      * @module helpers/make-element.js\n                                      *\n                                      * @param {String} html\n                                      * @return {Element}\n                                      */\n//# sourceMappingURL=make-element.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Offset Position\n * Get the offset position of the element.\n *\n * @param {Element} el\n * @param {Boolean} viewPortOffset The offset relative to the viewport, not page.\n * @return {Object}\n *\n * @module helpers/dom/offset.js\n */\nfunction offset(el, viewPortOffset) {\n\n  var rect = {\n    top: 0,\n    left: 0\n  };\n\n  // Native implementation\n  if (el.getBoundingClientRect) {\n\n    var bounding = el.getBoundingClientRect();\n    rect.left = bounding.left;\n    rect.top = bounding.top;\n\n    if (!viewPortOffset) {\n      rect.left += typeof window.scrollX !== 'undefined' ? window.scrollX : window.pageXOffset;\n      rect.top += typeof window.scrollY !== 'undefined' ? window.scrollY : window.pageYOffset;\n    }\n  } else {\n    var x = 0,\n        y = 0;\n    do {\n      x += el.offsetLeft - (!viewPortOffset ? el.scrollLeft : 0);\n      y += el.offsetTop - (!viewPortOffset ? el.scrollTop : 0);\n    } while (el = el.offsetParent);\n\n    rect.left = x;\n    rect.top = y;\n  }\n\n  return rect;\n}\n\nexports.default = offset;\nmodule.exports = exports['default'];\n//# sourceMappingURL=offset.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _each = require('../util/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar props = ['marginTop', 'marginBottom', 'borderTop', 'borderBottom']; /**\n                                                                         * # Outer Height\n                                                                         * Get the outer height of an element (including margin and border)\n                                                                         *\n                                                                         * @param {Element} el\n                                                                         * @param {Object} styles Optional Already have computed styles? Pass them in.\n                                                                         *\n                                                                         * @example\n                                                                         * outerHeight(el, computedStyles);\n                                                                         *\n                                                                         * @module helpers/outer-height.js\n                                                                         */\n\n\nfunction outerHeight(el, styles) {\n\n  styles = styles || window.getComputedStyle(el);\n\n  var height = el.clientHeight;\n\n  (0, _each2.default)(props, function (prop) {\n    height += parseInt(styles[prop] || 0, 10);\n  });\n\n  return height;\n}\n\nexports.default = outerHeight;\nmodule.exports = exports['default'];\n//# sourceMappingURL=outer-height.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _trim = require('../util/trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ws = /\\s+/; /**\n                 * # Remove Class\n                 * Remove a class on an element.\n                 *\n                 * @param {Element|Array} el An element or array of elements to update.\n                 * @param {String} name\n                 * @return {Element}\n                 *\n                 * @module helpers/dom/remove-class.js\n                 */\n\nvar cleanup = /\\s{2,}/g;\n\nfunction removeClass(el, name) {\n\n  if (arguments.length === 2 && typeof name === 'string') {\n    name = (0, _trim2.default)(name).split(ws);\n  } else {\n    name = name instanceof Array ? name : Array.prototype.slice.call(arguments, 1);\n  }\n\n  // optimize for best, most common case\n  if (name.length === 1 && el.classList) {\n    if (name[0]) el.classList.remove(name[0]);\n    return el;\n  }\n\n  // store two copies\n  var clsName = ' ' + (typeof el.className === 'string' ? el.className : el.getAttribute ? el.getAttribute('class') : '') + ' ';\n  var result = clsName;\n  var current = void 0;\n  var start = void 0;\n  for (var i = 0, l = name.length; i < l; i++) {\n    current = name[i];\n    start = current ? result.indexOf(' ' + current + ' ') : -1;\n    if (start !== -1) {\n      start += 1;\n      result = result.slice(0, start) + result.slice(start + current.length);\n    }\n  }\n\n  // only write if modified\n  if (clsName !== result) {\n    if (typeof el.className === 'string') {\n      el.className = (0, _trim2.default)(result.replace(cleanup, ' '));\n    } else if (el.setAttribute) {\n      el.setAttribute('class', (0, _trim2.default)(result.replace(cleanup, ' ')));\n    }\n  }\n\n  return el;\n}\n\nexports.default = removeClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=remove-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _hasClass = require('./has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nvar _addClass = require('./add-class');\n\nvar _addClass2 = _interopRequireDefault(_addClass);\n\nvar _removeClass = require('./remove-class');\n\nvar _removeClass2 = _interopRequireDefault(_removeClass);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction toggleClass(el, name, enable) {\n\n  if (!el) {\n    return;\n  }\n\n  // If we're passed an array, toggle the class on each.\n  if (el instanceof NodeList || el instanceof Array) {\n\n    for (var i = 0, len = el.length; i < len; i++) {\n      toggleClass(el[i], name, enable);\n    }\n\n    return;\n  }\n\n  var action = void 0;\n  if (enable !== undefined) {\n    enable = typeof enable === 'function' ? enable.call(null, el) : enable;\n    action = enable ? 'add' : 'remove';\n  } else {\n    action = (0, _hasClass2.default)(el, name) ? 'remove' : 'add';\n  }\n\n  return (action === 'add' ? _addClass2.default : _removeClass2.default)(el, name);\n} /**\n   * # Toggle Class\n   * Toggle a class on an element given a condition.\n   *\n   * @param {Element|Array} el An element or array of elements to update.\n   * @param {String} name\n   * @param {Boolean} enable\n   * @return {Element}\n   *\n   * @module  helpers/dom/toggle-class.js\n   */\n\nexports.default = toggleClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=toggle-class.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Has Parent\n * See if an element has another element for a parent.\n *\n * @param {Element} child\n * @param {Element} possibleParent\n * @return {Boolean}\n *\n * @module helpers/traversal/has-parent.js\n */\nfunction hasParent(child, possibleParent) {\n\n  var parent = child.parentNode;\n\n  while (parent) {\n\n    if (parent === possibleParent) {\n      return true;\n    }\n\n    parent = parent.parentNode;\n  }\n\n  return false;\n}\n\nexports.default = hasParent;\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=has-parent.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Each\n * Apply a callback function to a list of any kind: Array, NodeList, HTMLCollection or Object.\n *\n * @param {Array|NodeList|HTMLCollection|Object} list\n * @param {Function} cb\n *\n * @example\n * each([], callback);\n * each(el.children, callback);\n * each(el.childNodes, callback);\n * each({}, callback);\n *\n * @module helpers/util/each.js\n */\nfunction each(list, cb) {\n\n  if (!list) {\n    return;\n  }\n\n  if (typeof cb !== 'function') {\n    throw new Error('Cannot invoke `each` without a callback!');\n  }\n\n  var i = 0;\n  var len = list.length;\n\n  // Object\n  if (len === undefined) {\n    for (i in list) {\n      if (i !== 'prototype' && list.hasOwnProperty(i)) {\n        cb(i, list[i]);\n      }\n    }\n  }\n  // Array-like\n  else {\n      for (; i < len; i++) {\n        cb(list[i]);\n      }\n    }\n}\n\nexports.default = each;\nmodule.exports = exports['default'];\n//# sourceMappingURL=each.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (proto) {\n  for (var _len = arguments.length, mixins = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    mixins[_key - 1] = arguments[_key];\n  }\n\n  (0, _each2.default)(mixins, function (mixin) {\n    for (var i in mixin) {\n      if (mixin.hasOwnProperty(i) && !proto[i]) proto[i] = mixin[i];\n    }\n  });\n};\n\nvar _each = require('./each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * # Mixin\n * Apply a mixin, or mixins, to an Object\n *\n * @example\n * mixin(proto, mix, mix2)\n *\n * @module helpers/util/mixin.js\n */\nmodule.exports = exports['default'];\n//# sourceMappingURL=mixin.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Trim\n * Trim whitespace on a string.\n *\n * @param {String} str\n *\n * @module helpers/util/trim.js\n */\n\nvar trimRE = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\n\nfunction trim(str) {\n  return str.replace(trimRE, '');\n}\n\nexports.default = trim;\nmodule.exports = exports['default'];\n//# sourceMappingURL=trim.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _height = require('../helpers/animation/height');\n\nvar _height2 = _interopRequireDefault(_height);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n\n  /**\n   * Set the error state.\n   * @param {String} message Optional\n   */\n  setError: function setError(message) {\n\n    // Animate down\n    if (!this._isMessageVisible()) {\n      this._showMessage();\n    }\n\n    this.clearWarning();\n    this.clearSuccess();\n\n    this.el.setAttribute('data-error', true);\n\n    if (message) {\n      this.setMessage(message);\n    }\n\n    return this;\n  },\n\n\n  /**\n   * Set the error state.\n   */\n  clearError: function clearError() {\n    this.el.removeAttribute('data-error', true);\n    return this;\n  },\n\n\n  /**\n   * Set the warning state.\n   * @param {String} message Optional\n   */\n  setWarning: function setWarning(message) {\n\n    // Animate down\n    if (!this._isMessageVisible()) {\n      this._showMessage();\n    }\n\n    this.clearError();\n    this.clearSuccess();\n\n    this.el.setAttribute('data-warning', true);\n\n    if (message) {\n      this.setMessage(message);\n    }\n\n    return this;\n  },\n\n\n  /**\n   * Set the error state.\n   */\n  clearWarning: function clearWarning() {\n    this.el.removeAttribute('data-warning', true);\n    return this;\n  },\n\n\n  /**\n   * Set the success state.\n   * @param {String} message Optional\n   */\n  setSuccess: function setSuccess(message) {\n\n    // Animate down\n    if (!this._isMessageVisible()) {\n      this._showMessage();\n    }\n\n    this.clearError();\n    this.clearWarning();\n\n    this.el.setAttribute('data-success', true);\n\n    if (message) {\n      this.setMessage(message);\n    }\n\n    return this;\n  },\n\n\n  /**\n   * Set the success state.\n   */\n  clearSuccess: function clearSuccess() {\n    this.el.removeAttribute('data-success', true);\n    return this;\n  },\n\n\n  /**\n   * Clear all messages.\n   */\n  clearMessages: function clearMessages() {\n    this._hideMessage(function () {\n      this.clearError();\n      this.clearWarning();\n      this.clearSuccess();\n    }.bind(this));\n    return this;\n  },\n\n\n  /**\n   * Set the message text.\n   * @param {String} message\n   */\n  setMessage: function setMessage(message) {\n    this.messageEl.innerHTML = message;\n    return this;\n  },\n\n\n  /**\n   * Show the message\n   */\n  _showMessage: function _showMessage() {\n\n    if (!this.messageEl.parentNode) {\n      this.el.appendChild(this.messageEl);\n    }\n\n    (0, _height2.default)({\n      el: this.el,\n      toggleEl: this.messageEl\n    });\n  },\n\n\n  /**\n   * Hide the message.\n   * @param {Function} callback\n   */\n  _hideMessage: function _hideMessage(callback) {\n\n    (0, _height2.default)({\n      el: this.el,\n      toggleEl: this.messageEl,\n      toggleValue: 'none',\n      action: 'collapse',\n      onComplete: callback\n    });\n  },\n\n\n  /**\n   * Is the message currently visible?\n   * @return {Boolean}\n   */\n  _isMessageVisible: function _isMessageVisible() {\n    return this.el.getAttribute('data-error') || this.el.getAttribute('data-warning') || this.el.getAttribute('data-success');\n  }\n}; /**\n    * # Messaging Mixin\n    * Add functionality for showing messages related to a form field.\n    *\n    * @example\n    * mixin(Component, messaging);\n    *\n    * @module mixin/messaging.js\n    */\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=messaging.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Validation Mixin\n * Add functionality for validating a form field's value.\n *\n * @example\n * mixin(Component, validation);\n *\n * @module mixin/validation.js\n */\n\nexports.default = {\n\n  /**\n   * Default validate function. This can be overridden by passing a\n   * custom validate method as a parameter. This really only helps out\n   * of the box for text inputs.\n   */\n  validate: function validate() {\n\n    var validate = this.validatePattern;\n\n    // Nothing to validate.\n    if (!this.onValidate || !validate) {\n      return this;\n    }\n\n    var re = new RegExp(validate);\n\n    this.onValidate(re.test(this.getValue()), this.getValue(), this);\n\n    return this;\n  }\n};\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=validation.js.map\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9kaXN0L2NvbXBvbmVudHMvYmFzZS5qcyIsImpzL2Rpc3QvY29tcG9uZW50cy9zbGlkZXIuanMiLCJqcy9kaXN0L2hlbHBlcnMvYW5pbWF0aW9uL2hlaWdodC5qcyIsImpzL2Rpc3QvaGVscGVycy9kb20vYWRkLWNsYXNzLmpzIiwianMvZGlzdC9oZWxwZXJzL2RvbS9oYXMtY2xhc3MuanMiLCJqcy9kaXN0L2hlbHBlcnMvZG9tL21ha2UtZWxlbWVudC5qcyIsImpzL2Rpc3QvaGVscGVycy9kb20vb2Zmc2V0LmpzIiwianMvZGlzdC9oZWxwZXJzL2RvbS9vdXRlci1oZWlnaHQuanMiLCJqcy9kaXN0L2hlbHBlcnMvZG9tL3JlbW92ZS1jbGFzcy5qcyIsImpzL2Rpc3QvaGVscGVycy9kb20vdG9nZ2xlLWNsYXNzLmpzIiwianMvZGlzdC9oZWxwZXJzL3RyYXZlcnNhbC9oYXMtcGFyZW50LmpzIiwianMvZGlzdC9oZWxwZXJzL3V0aWwvZWFjaC5qcyIsImpzL2Rpc3QvaGVscGVycy91dGlsL21peGluLmpzIiwianMvZGlzdC9oZWxwZXJzL3V0aWwvdHJpbS5qcyIsImpzL2Rpc3QvbWl4aW5zL21lc3NhZ2luZy5qcyIsImpzL2Rpc3QvbWl4aW5zL3ZhbGlkYXRpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbjNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9cmV0dXJuIGV9KSgpIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2VhY2ggPSByZXF1aXJlKCcuLi9oZWxwZXJzL3V0aWwvZWFjaCcpO1xuXG52YXIgX2VhY2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZWFjaCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9IC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICMgQmFzZSBDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBUaGUgYmFzZSBjbGFzcyBmb3IgU3BhcmsgSlMgY29tcG9uZW50cy4gVGhpcyBjbGFzcyBzaG91bGQgbmV2ZXIgYmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBpbnN0YW50aWF0ZWQgZGlyZWN0bHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQG1vZHVsZSBjb21wb25lbnRzL2Jhc2UuanNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cblxudmFyIG5vb3AgPSBmdW5jdGlvbiBub29wKCkge307XG5cbnZhciBCYXNlID0gZnVuY3Rpb24gKCkge1xuXG4gIC8qKlxuICAgKiBTZXQgcGFyYW1ldGVycyBhbmQgY2FjaGUgZWxlbWVudHMuXG4gICAqL1xuICBmdW5jdGlvbiBCYXNlKGVsKSB7XG4gICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQmFzZSk7XG5cbiAgICBpZiAocGFyYW1zLmVsUmVxdWlyZWQgJiYgIWVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZXRQYXJhbXModGhpcy5kZWZhdWx0cyB8fCB7fSwgdHJ1ZSk7XG4gICAgdGhpcy5zZXRQYXJhbXMocGFyYW1zKTtcbiAgICAodGhpcy5fY2FjaGVFbGVtZW50cyB8fCBub29wKS5jYWxsKHRoaXMsIGVsLCBwYXJhbXMpO1xuICAgICh0aGlzLl9wYXJzZVBhcmFtcyB8fCBub29wKS5jYWxsKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgY29tcG9uZW50IGZyb20gdGhlIERPTSBhbmQgcHJlcGFyZSBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uIGJ5IGRlcmVmZXJlbmNpbmcgdmFsdWVzLlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGxlYXZlRWxlbWVudCBMZWF2ZSB0aGUgZWxlbWVudCBpbnRhY3QuXG4gICAqL1xuXG5cbiAgQmFzZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKGxlYXZlRWxlbWVudCkge1xuXG4gICAgaWYgKHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIGlmICghbGVhdmVFbGVtZW50ICYmIHRoaXMuZWwgJiYgdGhpcy5lbC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLmVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbCk7XG4gICAgfVxuXG4gICAgdGhpcy51bnNldFBhcmFtcyh0aGlzLmRlZmF1bHRzKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGNvbXBvbmVudCB0byB1c2UgYSBuZXcgZWxlbWVudCBvciByZXBhcnNlIGZyb21cbiAgICogdGhlIGV4aXN0aW5nIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWwgT3B0aW9uYWxcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyBPcHRpb25hbFxuICAgKi9cblxuXG4gIEJhc2UucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShlbCkge1xuICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG5cbiAgICBpZiAodGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgKHRoaXMuX2NhY2hlRWxlbWVudHMgfHwgbm9vcCkuY2FsbCh0aGlzLCBlbCB8fCB0aGlzLmVsLCBwYXJhbXMpO1xuICAgICh0aGlzLl9wYXJzZVBhcmFtcyB8fCBub29wKS5jYWxsKHRoaXMpO1xuXG4gICAgaWYgKHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgYSBoYXNoIG9mIHBhcmFtZXRlcnMgaWYgdGhleSdyZSB3aGl0ZWxpc3RlZCBvciB3ZSdyZSB0b2xkIHRvIGZvcmNlIHRoZSBzZXQuXG4gICAqIFRoaXMgaXMgdXNlZCB0byBzZXQgaW5pdGlhbCB2YWx1ZXMgYXMgd2VsbCBhcyBzZXQgcGFzc2VkIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcbiAgICogQHBhcmFtIHtCb29sZWFufSBmb3JjZSBGb3JjZSBzZXR0aW5nIGV2ZW4gaWYgdGhlIHBhcmFtIGlzIG5vdCB3aGl0ZWxpc3RlZC5cbiAgICovXG5cblxuICBCYXNlLnByb3RvdHlwZS5zZXRQYXJhbXMgPSBmdW5jdGlvbiBzZXRQYXJhbXMocGFyYW1zLCBmb3JjZSkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAoMCwgX2VhY2gyLmRlZmF1bHQpKHBhcmFtcywgZnVuY3Rpb24gKGssIHYpIHtcbiAgICAgIGlmIChfdGhpcy5fd2hpdGVsaXN0ZWRQYXJhbXMuaW5kZXhPZihrKSAhPT0gLTEgfHwgZm9yY2UpIHtcbiAgICAgICAgX3RoaXNba10gPSB2O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVuc2V0IGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0ga2V5c1xuICAgKiBAcGFyYW0ge09iamVjdH0gc2NvcGUgVGhlIG9iamVjdCB0byB1bnNldCB0aGUgcGFyYW1zIGZyb20uIERlZmF1bHRzIHRvIGB0aGlzYC5cbiAgICovXG5cblxuICBCYXNlLnByb3RvdHlwZS51bnNldFBhcmFtcyA9IGZ1bmN0aW9uIHVuc2V0UGFyYW1zKGtleXMsIHNjb3BlKSB7XG5cbiAgICBrZXlzID0ga2V5cyBpbnN0YW5jZW9mIEFycmF5ID8ga2V5cyA6IE9iamVjdC5rZXlzKGtleXMpO1xuICAgIHNjb3BlID0gc2NvcGUgfHwgdGhpcztcbiAgICAoMCwgX2VhY2gyLmRlZmF1bHQpKGtleXMsIGZ1bmN0aW9uIChrKSB7XG4gICAgICBkZWxldGUgc2NvcGVba107XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICByZXR1cm4gQmFzZTtcbn0oKTtcblxuLyoqXG4gKiBXaGl0ZWxpc3RlZCBwYXJhbWV0ZXJzIHdoaWNoIGNhbiBiZSBzZXQgb24gY29uc3RydWN0aW9uLlxuICogQHR5cGUge0FycmF5fVxuICovXG5cblxuQmFzZS5wcm90b3R5cGUuX3doaXRlbGlzdGVkUGFyYW1zID0gW107XG5cbi8qKlxuICogRGVmYXVsdCB2YWx1ZXMgZm9yIGludGVybmFsIHByb3BlcnRpZXMgd2Ugd2lsbCBiZSBzZXR0aW5nLlxuICogVGhlc2UgYXJlIHNldCBvbiBlYWNoIGNvbnN0cnVjdGlvbiBzbyB3ZSBkb24ndCBsZWFrIHByb3BlcnRpZXNcbiAqIGludG8gdGhlIHByb3RvdHlwZSBjaGFpbi5cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbkJhc2UucHJvdG90eXBlLmRlZmF1bHRzID0ge307XG5cbmV4cG9ydHMuZGVmYXVsdCA9IEJhc2U7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhc2UuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfYmFzZSA9IHJlcXVpcmUoJy4vYmFzZScpO1xuXG52YXIgX2Jhc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmFzZSk7XG5cbnZhciBfdG9nZ2xlQ2xhc3MgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2RvbS90b2dnbGUtY2xhc3MnKTtcblxudmFyIF90b2dnbGVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90b2dnbGVDbGFzcyk7XG5cbnZhciBfb2Zmc2V0ID0gcmVxdWlyZSgnLi4vaGVscGVycy9kb20vb2Zmc2V0Jyk7XG5cbnZhciBfb2Zmc2V0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29mZnNldCk7XG5cbnZhciBfaGFzUGFyZW50ID0gcmVxdWlyZSgnLi4vaGVscGVycy90cmF2ZXJzYWwvaGFzLXBhcmVudCcpO1xuXG52YXIgX2hhc1BhcmVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oYXNQYXJlbnQpO1xuXG52YXIgX21lc3NhZ2luZyA9IHJlcXVpcmUoJy4uL21peGlucy9tZXNzYWdpbmcnKTtcblxudmFyIF9tZXNzYWdpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWVzc2FnaW5nKTtcblxudmFyIF9taXhpbiA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvdXRpbC9taXhpbicpO1xuXG52YXIgX21peGluMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21peGluKTtcblxudmFyIF92YWxpZGF0aW9uID0gcmVxdWlyZSgnLi4vbWl4aW5zL3ZhbGlkYXRpb24nKTtcblxudmFyIF92YWxpZGF0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRpb24pO1xuXG52YXIgX21ha2VFbGVtZW50ID0gcmVxdWlyZSgnLi4vaGVscGVycy9kb20vbWFrZS1lbGVtZW50Jyk7XG5cbnZhciBfbWFrZUVsZW1lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWFrZUVsZW1lbnQpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9IC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogIyBTbGlkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEEgc2xpZGVyIGZvciBudW1iZXIgaW5wdXRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBuZXcgU2xpZGVyKGVsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIC8vIE9wdGlvbmFsLiBTbGlkZSBhbG9uZyB0aGUgeCBvciB5LWF4aXM/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIGlzWDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgLy8gb25DaGFuZ2UgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgb25DaGFuZ2U6IGZ1bmN0aW9uKGluc3QsIHZhbCl7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBtb2R1bGUgY29tcG9uZW50cy9zbGlkZXIuanNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG5cbnZhciBub29wID0gZnVuY3Rpb24gbm9vcCgpIHt9O1xuXG52YXIgU2xpZGVyID0gZnVuY3Rpb24gKF9CYXNlQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhTbGlkZXIsIF9CYXNlQ29tcG9uZW50KTtcblxuICAvKipcbiAgICogU2xpZGVyIGNvbnN0cnVjdG9yLlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcbiAgICovXG4gIGZ1bmN0aW9uIFNsaWRlcihlbCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNsaWRlcik7XG5cbiAgICBwYXJhbXMuZWxSZXF1aXJlZCA9IHRydWU7XG5cbiAgICBpZiAoIShfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9CYXNlQ29tcG9uZW50LmNhbGwodGhpcywgZWwsIHBhcmFtcykpLCBfdGhpcykpIHtcbiAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcyk7XG4gICAgfVxuXG4gICAgX3RoaXMuX2JpbmRFdmVudExpc3RlbmVyQ2FsbGJhY2tzKCk7XG4gICAgX3RoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCB0aGUgc2xpZGVyIG1vdmluZy5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHBvc2l0aW9uIFRoZSBwb3NpdGlvbiBvZiB0aGUgcG9pbnRlci5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgT3B0aW9uYWwgV2hpY2ggdHlwZSBvZiBldmVudHMgdG8gbGlzdGVuIGZvci5cbiAgICovXG5cblxuICBTbGlkZXIucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQocG9zaXRpb24sIHR5cGUpIHtcblxuICAgIGlmICh0aGlzLmlucHV0RWwuZ2V0QXR0cmlidXRlKCdkaXNhYmxlZCcpICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB0aGlzLl9hZGRNb3ZlRXZlbnRMaXN0ZW5lcnModHlwZSB8fCAnbW91c2UnKTtcbiAgICB0aGlzLl9jYWNoZVNpemUoKTtcbiAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICB0aGlzLl91cGRhdGVBY3RpdmVDbGFzc2VzKCk7XG4gICAgdGhpcy5fb2xkVmFsID0gdGhpcy52YWx1ZTtcbiAgICB0aGlzLm1vdmUocG9zaXRpb24pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1vdmUgdGhlIHZhbHVlIHRvIGEgZ2l2ZW4gcG9zaXRpb25cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHBvc2l0aW9uXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZm9yY2UgRm9yY2UgdGhlIG1vdmUgT3B0aW9uYWxcbiAgICovXG5cblxuICBTbGlkZXIucHJvdG90eXBlLm1vdmUgPSBmdW5jdGlvbiBtb3ZlKHBvc2l0aW9uLCBmb3JjZSkge1xuXG4gICAgLy8gTm9vcCBpZiB3ZSBoYXZlbid0IHlldCBzdGFydGVkIGRyYWdnaW5nXG4gICAgaWYgKCghcG9zaXRpb24gfHwgIXRoaXMuaXNBY3RpdmUpICYmICFmb3JjZSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gVHJlYXQgcG9zaXRpb25zIGJleW9uZCB0aGUgYm91bmRhcmllcyBhcyB0aGUgYm91bmRhcmllc1xuICAgIGlmICh0aGlzLmlzWCkge1xuXG4gICAgICAvLyBUb28gZmFyIGxlZnRcbiAgICAgIGlmIChwb3NpdGlvbiA8IHRoaXMub2Zmc2V0TGVmdCkge1xuICAgICAgICBwb3NpdGlvbiA9IHRoaXMub2Zmc2V0TGVmdDtcbiAgICAgIH1cbiAgICAgIC8vIFRvbyBmYXIgcmlnaHRcbiAgICAgIGVsc2UgaWYgKHBvc2l0aW9uID4gdGhpcy5vZmZzZXRMZWZ0ICsgdGhpcy53aWR0aCkge1xuICAgICAgICAgIHBvc2l0aW9uID0gdGhpcy5vZmZzZXRMZWZ0ICsgdGhpcy53aWR0aDtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG5cbiAgICAgIC8vIFRvbyBmYXIgdG9wXG4gICAgICBpZiAocG9zaXRpb24gPCB0aGlzLm9mZnNldFRvcCkge1xuICAgICAgICBwb3NpdGlvbiA9IHRoaXMub2Zmc2V0VG9wO1xuICAgICAgfVxuICAgICAgLy8gVG9vIGZhciBib3R0b21cbiAgICAgIGVsc2UgaWYgKHBvc2l0aW9uID4gdGhpcy5vZmZzZXRUb3AgKyB0aGlzLmhlaWdodCkge1xuICAgICAgICAgIHBvc2l0aW9uID0gdGhpcy5vZmZzZXRUb3AgKyB0aGlzLmhlaWdodDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRoZSBwZXJjZW50YWdlIG9mIHRoZSBuZXcgcG9zaXRpb24gcmVsYXRpdmUgdG8gc2xpZGVyLWNvbnRhaW5lciB3aWR0aCBvciBoZWlnaHQuXG4gICAgdmFyIHBlcmNlbnRhZ2UgPSB0aGlzLmlzWCA/IChwb3NpdGlvbiAtIHRoaXMub2Zmc2V0TGVmdCkgLyAodGhpcy53aWR0aCAtIHRoaXMuaGFuZGxlU2l6ZSkgOiAocG9zaXRpb24gLSB0aGlzLm9mZnNldFRvcCkgLyB0aGlzLmhlaWdodDtcblxuICAgIC8vIFRoZSB2YWx1ZSBvZiB0aGUgaW5wdXQgYXMgYSBwZXJjZW50YWdlIG9mIHRoZSB2YWx1ZSByYW5nZS5cbiAgICByZXR1cm4gdGhpcy5zZXRWYWx1ZShNYXRoLnJvdW5kKChwZXJjZW50YWdlIC0gdGhpcy5oYW5kbGVTaXplUGVyY2VudGFnZSAvIDIpICogKHRoaXMubWF4IC0gdGhpcy5taW4pKSArIHRoaXMubWluKTtcbiAgfTtcblxuICAvKipcbiAgICogU3RvcCBsaXN0ZW5pbmcgdG8gbW92ZW1lbnRzLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBPcHRpb25hbCBXaGljaCB0eXBlIG9mIGV2ZW50cyB0byBsaXN0ZW4gZm9yLlxuICAgKi9cblxuXG4gIFNsaWRlci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AodHlwZSkge1xuXG4gICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xuXG4gICAgaWYgKHRoaXMuX29sZFZhbCAhPT0gdGhpcy52YWx1ZSkge1xuICAgICAgKHRoaXMub25DaGFuZ2UgfHwgbm9vcCkodGhpcy52YWx1ZSwgdGhpcyk7XG4gICAgfVxuXG4gICAgdGhpcy5fdXBkYXRlQWN0aXZlQ2xhc3NlcygpO1xuICAgIHRoaXMuX3JlbW92ZU1vdmVFdmVudExpc3RlbmVycyh0eXBlIHx8ICdtb3VzZScpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdmFsdWUgb2YgdGhlIGhhbmRsZS5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlXG4gICAqL1xuXG5cbiAgU2xpZGVyLnByb3RvdHlwZS5zZXRWYWx1ZSA9IGZ1bmN0aW9uIHNldFZhbHVlKHZhbHVlKSB7XG5cbiAgICAvLyBNb3ZlIGluIGluY3JlbWVudHMgaWYgd2UgaGF2ZSBhIGRlZmluZWQgc3RlcCBzaXplXG4gICAgaWYgKHRoaXMuc3RlcCkge1xuICAgICAgdmFsdWUgPSB2YWx1ZSAtIHZhbHVlICUgdGhpcy5zdGVwO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGJvdW5kcyBvZiB0aGUgbmV3IHZhbHVlXG4gICAgaWYgKHZhbHVlID4gdGhpcy5tYXgpIHtcbiAgICAgIHZhbHVlID0gdGhpcy5tYXg7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSA8IHRoaXMubWluKSB7XG4gICAgICB2YWx1ZSA9IHRoaXMubWluO1xuICAgIH1cblxuICAgIC8vIElmIHRoZXJlIGlzIGFuIG9uV2lsbENoYW5nZSBjYWxsYmFjaywgcnVuIGl0LiBJZiBpdCByZXR1cm5zXG4gICAgLy8gZmFsc2UsIHRoZW4gdGhpcyBuZXcgdmFsdWUgc2hvdWxkIGJlIGNvbnNpZGVyZWQgaW52YWxpZC5cbiAgICBpZiAodHlwZW9mIHRoaXMub25XaWxsQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2YXIgY2hhbmdlID0gdGhpcy5vbldpbGxDaGFuZ2UodmFsdWUsIHRoaXMpO1xuICAgICAgaWYgKHR5cGVvZiBjaGFuZ2UgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHZhbHVlID0gY2hhbmdlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN0b3JlIHZhbHVlXG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXG4gICAgLy8gVXBkYXRlIGVsZW1lbnRzXG4gICAgdGhpcy5pbnB1dEVsLnZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICB0aGlzLmhhbmRsZUVsLnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIHRoaXMuX3RydW5jYXRlVmFsdWVUZXh0KHRoaXMudmFsdWUpKTtcbiAgICB0aGlzLmhhbmRsZUVsLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycsIHRoaXMuX3RydW5jYXRlVmFsdWVUZXh0KHRoaXMudmFsdWUpKTtcbiAgICB0aGlzLmhhbmRsZUVsLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZXRleHQnLCB0aGlzLl90cnVuY2F0ZVZhbHVlVGV4dCh0aGlzLnZhbHVlKSk7XG5cbiAgICAvLyBTZXQgdGhlIHBlcmNlbnRhZ2VcbiAgICB0aGlzLnBlcmNlbnRhZ2UgPSAodGhpcy52YWx1ZSAtIHRoaXMubWluKSAvICh0aGlzLm1heCAtIHRoaXMubWluKTtcblxuICAgIC8vIFVwZGF0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGhhbmRsZVxuICAgIHRoaXMuX3VwZGF0ZUhhbmRsZVBvc2l0aW9uKCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZS5cbiAgICogQHJldHVybiB7TnVtYmVyfVxuICAgKi9cblxuXG4gIFNsaWRlci5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiBnZXRWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYXIgdGhlIHZhbHVlLlxuICAgKi9cblxuXG4gIFNsaWRlci5wcm90b3R5cGUuY2xlYXJWYWx1ZSA9IGZ1bmN0aW9uIGNsZWFyVmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0VmFsdWUoMCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldC9yZXNldCBlcnJvciBzdGF0ZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHRydWU6IHNldCBlcnJvciBzdGF0ZSwgZmFsc2U6IHJlc2V0XG4gICAqL1xuXG5cbiAgU2xpZGVyLnByb3RvdHlwZS5zZXRFcnJvclN0YXRlID0gZnVuY3Rpb24gc2V0RXJyb3JTdGF0ZShvcHQpIHtcbiAgICBpZiAob3B0KSB7XG4gICAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZSgnZGF0YS1lcnJvcicsICcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtZXJyb3InKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEVuYWJsZSB0aGUgaW5wdXQuXG4gICAqL1xuXG5cbiAgU2xpZGVyLnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgdGhpcy5pbnB1dEVsLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICB0aGlzLmlucHV0RWwucmVtb3ZlQXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICAgIHRoaXMuaGFuZGxlRWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIHRoaXMuaGFuZGxlRWwucmVtb3ZlQXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEaXNhYmxlIHRoZSBpbnB1dC5cbiAgICovXG5cblxuICBTbGlkZXIucHJvdG90eXBlLmRpc2FibGUgPSBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgIHRoaXMuaW5wdXRFbC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJycpO1xuICAgIHRoaXMuaW5wdXRFbC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgdGhpcy5oYW5kbGVFbC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJycpO1xuICAgIHRoaXMuaGFuZGxlRWwuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbmNyZW1lbnQgdGhlIHZhbHVlIGJ5IHRoZSBzdGVwIHNpemUuXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gdXNlTXVsdGlwbGllciBPcHRpb25hbCBJbmNyZW1lbnQgYnkgYSBtdWx0aXBsaWVkIHZlcnNpb24gb2YgdGhlIHN0ZXBcbiAgICovXG5cblxuICBTbGlkZXIucHJvdG90eXBlLmluY3JlbWVudCA9IGZ1bmN0aW9uIGluY3JlbWVudCh1c2VNdWx0aXBsaWVyKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0VmFsdWUodGhpcy52YWx1ZSArIHRoaXMuc3RlcCAqICh1c2VNdWx0aXBsaWVyID8gMTAgOiAxKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIERlY3JlbWVudCB0aGUgdmFsdWUgYnkgdGhlIHN0ZXAgc2l6ZS5cbiAgICogQHBhcmFtIHtCb29sZWFufSB1c2VNdWx0aXBsaWVyIE9wdGlvbmFsIEluY3JlbWVudCBieSBhIG11bHRpcGxpZWQgdmVyc2lvbiBvZiB0aGUgc3RlcFxuICAgKi9cblxuXG4gIFNsaWRlci5wcm90b3R5cGUuZGVjcmVtZW50ID0gZnVuY3Rpb24gZGVjcmVtZW50KHVzZU11bHRpcGxpZXIpIHtcbiAgICByZXR1cm4gdGhpcy5zZXRWYWx1ZSh0aGlzLnZhbHVlIC0gdGhpcy5zdGVwICogKHVzZU11bHRpcGxpZXIgPyAxMCA6IDEpKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gdGhlIERPTSBhbmQgcHJlcGFyZSBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uIGJ5IGRlcmVmZXJlbmNpbmcgdmFsdWVzLlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGxlYXZlRWxlbWVudCBMZWF2ZSB0aGUgZWxlbWVudCBpbnRhY3QuXG4gICAqL1xuXG5cbiAgU2xpZGVyLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUobGVhdmVFbGVtZW50KSB7XG4gICAgdGhpcy5fcmVtb3ZlTW92ZUV2ZW50TGlzdGVuZXJzKCd0b3VjaCcpO1xuICAgIHRoaXMuX3JlbW92ZU1vdmVFdmVudExpc3RlbmVycygnbW91c2UnKTtcbiAgICB0aGlzLl9yZW1vdmVNb3ZlRXZlbnRMaXN0ZW5lcnMoJ2tleWJvYXJkJyk7XG4gICAgcmV0dXJuIF9CYXNlQ29tcG9uZW50LnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzLCBsZWF2ZUVsZW1lbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGNvbXBvbmVudCB0byB1c2UgYSBuZXcgZWxlbWVudCBvciByZXBhcnNlIGZyb21cbiAgICogdGhlIGV4aXN0aW5nIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWwgT3B0aW9uYWxcbiAgICovXG5cblxuICBTbGlkZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShlbCkge1xuXG4gICAgdGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9yZW1vdmVNb3ZlRXZlbnRMaXN0ZW5lcnMoJ3RvdWNoJyk7XG4gICAgdGhpcy5fcmVtb3ZlTW92ZUV2ZW50TGlzdGVuZXJzKCdtb3VzZScpO1xuICAgIHRoaXMuX3JlbW92ZU1vdmVFdmVudExpc3RlbmVycygna2V5Ym9hcmQnKTtcblxuICAgIHRoaXMuX2NhY2hlRWxlbWVudHMoZWwpO1xuICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fdXBkYXRlSGFuZGxlUG9zaXRpb24oKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdG9yZSBhIHJlZmVyZW5jZSB0byB0aGUgd2hvbGUgc2xpZGVyLCBhcyB3ZWxsIGFzIHRoZVxuICAgKiBpbnB1dCBlbGVtZW50LiBBbHNvLCBnZXQgc29tZSBkZWZhdWx0IHZhbHVlcyBmcm9tIHRoZSBpbnB1dFxuICAgKiBlbGVtZW50IChtaW4sIG1heCwgc3RlcHMpLlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG5cbiAgU2xpZGVyLnByb3RvdHlwZS5fY2FjaGVFbGVtZW50cyA9IGZ1bmN0aW9uIF9jYWNoZUVsZW1lbnRzKGVsKSB7XG5cbiAgICB0aGlzLmVsID0gZWw7XG4gICAgdGhpcy5jb250cm9sc0VsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuc3Bhcmstc2xpZGVyX19jb250cm9scycpO1xuICAgIHRoaXMuaW5wdXRFbCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cIm51bWJlclwiXScpO1xuICAgIHRoaXMuaGFuZGxlRWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5zcGFyay1zbGlkZXJfX2hhbmRsZScpO1xuICAgIHRoaXMudHJhY2tFbCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLnNwYXJrLXNsaWRlcl9fdHJhY2snKTtcbiAgICB0aGlzLnRyYWNrRmlsbEVsID0gdGhpcy50cmFja0VsLnF1ZXJ5U2VsZWN0b3IoJy5zcGFyay1zbGlkZXJfX3RyYWNrLWZpbGwnKTtcblxuICAgIHRoaXMubWVzc2FnZUVsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuc3Bhcmstc2xpZGVyX19tZXNzYWdlJykgfHwgKDAsIF9tYWtlRWxlbWVudDIuZGVmYXVsdCkoJzxzcGFuIGNsYXNzPVwic3Bhcmstc2xpZGVyX19tZXNzYWdlXCI+PC9zcGFuPicpO1xuXG4gICAgaWYgKCF0aGlzLmlucHV0RWwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVHJpZWQgdG8gY3JlYXRlIGEgc2xpZGVyIGluc3RhbmNlIHdpdGhvdXQgYSBudW1iZXIgaW5wdXQuJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmhhbmRsZUVsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyaWVkIHRvIGNyZWF0ZSBhIHNsaWRlciBpbnN0YW5jZSB3aXRob3V0IGEgaGFuZGxlIGJ1dHRvbi4nKTtcbiAgICB9XG5cbiAgICB0aGlzLm1pbiA9IHBhcnNlSW50KHRoaXMuaW5wdXRFbC5nZXRBdHRyaWJ1dGUoJ21pbicpLCAxMCkgfHwgdGhpcy5taW47XG4gICAgdGhpcy5tYXggPSBwYXJzZUludCh0aGlzLmlucHV0RWwuZ2V0QXR0cmlidXRlKCdtYXgnKSwgMTApIHx8IHRoaXMubWF4O1xuICAgIHRoaXMuc3RlcCA9IHBhcnNlSW50KHRoaXMuaW5wdXRFbC5nZXRBdHRyaWJ1dGUoJ3N0ZXAnKSwgMTApIHx8IHRoaXMuc3RlcDtcblxuICAgIC8vIElmIHdlIGhhdmUgYSBkZWZhdWx0IHZhbHVlLCBzZXQgaXQgYWZ0ZXIgd2UgY2FjaGUgdGhlIHNpemUgb2YgdGhlIGVsZW1lbnQuXG4gICAgLy8gV2UgaGF2ZSB0byBkbyB0aGF0IGZpcnN0IHNvIHdlIGtub3cgdGhlIGJvdW5kcyBvZiB0aGUgc2xpZGVyLlxuICAgIHZhciB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuaW5wdXRFbC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyksIDEwKSB8fCBwYXJzZUludCh0aGlzLmlucHV0RWwuZ2V0QXR0cmlidXRlKCdtaW4nKSwgMTApO1xuICAgIGlmICghaXNOYU4odmFsdWUpKSB7XG4gICAgICB0aGlzLl9jYWNoZVNpemUoKTtcbiAgICAgIHRoaXMuc2V0VmFsdWUodmFsdWUpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2F2ZSB0aGUgZWxlbWVudCBkaW1lbnNpb25zLlxuICAgKi9cblxuXG4gIFNsaWRlci5wcm90b3R5cGUuX2NhY2hlU2l6ZSA9IGZ1bmN0aW9uIF9jYWNoZVNpemUoKSB7XG5cbiAgICB0aGlzLndpZHRoID0gdGhpcy50cmFja0VsLm9mZnNldFdpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy50cmFja0VsLm9mZnNldEhlaWdodDtcblxuICAgIHRoaXMuaGFuZGxlU2l6ZSA9IHRoaXMuaXNYID8gdGhpcy5oYW5kbGVFbC5vZmZzZXRXaWR0aCA6IHRoaXMuaGFuZGxlRWwub2Zmc2V0SGVpZ2h0O1xuICAgIHRoaXMuaGFuZGxlU2l6ZVBlcmNlbnRhZ2UgPSB0aGlzLmlzWCA/IHRoaXMuaGFuZGxlRWwub2Zmc2V0V2lkdGggLyB0aGlzLndpZHRoIDogdGhpcy5oYW5kbGVFbC5vZmZzZXRIZWlnaHQgLyB0aGlzLmhlaWdodDtcblxuICAgIHZhciBvZmZzZXQgPSAoMCwgX29mZnNldDIuZGVmYXVsdCkodGhpcy5jb250cm9sc0VsKTtcbiAgICB0aGlzLm9mZnNldExlZnQgPSBvZmZzZXQubGVmdDtcbiAgICB0aGlzLm9mZnNldFRvcCA9IG9mZnNldC50b3A7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgcG9zaXRpb24gb2YgdGhlIGhhbmRsZS5cbiAgICovXG5cblxuICBTbGlkZXIucHJvdG90eXBlLl91cGRhdGVIYW5kbGVQb3NpdGlvbiA9IGZ1bmN0aW9uIF91cGRhdGVIYW5kbGVQb3NpdGlvbigpIHtcblxuICAgIC8vIFRyYWNrIGFuZCBUcmFjay1GaWxsIGVsZW1lbnRzXG4gICAgdmFyIHRyYWNrUGVyY2VudGFnZSA9IE1hdGgucm91bmQoTWF0aC5taW4odGhpcy5wZXJjZW50YWdlLCAxKSAqIDEwMCk7XG4gICAgdGhpcy50cmFja0VsLnNldEF0dHJpYnV0ZSgnZGF0YS1wZXJjZW50YWdlJywgdHJhY2tQZXJjZW50YWdlKTtcbiAgICB0aGlzLnRyYWNrRmlsbEVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnd2lkdGg6ICcgKyB0cmFja1BlcmNlbnRhZ2UgKyAnJTsnKTtcblxuICAgIC8vIEhhbmRsZSBwb3NpdGlvblxuICAgIHZhciBoYW5kbGVQb3MgPSB0aGlzLmhhbmRsZVNpemUgLyAyICsgKHRoaXMudmFsdWUgLSB0aGlzLm1pbikgKiAoKHRoaXMud2lkdGggLSB0aGlzLmhhbmRsZVNpemUpIC8gKHRoaXMubWF4IC0gdGhpcy5taW4pKTtcbiAgICB2YXIgaGFuZGxlUG9zUGVyY2VudGFnZSA9IGhhbmRsZVBvcyAvIHRoaXMud2lkdGggKiAxMDA7XG4gICAgdGhpcy5oYW5kbGVFbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2xlZnQ6ICcgKyBoYW5kbGVQb3NQZXJjZW50YWdlICsgJyU7Jyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgYWN0aXZlIGNsYXNzIG9uIHRoZSBoYW5kbGUuXG4gICAqL1xuXG5cbiAgU2xpZGVyLnByb3RvdHlwZS5fdXBkYXRlQWN0aXZlQ2xhc3NlcyA9IGZ1bmN0aW9uIF91cGRhdGVBY3RpdmVDbGFzc2VzKCkge1xuICAgICgwLCBfdG9nZ2xlQ2xhc3MyLmRlZmF1bHQpKHRoaXMuaGFuZGxlRWwsICdhY3RpdmUnLCB0aGlzLmlzQWN0aXZlKTtcbiAgICAoMCwgX3RvZ2dsZUNsYXNzMi5kZWZhdWx0KSh0aGlzLmVsLCAnYWN0aXZlJywgdGhpcy5pc0FjdGl2ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBib3VuZCB2ZXJzaW9ucyBvZiBldmVudCBsaXN0ZW5lciBjYWxsYmFja3MgYW5kIHN0b3JlIHRoZW0uXG4gICAqIE90aGVyd2lzZSB3ZSBjYW4ndCB1bmJpbmQgZnJvbSB0aGVzZSBldmVudHMgbGF0ZXIgYmVjYXVzZSB0aGVcbiAgICogZnVuY3Rpb24gc2lnbmF0dXJlcyB3b24ndCBtYXRjaC5cbiAgICovXG5cblxuICBTbGlkZXIucHJvdG90eXBlLl9iaW5kRXZlbnRMaXN0ZW5lckNhbGxiYWNrcyA9IGZ1bmN0aW9uIF9iaW5kRXZlbnRMaXN0ZW5lckNhbGxiYWNrcygpIHtcblxuICAgIHRoaXMuX29uVG91Y2hTdGFydEJvdW5kID0gdGhpcy5fb25Ub3VjaFN0YXJ0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Ub3VjaE1vdmVCb3VuZCA9IHRoaXMuX29uVG91Y2hNb3ZlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Ub3VjaEVuZEJvdW5kID0gdGhpcy5fb25Ub3VjaEVuZC5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5fb25DbGlja0JvdW5kID0gdGhpcy5fb25DbGljay5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uTW91c2VEb3duQm91bmQgPSB0aGlzLl9vbk1vdXNlRG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uTW91c2VNb3ZlQm91bmQgPSB0aGlzLl9vbk1vdXNlTW92ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uTW91c2VVcEJvdW5kID0gdGhpcy5fb25Nb3VzZVVwLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Nb3VzZU91dEJvdW5kID0gdGhpcy5fb25Nb3VzZU91dC5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5fb25Gb2N1c0JvdW5kID0gdGhpcy5fb25Gb2N1cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uS2V5ZG93bkJvdW5kID0gdGhpcy5fb25LZXlkb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25CbHVyQm91bmQgPSB0aGlzLl9vbkJsdXIuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuX29uQ2hhbmdlQm91bmQgPSB0aGlzLl9vbkNoYW5nZS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5fb25SZXNpemVCb3VuZCA9IHRoaXMuX29uUmVzaXplLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLl9vblZpc2libGVDaGlsZHJlbkJvdW5kID0gdGhpcy5fb25WaXNpYmxlQ2hpbGRyZW4uYmluZCh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkIGV2ZW50IGxpc3RlbmVycyBmb3IgdG91Y2hzdGFydCBhbmQgbW91c2UgY2xpY2suXG4gICAqL1xuXG5cbiAgU2xpZGVyLnByb3RvdHlwZS5fYWRkRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG5cbiAgICB0aGlzLmNvbnRyb2xzRWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX29uVG91Y2hTdGFydEJvdW5kKTtcbiAgICB0aGlzLmNvbnRyb2xzRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5fb25Nb3VzZURvd25Cb3VuZCk7XG5cbiAgICB0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5fb25DaGFuZ2VCb3VuZCk7XG5cbiAgICB0aGlzLmhhbmRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fb25Gb2N1c0JvdW5kKTtcbiAgICB0aGlzLmhhbmRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbGlja0JvdW5kKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9vblJlc2l6ZUJvdW5kKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCB0aGlzLl9vblJlc2l6ZUJvdW5kKTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3NwYXJrLnZpc2libGUtY2hpbGRyZW4nLCB0aGlzLl9vblZpc2libGVDaGlsZHJlbkJvdW5kLCB0cnVlKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBmb3IgdG91Y2hzdGFydCBhbmQgbW91c2UgY2xpY2suXG4gICAqL1xuXG5cbiAgU2xpZGVyLnByb3RvdHlwZS5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG5cbiAgICB0aGlzLmNvbnRyb2xzRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX29uVG91Y2hTdGFydEJvdW5kKTtcbiAgICB0aGlzLmNvbnRyb2xzRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5fb25Nb3VzZURvd25Cb3VuZCk7XG5cbiAgICB0aGlzLmlucHV0RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5fb25DaGFuZ2VCb3VuZCk7XG5cbiAgICB0aGlzLmhhbmRsZUVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fb25Gb2N1c0JvdW5kKTtcbiAgICB0aGlzLmhhbmRsZUVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbGlja0JvdW5kKTtcblxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9vblJlc2l6ZUJvdW5kKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCB0aGlzLl9vblJlc2l6ZUJvdW5kKTtcblxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3NwYXJrLnZpc2libGUtY2hpbGRyZW4nLCB0aGlzLl9vblZpc2libGVDaGlsZHJlbkJvdW5kKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkIGV2ZW50IGxpc3RlbmVycyBmb3IgdG91Y2htb3ZlLCB0b3VjaGVuZCwgbW91c2Vtb3ZlIGFuZCBtb3VzZXVwLlxuICAgKiBXZSBhZGQgdGhlc2UgdG8gdGhlIHdpbmRvdyBzbyB0aGF0IHRoZSB1c2VyIGNhbiBtb3ZlIG9mZiBvZiB0aGUgZWxlbWVudFxuICAgKiBidXQga2VlcCBkcmFnZ2luZyB0aGUgc2xpZGVyIGhhbmRsZS4gT3RoZXJ3aXNlIGl0J3MgcmVhbGx5IGhhcmQgdG9cbiAgICogdXNlIHRoZSBzbGlkZXIgdW5sZXNzIGl0J3MgbWFzc2l2ZS5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgV2hpY2ggdHlwZSBvZiBsaXN0ZW5lcnMgdG8gYWRkXG4gICAqL1xuXG5cbiAgU2xpZGVyLnByb3RvdHlwZS5fYWRkTW92ZUV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX2FkZE1vdmVFdmVudExpc3RlbmVycyh0eXBlKSB7XG5cbiAgICAvLyBPbmx5IGxpc3RlbiBmb3IgZXZlbnRzIG9mIHRoZSB0eXBlIHdlIGFza2VkIGZvci5cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ21vdXNlJzpcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX29uTW91c2VNb3ZlQm91bmQpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCB0aGlzLl9vbk1vdXNlT3V0Qm91bmQpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX29uTW91c2VVcEJvdW5kKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0b3VjaCc6XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9vblRvdWNoTW92ZUJvdW5kKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5fb25Ub3VjaEVuZEJvdW5kKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdrZXlib2FyZCc6XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fb25LZXlkb3duQm91bmQpO1xuICAgICAgICB0aGlzLmhhbmRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9vbkJsdXJCb3VuZCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBmb3IgbW92ZSBldmVudHMuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFdoaWNoIHR5cGUgb2YgbGlzdGVuZXJzIHRvIHJlbW92ZVxuICAgKi9cblxuXG4gIFNsaWRlci5wcm90b3R5cGUuX3JlbW92ZU1vdmVFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uIF9yZW1vdmVNb3ZlRXZlbnRMaXN0ZW5lcnModHlwZSkge1xuXG4gICAgLy8gT25seSB1bmJpbmQgZXZlbnRzIG9mIHRoZSB0eXBlIHdlIGFza2VkIGZvci5cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ21vdXNlJzpcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX29uTW91c2VNb3ZlQm91bmQpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX29uTW91c2VVcEJvdW5kKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0b3VjaCc6XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9vblRvdWNoTW92ZUJvdW5kKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5fb25Ub3VjaEVuZEJvdW5kKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdrZXlib2FyZCc6XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fb25LZXlkb3duQm91bmQpO1xuICAgICAgICB0aGlzLmhhbmRsZUVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9vbkJsdXJCb3VuZCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVHJ1bmNhdGUgdmFsdWUgdGV4dCB0byBmaXQuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG5cbiAgU2xpZGVyLnByb3RvdHlwZS5fdHJ1bmNhdGVWYWx1ZVRleHQgPSBmdW5jdGlvbiBfdHJ1bmNhdGVWYWx1ZVRleHQodmFsdWUsIHByZWNpc2lvbiwgY2hhcmFjdGVycykge1xuXG4gICAgaWYgKHZhbHVlLmxlbmd0aCA8IDUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICB2YXIgaXNOZWdhdGl2ZSA9IHZhbHVlIDwgMCA/IHRydWUgOiBmYWxzZTtcblxuICAgIHZhbHVlID0gTWF0aC5hYnModmFsdWUpO1xuICAgIHByZWNpc2lvbiA9IHByZWNpc2lvbiB8fCB0aGlzLnRydW5jYXRlUHJlY2lzaW9uO1xuICAgIGNoYXJhY3RlcnMgPSBjaGFyYWN0ZXJzIHx8IHRoaXMudHJ1bmNhdGVDaGFyYWN0ZXJzO1xuXG4gICAgdmFyIGkgPSBjaGFyYWN0ZXJzLmxlbmd0aCAtIDE7XG5cbiAgICBwcmVjaXNpb24gPSBNYXRoLnBvdygxMCwgcHJlY2lzaW9uKTtcblxuICAgIGZvciAoaTsgaSA+PSAwOyBpLS0pIHtcblxuICAgICAgdmFyIHNpemUgPSBNYXRoLnBvdygxMCwgKGkgKyAxKSAqIDMpO1xuXG4gICAgICBpZiAoc2l6ZSA8PSB2YWx1ZSkge1xuXG4gICAgICAgIHZhbHVlID0gTWF0aC5yb3VuZCh2YWx1ZSAqIHByZWNpc2lvbiAvIHNpemUpIC8gcHJlY2lzaW9uO1xuXG4gICAgICAgIC8vIEB0b2RvOiB3aGF0IGlzIHRoaXMgZG9pbmc/IGkgY2FuJ3QgcmVtZW1iZXIgaG93IHdlIHdvdWxkIGV2ZXJcbiAgICAgICAgLy8gZW5kIHVwIGluc2lkZSB0aGlzIGNvbmRpdGlvbi5cbiAgICAgICAgaWYgKHZhbHVlID09PSAxMDAwICYmIGkgPCBjaGFyYWN0ZXJzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICB2YWx1ZSA9IDE7XG4gICAgICAgICAgaSsrO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsdWUgKz0gY2hhcmFjdGVyc1tpXTtcblxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gKGlzTmVnYXRpdmUgPyAnLScgOiAnJykgKyB2YWx1ZTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgdG91Y2ggc3RhcnRzLCBzdGFydCB0aGUgc2xpZGVyLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFNsaWRlci5wcm90b3R5cGUuX29uVG91Y2hTdGFydCA9IGZ1bmN0aW9uIF9vblRvdWNoU3RhcnQoZSkge1xuXG4gICAgaWYgKHRoaXMuaW5wdXRFbC5nZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJykgIT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLnN0YXJ0KHRoaXMuaXNYID8gZS50b3VjaGVzWzBdLnBhZ2VYIDogZS50b3VjaGVzWzBdLnBhZ2VZLCAndG91Y2gnKTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgd2luZG93IGZpcmVzIGEgdG91Y2htb3ZlIGV2ZW50LCBhZGp1c3Qgb3VyIHZhbHVlIGFjY29yZGluZ2x5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlXG4gICAqL1xuXG5cbiAgU2xpZGVyLnByb3RvdHlwZS5fb25Ub3VjaE1vdmUgPSBmdW5jdGlvbiBfb25Ub3VjaE1vdmUoZSkge1xuXG4gICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdGhpcy5tb3ZlKHRoaXMuaXNYID8gZS50b3VjaGVzWzBdLnBhZ2VYIDogZS50b3VjaGVzWzBdLnBhZ2VZKTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgd2luZG93IGZpcmVzIGEgdG91Y2hlbmQgZXZlbnQsIHN0b3AgdHJhY2tpbmcgdG91Y2hlc1xuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFNsaWRlci5wcm90b3R5cGUuX29uVG91Y2hFbmQgPSBmdW5jdGlvbiBfb25Ub3VjaEVuZChlKSB7XG5cbiAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLnN0b3AoJ3RvdWNoJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIG1vdXNlIHByZXNzZXMgZG93biwgc3RhcnQgdGhlIHNsaWRlci5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBTbGlkZXIucHJvdG90eXBlLl9vbk1vdXNlRG93biA9IGZ1bmN0aW9uIF9vbk1vdXNlRG93bihlKSB7XG5cbiAgICBpZiAodGhpcy5pbnB1dEVsLmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIHRoaXMuc3RhcnQodGhpcy5pc1ggPyBlLnBhZ2VYIDogZS5wYWdlWSwgJ21vdXNlJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIHdpbmRvdyBmaXJlcyBhIG1vdXNlbW92ZSBldmVudCwgYWRqdXN0IG91ciB2YWx1ZSBhY2NvcmRpbmdseVxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFNsaWRlci5wcm90b3R5cGUuX29uTW91c2VNb3ZlID0gZnVuY3Rpb24gX29uTW91c2VNb3ZlKGUpIHtcblxuICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIHRoaXMubW92ZSh0aGlzLmlzWCA/IGUucGFnZVggOiBlLnBhZ2VZKTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgd2luZG93IGZpcmVzIGEgbW91c2V1cCBldmVudCwgc3RvcCB0cmFja2luZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFNsaWRlci5wcm90b3R5cGUuX29uTW91c2VVcCA9IGZ1bmN0aW9uIF9vbk1vdXNlVXAoKSB7XG5cbiAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnN0b3AoJ21vdXNlJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIHdpbmRvdyBmaXJlcyBhIG1vdXNlb3V0IGV2ZW50LCBzdG9wIHRyYWNraW5nIGlmIGl0IHdhcyB0aGUgaHRtbCBlbGVtZW50LlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFNsaWRlci5wcm90b3R5cGUuX29uTW91c2VPdXQgPSBmdW5jdGlvbiBfb25Nb3VzZU91dCgpIHt9XG4gIC8vIEB0b2RvOiBtYWtlIHRoaXMgd29ya1xuICAvLyBpZiAoZS5yZWxhdGVkVGFyZ2V0ID09PSBkb2MuYm9keS5wYXJlbnROb2RlKSB7XG4gIC8vICAgdGhpcy5zdG9wKCdtb3VzZScpO1xuICAvLyB9XG5cblxuICAvKipcbiAgICogSGFuZGxlIHRoZSBzcGFyay52aXNpYmxlLWNoaWxkcmVuIGV2ZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlXG4gICAqL1xuICA7XG5cbiAgU2xpZGVyLnByb3RvdHlwZS5fb25WaXNpYmxlQ2hpbGRyZW4gPSBmdW5jdGlvbiBfb25WaXNpYmxlQ2hpbGRyZW4oZSkge1xuICAgIGlmIChlLnRhcmdldC5jb250YWlucyh0aGlzLmVsKSkge1xuICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9vblJlc2l6ZSgpO1xuICAgICAgfS5iaW5kKHRoaXMpLCAwKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIHdpbmRvdyByZXNpemVzLCBjYWNoZSBzaXplIHZhbHVlcyBmb3IgdGhlIHNsaWRlci5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBTbGlkZXIucHJvdG90eXBlLl9vblJlc2l6ZSA9IGZ1bmN0aW9uIF9vblJlc2l6ZSgpIHtcbiAgICB0aGlzLl9jYWNoZVNpemUoKTtcbiAgICB0aGlzLl91cGRhdGVIYW5kbGVQb3NpdGlvbigpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSBlbGVtZW50IHJlY2VpdmVzIGZvY3VzLCBzdGFydCBsaXN0ZW5pbmcgZm9yIGtleWJvYXJkIGV2ZW50c1xuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFNsaWRlci5wcm90b3R5cGUuX29uRm9jdXMgPSBmdW5jdGlvbiBfb25Gb2N1cygpIHtcbiAgICB0aGlzLnN0YXJ0KG51bGwsICdrZXlib2FyZCcpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIGEga2V5IGlzIHByZXNzZWQsIHNlZSBpZiBpdCdzIG9uZSBvZiB0aGUgQXJyb3csIFBhZ2UgdXAsIFBhZ2UgZG93biwgSG9tZVxuICAgKiBvciBFbmQga2V5cyBtb3ZlIHRoZSBoYW5kbGUgYWNjb3JkaW5nbHkuIElmIHRoZSBzaGlmdCBrZXkgaXMgcHJlc3NlZCBpbiBjb21iaW5hdGlvblxuICAgKiB3aXRoIHRoZSBhcnJvdyBrZXlzLCB3ZSdsbCBpbmNyZW1lbnQgYW5kIGRlY3JlbWVudCBieSBiaWdnZXIgdmFsdWVzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFNsaWRlci5wcm90b3R5cGUuX29uS2V5ZG93biA9IGZ1bmN0aW9uIF9vbktleWRvd24oZSkge1xuICAgIGlmIChlLmtleUNvZGUgPT09IDM5IHx8IGUua2V5Q29kZSA9PT0gMzgpIHtcbiAgICAgIC8vIFJpZ2h0IG9yIFVwIGFycm93XG4gICAgICB0aGlzLmluY3JlbWVudChlLnNoaWZ0S2V5KTtcbiAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMzcgfHwgZS5rZXlDb2RlID09PSA0MCkge1xuICAgICAgLy8gTGVmdCBvciBkb3duIGFycm93XG4gICAgICB0aGlzLmRlY3JlbWVudChlLnNoaWZ0S2V5KTtcbiAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMzMpIHtcbiAgICAgIC8vIFBhZ2UgVXBcbiAgICAgIHRoaXMuaW5jcmVtZW50KHRydWUpO1xuICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzNCkge1xuICAgICAgLy8gUGFnZSBEb3duXG4gICAgICB0aGlzLmRlY3JlbWVudCh0cnVlKTtcbiAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMzUpIHtcbiAgICAgIC8vIEVuZFxuICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLm1heCk7XG4gICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IDM2KSB7XG4gICAgICAvLyBIb21lXG4gICAgICB0aGlzLnNldFZhbHVlKHRoaXMubWluKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIGVsZW1lbnQgbG9zZXMgZm9jdXMsIHN0b3AgbGlzdGVuaW5nIGZvciBrZXlib2FyZCBldmVudHNcbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBTbGlkZXIucHJvdG90eXBlLl9vbkJsdXIgPSBmdW5jdGlvbiBfb25CbHVyKCkge1xuICAgIHRoaXMuc3RvcCgna2V5Ym9hcmQnKTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgaW5wdXQgdmFsdWUgY2hhbmdlcywgc2V0IG91ciBpbnRlcm5hbCB2YWx1ZSBpZiBpdCdzIG5vdCBhbHJlYWR5IG91ciB2YWx1ZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBTbGlkZXIucHJvdG90eXBlLl9vbkNoYW5nZSA9IGZ1bmN0aW9uIF9vbkNoYW5nZShlKSB7XG4gICAgaWYgKGUudGFyZ2V0LnZhbHVlICE9PSB0aGlzLnZhbHVlKSB7XG4gICAgICB0aGlzLnNldFZhbHVlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gICAgKHRoaXMub25DaGFuZ2UgfHwgbm9vcCkodGhpcy52YWx1ZSwgdGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByZXZlbnQgY2xpY2sgZXZlbnRzIG9uIHRoZSBidXR0b24uIFRoaXMgd2F5IHdlIGRvbid0IGFjY2lkZW50YWxseSBzdWJtaXQgdGhlIGZvcm0uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlXG4gICAqL1xuXG5cbiAgU2xpZGVyLnByb3RvdHlwZS5fb25DbGljayA9IGZ1bmN0aW9uIF9vbkNsaWNrKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIHdpbmRvdyBpcyBjbGlja2VkIGFuZCB0aGUgZWxlbWVudCBpc24ndCBwYXJ0IG9mIHRoZSBzbGlkZXIsIHRyaWdnZXIgYSBibHVyLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFNsaWRlci5wcm90b3R5cGUuX29uV2luZG93Q2xpY2sgPSBmdW5jdGlvbiBfb25XaW5kb3dDbGljayhlKSB7XG5cbiAgICBpZiAoKDAsIF9oYXNQYXJlbnQyLmRlZmF1bHQpKGUudGFyZ2V0LCB0aGlzLmVsKSkge1xuICAgICAgdGhpcy5fb25CbHVyKCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBTbGlkZXI7XG59KF9iYXNlMi5kZWZhdWx0KTtcblxuLyoqXG4gKiBXaGl0ZWxpc3RlZCBwYXJhbWV0ZXJzIHdoaWNoIGNhbiBiZSBzZXQgb24gY29uc3RydWN0aW9uLlxuICogQHR5cGUge0FycmF5fVxuICovXG5cblxuU2xpZGVyLnByb3RvdHlwZS5fd2hpdGVsaXN0ZWRQYXJhbXMgPSBbJ2lzWCcsICd2YWxpZGF0ZScsICdvblZhbGlkYXRlJywgJ29uQ2hhbmdlJywgJ29uV2lsbENoYW5nZSddO1xuXG4vKipcbiAqIERlZmF1bHQgdmFsdWVzIGZvciBpbnRlcm5hbCBwcm9wZXJ0aWVzIHdlIHdpbGwgYmUgc2V0dGluZy5cbiAqIFRoZXNlIGFyZSBzZXQgb24gZWFjaCBjb25zdHJ1Y3Rpb24gc28gd2UgZG9uJ3QgbGVhayBwcm9wZXJ0aWVzXG4gKiBpbnRvIHRoZSBwcm90b3R5cGUgY2hhaW4uXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5TbGlkZXIucHJvdG90eXBlLmRlZmF1bHRzID0ge1xuICBlbDogbnVsbCxcbiAgbWVzc2FnZUVsOiBudWxsLFxuICBjb250cm9sc0VsOiBudWxsLFxuICBpbnB1dEVsOiBudWxsLFxuICBoYW5kbGVFbDogbnVsbCxcbiAgdHJhY2tFbDogbnVsbCxcbiAgdHJhY2tGaWxsRWw6IG51bGwsXG4gIGlzQWN0aXZlOiBmYWxzZSxcbiAgaXNYOiB0cnVlLFxuICBvblZhbGlkYXRlOiBudWxsLFxuICBvbkNoYW5nZTogbnVsbCxcbiAgb25XaWxsQ2hhbmdlOiBudWxsLFxuICBwb3NpdGlvbjogMCxcbiAgd2lkdGg6IDAsXG4gIGhlaWdodDogMCxcbiAgbWluOiAwLFxuICBtYXg6IDAsXG4gIHN0ZXA6IDEsXG4gIHZhbHVlOiAwLFxuICBwZXJjZW50YWdlOiAwLFxuICBvZmZzZXRMZWZ0OiAwLFxuICBvZmZzZXRUb3A6IDAsXG4gIGhhbmRsZVNpemVQZXJjZW50YWdlOiAwLFxuICB0cnVuY2F0ZVByZWNpc2lvbjogMCxcbiAgdHJ1bmNhdGVDaGFyYWN0ZXJzOiBbJ2snLCAnbScsICdiJywgJ3QnXSxcbiAgX29sZFZhbDogbnVsbCxcbiAgX29uVG91Y2hTdGFydEJvdW5kOiBudWxsLFxuICBfb25Ub3VjaE1vdmVCb3VuZDogbnVsbCxcbiAgX29uVG91Y2hFbmRCb3VuZDogbnVsbCxcbiAgX29uTW91c2VEb3duQm91bmQ6IG51bGwsXG4gIF9vbk1vdXNlTW92ZUJvdW5kOiBudWxsLFxuICBfb25Nb3VzZVVwQm91bmQ6IG51bGwsXG4gIF9vbk1vdXNlT3V0Qm91bmQ6IG51bGwsXG4gIF9vbkZvY3VzQm91bmQ6IG51bGwsXG4gIF9vbktleWRvd25Cb3VuZDogbnVsbCxcbiAgX29uQmx1ckJvdW5kOiBudWxsLFxuICBfb25DaGFuZ2VCb3VuZDogbnVsbCxcbiAgX29uUmVzaXplQm91bmQ6IG51bGwsXG4gIF9vbkNsaWNrQm91bmQ6IG51bGwsXG4gIF9vblZpc2libGVDaGlsZHJlbkJvdW5kOiBudWxsXG59O1xuXG4oMCwgX21peGluMi5kZWZhdWx0KShTbGlkZXIucHJvdG90eXBlLCBfbWVzc2FnaW5nMi5kZWZhdWx0LCBfdmFsaWRhdGlvbjIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNsaWRlcjtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2xpZGVyLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX291dGVySGVpZ2h0ID0gcmVxdWlyZSgnLi4vZG9tL291dGVyLWhlaWdodCcpO1xuXG52YXIgX291dGVySGVpZ2h0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX291dGVySGVpZ2h0KTtcblxudmFyIF9hZGRDbGFzcyA9IHJlcXVpcmUoJy4uL2RvbS9hZGQtY2xhc3MnKTtcblxudmFyIF9hZGRDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hZGRDbGFzcyk7XG5cbnZhciBfcmVtb3ZlQ2xhc3MgPSByZXF1aXJlKCcuLi9kb20vcmVtb3ZlLWNsYXNzJyk7XG5cbnZhciBfcmVtb3ZlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVtb3ZlQ2xhc3MpO1xuXG52YXIgX2hhc0NsYXNzID0gcmVxdWlyZSgnLi4vZG9tL2hhcy1jbGFzcycpO1xuXG52YXIgX2hhc0NsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhc0NsYXNzKTtcblxudmFyIF90b2dnbGVDbGFzcyA9IHJlcXVpcmUoJy4uL2RvbS90b2dnbGUtY2xhc3MnKTtcblxudmFyIF90b2dnbGVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90b2dnbGVDbGFzcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBub29wID0gZnVuY3Rpb24gbm9vcCgpIHt9OyAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAjIEFuaW1hdGUgSGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQW5pbWF0ZSB0aGUgaGVpZ2h0IG9mIGFuIGVsZW1lbnQgc2luY2Ugd2UgY2FuJ3QgZG8gdGhpcyB3LyBwdXJlIENTUy4gU2lnaC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogYW5pbWF0ZUhlaWdodCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBlbDogLi4uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgdG9nZ2xlRWw6IC4uLixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIC8vIE9wdGlvbmFsIHBhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgYWN0aW9uOiAnY29sbGFwc2UnfCdleHBhbmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgaGVpZ2h0QW5pbWF0aW9uQ2xhc3M6ICdzcGFyay1hbmltYXRlLWhlaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBvcGFjaXR5QW5pbWF0aW9uQ2xhc3M6ICdzcGFyay1hbmltYXRlLW9wYWNpdHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgdG9nZ2xlUHJvcGVydHk6ICdkaXNwbGF5J3wnb3ZlcmZsb3cnfCd2aXNpYmlsaXR5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIHRvZ2dsZVZhbHVlOiAnYmxvY2snfCdub25lJ3wndmlzaWJsZSd8J2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBhbmltYXRpb25EdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAbW9kdWxlIGhlbHBlcnMvYW5pbWF0aW9uL2hlaWdodC5qc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG52YXIgcnVubmluZ0FuaW1hdGlvbnMgPSB7XG4gIGVsczogW10sXG4gIGNvbXBsZXRlQ2FsbGJhY2tzOiBbXVxufTtcblxuLyoqXG4gKiBHZXQgdGhlIGludmVyc2UgdG9nZ2xlIHZhbHVlXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHByb3BlcnR5XG4gKiBAcGFyYW0gIHtTdHJpbmd9IG9yaWdpbmFsVmFsdWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0SW52ZXJzZVRvZ2dsZVZhbHVlKGVsLCBwcm9wZXJ0eSwgb3JpZ2luYWxWYWx1ZSkge1xuXG4gIC8vIEdldCB0aGUgdmFsdWUgdG8gdG9nZ2xlIHRvIGZvciB0aGUgZ2l2ZW4gcHJvcGVydHlcbiAgc3dpdGNoIChwcm9wZXJ0eSkge1xuICAgIGNhc2UgJ292ZXJmbG93JzpcbiAgICBjYXNlICd2aXNpYmlsaXR5JzpcbiAgICAgIHJldHVybiBvcmlnaW5hbFZhbHVlID09PSAndmlzaWJsZScgPyAnaGlkZGVuJyA6ICd2aXNpYmxlJztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG9yaWdpbmFsVmFsdWUgPT09ICdibG9jaycgfHwgb3JpZ2luYWxWYWx1ZSA9PT0gJ2lubGluZS1ibG9jaycgPyAnbm9uZScgOiAnYmxvY2snO1xuICB9XG59XG5cbi8qKlxuICogV2hlbiBhbiBhbmltYXRpb24gaXMgY29tcGxldGUsIGNsZWFuIHVwIGFuZCBydW4gdGhlIGNhbGxiYWNrLlxuICogQHBhcmFtICB7T2JqZWN0fSBwYXJhbXNcbiAqL1xuZnVuY3Rpb24gb25Db21wbGV0ZShwYXJhbXMpIHtcblxuICAvLyBSZXNldCB0b2dnbGUgZWwgdmlzaWJpbGl0eVxuICBpZiAocGFyYW1zLnRvZ2dsZUNsYXNzTmFtZSkge1xuICAgICgwLCBfdG9nZ2xlQ2xhc3MyLmRlZmF1bHQpKHBhcmFtcy5lbCwgcGFyYW1zLnRvZ2dsZUNsYXNzTmFtZSwgIXBhcmFtcy5jb2xsYXBzZSk7XG4gIH0gZWxzZSB7XG4gICAgcGFyYW1zLnRvZ2dsZUVsLnN0eWxlW3BhcmFtcy50b2dnbGVQcm9wZXJ0eV0gPSAnJztcbiAgfVxuXG4gIC8vIFJlbW92ZSB0aGUgaGVpZ2h0IHByb3BlcnR5XG4gIHBhcmFtcy5lbC5zdHlsZS5oZWlnaHQgPSAnJztcbiAgcGFyYW1zLnRvZ2dsZUVsLnN0eWxlLmhlaWdodCA9ICcnO1xuICBwYXJhbXMudG9nZ2xlRWwuc3R5bGUubWFyZ2luQm90dG9tID0gJyc7XG4gIHBhcmFtcy50b2dnbGVFbC5zdHlsZS5tYXJnaW5Ub3AgPSAnJztcblxuICAvLyBSZW1vdmUgdGhlIHNwYXJrLWFuaW1hdGUtaGVpZ2h0IGNsYXNzIHNvIHRoZSB0cmFuc2l0aW9ucyBubyBsb25nZXIgYXBwbHlcbiAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkocGFyYW1zLmVsLCBwYXJhbXMuaGVpZ2h0QW5pbWF0aW9uQ2xhc3MpO1xuICAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KShwYXJhbXMudG9nZ2xlRWwsIHBhcmFtcy5oZWlnaHRBbmltYXRpb25DbGFzcyk7XG5cbiAgLy8gUnVuIHRoZSBjYWxsYmFja1xuICBwYXJhbXMub25Db21wbGV0ZSgpO1xuXG4gIC8vIFJlbW92ZSB0aGUgZWxlbWVudCBhbmQgY2FsbGJhY2sgZnJvbSB0aGVpciByZXNwZWN0aXZlIGFycmF5c1xuICB2YXIgcnVubmluZ0luZGV4ID0gcnVubmluZ0FuaW1hdGlvbnMuZWxzLmluZGV4T2YocGFyYW1zLmVsKTtcbiAgcnVubmluZ0FuaW1hdGlvbnMuZWxzLnNwbGljZShydW5uaW5nSW5kZXgsIDEpO1xuICBydW5uaW5nQW5pbWF0aW9ucy5jb21wbGV0ZUNhbGxiYWNrcy5zcGxpY2UocnVubmluZ0luZGV4LCAxKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG4gKi9cbmZ1bmN0aW9uIGFuaW1hdGVIZWlnaHQocGFyYW1zKSB7XG5cbiAgcGFyYW1zID0gcGFyYW1zIHx8IHt9O1xuXG4gIHZhciBlbCA9IHBhcmFtcy5lbDtcblxuICBpZiAoIWVsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNvbGxhcHNlID0gcGFyYW1zLmFjdGlvbiAmJiBwYXJhbXMuYWN0aW9uID09PSAnY29sbGFwc2UnO1xuICB2YXIgaGVpZ2h0QW5pbWF0aW9uQ2xhc3MgPSBwYXJhbXMuaGVpZ2h0QW5pbWF0aW9uQ2xhc3MgfHwgJ3NwYXJrLWFuaW1hdGUtaGVpZ2h0JztcblxuICAvLyBBbGxvdyBmb3IgZWxlbWVudHMgdG8gYmUgcGFzc2VkIG9yIHNlbGVjdG9yIHN0cmluZ3NcbiAgdmFyIHRvZ2dsZUVsID0gdHlwZW9mIHBhcmFtcy50b2dnbGVFbCA9PT0gJ3N0cmluZycgPyBlbC5xdWVyeVNlbGVjdG9yKHBhcmFtcy50b2dnbGVFbCkgOiBwYXJhbXMudG9nZ2xlRWw7XG5cbiAgLy8gTm8gZWxlbWVudCB0byBiZSBzd2l0Y2hpbmcgd2l0aCB0b2dnbGluZyBzbyB3ZSBjYW4ndCBkZXRlcm1pbmUgdGhlIGRlc2lyZWQgaGVpZ2h0IHRvIGFuaW1hdGUgdG8uXG4gIGlmICghdG9nZ2xlRWwgfHwgKDAsIF9oYXNDbGFzczIuZGVmYXVsdCkoZWwsICdzcGFyay1uby1hbmltYXRlJykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgdG9nZ2xlQ2xhc3NOYW1lID0gcGFyYW1zLnRvZ2dsZUNsYXNzO1xuXG4gIC8vIFRoZSBzdHlsZSBwcm9wZXJ0eSB0byB1c2Ugd2hlbiB0b2dnbGluZyB2aXNpYmlsaXR5XG4gIHZhciB0b2dnbGVQcm9wZXJ0eSA9IHBhcmFtcy50b2dnbGVQcm9wZXJ0eSB8fCAnZGlzcGxheSc7XG4gIHZhciB0b2dnbGVTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0b2dnbGVFbCk7XG4gIHZhciBvcmlnaW5hbFRvZ2dsZVZhbHVlID0gdG9nZ2xlU3R5bGVzW3RvZ2dsZVByb3BlcnR5XTtcbiAgdmFyIHRvZ2dsZVZhbHVlID0gcGFyYW1zLnRvZ2dsZVZhbHVlIHx8IGdldEludmVyc2VUb2dnbGVWYWx1ZSh0b2dnbGVQcm9wZXJ0eSwgb3JpZ2luYWxUb2dnbGVWYWx1ZSk7XG5cbiAgLy8gSWYgd2UgYXJlIGFscmVhZHkgYW5pbWF0aW5nLCBzdG9wIG5vdy5cbiAgdmFyIHJ1bm5pbmdJbmRleCA9IHJ1bm5pbmdBbmltYXRpb25zLmVscy5pbmRleE9mKGVsKTtcbiAgaWYgKHJ1bm5pbmdJbmRleCAhPT0gLTEpIHtcblxuICAgIHZhciBjb21wbGV0ZUNhbGxiYWNrID0gcnVubmluZ0FuaW1hdGlvbnMuY29tcGxldGVDYWxsYmFja3NbcnVubmluZ0luZGV4XTtcbiAgICBpZiAoY29tcGxldGVDYWxsYmFjaykge1xuICAgICAgY2xlYXJUaW1lb3V0KGNvbXBsZXRlQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIG9uQ29tcGxldGUoe1xuICAgICAgZWw6IGVsLFxuICAgICAgdG9nZ2xlRWw6IHRvZ2dsZUVsLFxuICAgICAgb25Db21wbGV0ZTogcGFyYW1zLm9uQ29tcGxldGUgfHwgbm9vcCxcbiAgICAgIGNvbGxhcHNlOiBjb2xsYXBzZSxcbiAgICAgIHRvZ2dsZVByb3BlcnR5OiB0b2dnbGVQcm9wZXJ0eSxcbiAgICAgIHRvZ2dsZUNsYXNzTmFtZTogdG9nZ2xlQ2xhc3NOYW1lLFxuICAgICAgdG9nZ2xlVmFsdWU6IHRvZ2dsZVZhbHVlLFxuICAgICAgaGVpZ2h0QW5pbWF0aW9uQ2xhc3M6IGhlaWdodEFuaW1hdGlvbkNsYXNzXG4gICAgfSk7XG4gIH1cblxuICAvLyBTdG9yZSB0aGUgY3VycmVudCBoZWlnaHRcbiAgdmFyIG9yaWdpbmFsSGVpZ2h0ID0gKDAsIF9vdXRlckhlaWdodDIuZGVmYXVsdCkoZWwpO1xuXG4gIC8vIFRvZ2dsZSB0aGUgdmlzaWJsZSBwcm9wZXJ0eVxuICBpZiAodG9nZ2xlQ2xhc3NOYW1lKSB7XG4gICAgKDAsIF90b2dnbGVDbGFzczIuZGVmYXVsdCkoZWwsIHRvZ2dsZUNsYXNzTmFtZSwgIWNvbGxhcHNlKTtcbiAgfSBlbHNlIHtcbiAgICB0b2dnbGVFbC5zdHlsZVt0b2dnbGVQcm9wZXJ0eV0gPSB0b2dnbGVWYWx1ZTtcbiAgfVxuXG4gIC8vIFdoZW4gbWVhc3VyaW5nIHRoZSBzaXplIGZvciBhIGNvbGxhcHNlLCB3ZSBoYXZlIHRvIHdhaXQgYSB0aWMgZm9yIGl0IHRvIGJlXG4gIC8vIGFjY3VyYXRlLiBOb3Qgc3VyZSB3aHkuIFVnaC5cbiAgaWYgKGNvbGxhcHNlKSB7XG4gICAgc2V0VGltZW91dChydW5BbmltYXRpb24sIDApO1xuICB9IGVsc2Uge1xuICAgIHJ1bkFuaW1hdGlvbigpO1xuICB9XG5cbiAgZnVuY3Rpb24gcnVuQW5pbWF0aW9uKCkge1xuXG4gICAgLy8gTm93IHRoYXQgdGhlIHRvZ2dsZSBlbCBpcyB0YWtpbmcgdXAgc3BhY2UsIGdldCB0aGUgbmV3IGhlaWdodCB3aGljaCB3ZSB3aWxsIGJlIGFuaW1hdGluZyB0b1xuICAgIHZhciB0YXJnZXRFbEhlaWdodCA9ICgwLCBfb3V0ZXJIZWlnaHQyLmRlZmF1bHQpKGVsKTtcblxuICAgIC8vIFdlIG5lZWQgdG8gc3RvcmUgdGhlIG9yaWdpbmFsIGFuZCB0YXJnZXQgdG9nZ2xlIGVsZW1lbnQgaGVpZ2h0cy4gVGhleSBkaWZmZXIgZGVwZW5kaW5nIG9uXG4gICAgLy8gd2hldGhlciB3ZSBhcmUgZ29pbmcgdG8gZXhwYW5kIG9yIGNvbGxhcHNlLlxuICAgIHZhciB0YXJnZXRUb2dnbGVFbEhlaWdodCA9IHZvaWQgMDtcbiAgICB2YXIgb3JpZ2luYWxUb2dnbGVFbEhlaWdodCA9IHZvaWQgMDtcblxuICAgIC8vIElmIHdlIGFyZSBjb2xsYXBzaW5nLCByZXNldCB0aGUgdG9nZ2xlIHN0eWxlIGFuZCBzZXQgaXQgd2hlbiB3ZSdyZSBkb25lLiBTZXQgdGhlIGhlaWdodCBzb1xuICAgIC8vIHRoYXQgd2UgY2FuIGFuaW1hdGUgZG93biB0byAwIG9yIHVwIHRvIHRoZSB0YXJnZXQgaGVpZ2h0LlxuICAgIGlmIChjb2xsYXBzZSkge1xuXG4gICAgICBpZiAodG9nZ2xlQ2xhc3NOYW1lKSB7XG4gICAgICAgICgwLCBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKGVsLCB0b2dnbGVDbGFzc05hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9nZ2xlRWwuc3R5bGVbdG9nZ2xlUHJvcGVydHldID0gb3JpZ2luYWxUb2dnbGVWYWx1ZTtcbiAgICAgIH1cblxuICAgICAgb3JpZ2luYWxUb2dnbGVFbEhlaWdodCA9ICgwLCBfb3V0ZXJIZWlnaHQyLmRlZmF1bHQpKHRvZ2dsZUVsLCB0b2dnbGVTdHlsZXMpO1xuICAgICAgdGFyZ2V0VG9nZ2xlRWxIZWlnaHQgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRUb2dnbGVFbEhlaWdodCA9ICgwLCBfb3V0ZXJIZWlnaHQyLmRlZmF1bHQpKHRvZ2dsZUVsLCB0b2dnbGVTdHlsZXMpO1xuICAgICAgb3JpZ2luYWxUb2dnbGVFbEhlaWdodCA9IDA7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBvcmlnaW5hbCBoZWlnaHRcbiAgICBlbC5zdHlsZS5oZWlnaHQgPSBvcmlnaW5hbEhlaWdodCArICdweCc7XG4gICAgdG9nZ2xlRWwuc3R5bGUuaGVpZ2h0ID0gb3JpZ2luYWxUb2dnbGVFbEhlaWdodCArICdweCc7XG4gICAgdG9nZ2xlRWwuc3R5bGUubWFyZ2luQm90dG9tID0gJzBweCc7XG4gICAgdG9nZ2xlRWwuc3R5bGUubWFyZ2luVG9wID0gJzBweCc7XG5cbiAgICAvLyBBZGQgdGhlIHNwYXJrLWFuaW1hdGUtaGVpZ2h0IGNsYXNzIHdoaWNoIHdpbGwgc2V0dXAgdGhlIHRyYW5zaXRpb24tcHJvcGVydHkgYW5kIGR1cmF0aW9uXG4gICAgKDAsIF9hZGRDbGFzczIuZGVmYXVsdCkoZWwsIGhlaWdodEFuaW1hdGlvbkNsYXNzKTtcbiAgICAoMCwgX2FkZENsYXNzMi5kZWZhdWx0KSh0b2dnbGVFbCwgaGVpZ2h0QW5pbWF0aW9uQ2xhc3MpO1xuXG4gICAgcnVubmluZ0FuaW1hdGlvbnMuZWxzLnB1c2goZWwpO1xuXG4gICAgLy8gV2UgbmVlZCB0byB3YWl0IGEgdGljayB0byB0b2dnbGUgdGhlIGhlaWdodCBvciBlbHNlIHRoZSBhbmltYXRpb24gY2xhc3Mgd29uJ3QgZnVuY3Rpb25cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblxuICAgICAgLy8gU2V0IHRoZSBoZWlnaHQgdG8gdGhlIHRhcmdldCBoZWlnaHRcbiAgICAgIGVsLnN0eWxlLmhlaWdodCA9IHRhcmdldEVsSGVpZ2h0ICsgJ3B4JztcbiAgICAgIHRvZ2dsZUVsLnN0eWxlLmhlaWdodCA9IHRhcmdldFRvZ2dsZUVsSGVpZ2h0ICsgJ3B4JztcblxuICAgICAgLy8gUmVtb3ZlIGlubGluZSBzdHlsZXMgYWZ0ZXIgdGhlIGFuaW1hdGlvbiBpcyBjb21wbGV0ZVxuICAgICAgcnVubmluZ0FuaW1hdGlvbnMuY29tcGxldGVDYWxsYmFja3MucHVzaChzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb25Db21wbGV0ZSh7XG4gICAgICAgICAgZWw6IGVsLFxuICAgICAgICAgIHRvZ2dsZUVsOiB0b2dnbGVFbCxcbiAgICAgICAgICBvbkNvbXBsZXRlOiBwYXJhbXMub25Db21wbGV0ZSB8fCBub29wLFxuICAgICAgICAgIGNvbGxhcHNlOiBjb2xsYXBzZSxcbiAgICAgICAgICB0b2dnbGVQcm9wZXJ0eTogdG9nZ2xlUHJvcGVydHksXG4gICAgICAgICAgdG9nZ2xlQ2xhc3NOYW1lOiB0b2dnbGVDbGFzc05hbWUsXG4gICAgICAgICAgdG9nZ2xlVmFsdWU6IHRvZ2dsZVZhbHVlLFxuICAgICAgICAgIGhlaWdodEFuaW1hdGlvbkNsYXNzOiBoZWlnaHRBbmltYXRpb25DbGFzc1xuICAgICAgICB9KTtcbiAgICAgIH0sIHBhcmFtcy5hbmltYXRpb25EdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gcGFyYW1zLmFuaW1hdGlvbkR1cmF0aW9uIDogMjAxKSk7XG4gICAgfSwgMCk7XG4gIH1cbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gYW5pbWF0ZUhlaWdodDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGVpZ2h0LmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3RyaW0gPSByZXF1aXJlKCcuLi91dGlsL3RyaW0nKTtcblxudmFyIF90cmltMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyaW0pO1xuXG52YXIgX2hhc0NsYXNzID0gcmVxdWlyZSgnLi9oYXMtY2xhc3MnKTtcblxudmFyIF9oYXNDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oYXNDbGFzcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKlxuICogIyBBZGQgQ2xhc3NcbiAqIEFkZCBhIGNsYXNzIG9uIGFuIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fEFycmF5fSBlbCBBbiBlbGVtZW50IG9yIGFycmF5IG9mIGVsZW1lbnRzIHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtFbGVtZW50fVxuICpcbiAqIEBtb2R1bGUgaGVscGVycy9kb20vYWRkLWNsYXNzLmpzXG4gKi9cblxudmFyIHdzID0gL1xccysvO1xudmFyIGNsZWFudXAgPSAvXFxzezIsfS9nO1xuXG5mdW5jdGlvbiBhZGRDbGFzcyhlbCwgbmFtZSkge1xuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmIHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykge1xuICAgIG5hbWUgPSAoMCwgX3RyaW0yLmRlZmF1bHQpKG5hbWUpLnNwbGl0KHdzKTtcbiAgfSBlbHNlIHtcbiAgICBuYW1lID0gbmFtZSBpbnN0YW5jZW9mIEFycmF5ID8gbmFtZSA6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIH1cblxuICAvLyBvcHRpbWl6ZSBmb3IgYmVzdCwgbW9zdCBjb21tb24gY2FzZVxuICBpZiAobmFtZS5sZW5ndGggPT09IDEgJiYgZWwuY2xhc3NMaXN0KSB7XG4gICAgaWYgKG5hbWVbMF0pIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQobmFtZVswXSk7XG4gICAgfVxuICAgIHJldHVybiBlbDtcbiAgfVxuXG4gIHZhciB0b0FkZCA9IFtdO1xuICB2YXIgaSA9IDA7XG4gIHZhciBsID0gbmFtZS5sZW5ndGg7XG4gIHZhciBpdGVtID0gdm9pZCAwO1xuICB2YXIgY2xzTmFtZSA9IHR5cGVvZiBlbC5jbGFzc05hbWUgPT09ICdzdHJpbmcnID8gZWwuY2xhc3NOYW1lIDogZWwuZ2V0QXR0cmlidXRlID8gZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpIDogJyc7XG5cbiAgLy8gc2VlIGlmIHdlIGhhdmUgYW55dGhpbmcgdG8gYWRkXG4gIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgaXRlbSA9IG5hbWVbaV07XG4gICAgaWYgKGl0ZW0gJiYgISgwLCBfaGFzQ2xhc3MyLmRlZmF1bHQpKGNsc05hbWUsIGl0ZW0pKSB7XG4gICAgICB0b0FkZC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0b0FkZC5sZW5ndGgpIHtcbiAgICBpZiAodHlwZW9mIGVsLmNsYXNzTmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVsLmNsYXNzTmFtZSA9ICgwLCBfdHJpbTIuZGVmYXVsdCkoKGNsc05hbWUgKyAnICcgKyB0b0FkZC5qb2luKCcgJykpLnJlcGxhY2UoY2xlYW51cCwgJyAnKSk7XG4gICAgfSBlbHNlIGlmIChlbC5zZXRBdHRyaWJ1dGUpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAoMCwgX3RyaW0yLmRlZmF1bHQpKChjbHNOYW1lICsgJyAnICsgdG9BZGQuam9pbignICcpKS5yZXBsYWNlKGNsZWFudXAsICcgJykpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZWw7XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGFkZENsYXNzO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZGQtY2xhc3MuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuLyoqXG4gKiAjIEhhcyBDbGFzc1xuICogU2VlIGlmIGFuIGVsZW1lbnQgaGFzIGEgY2xhc3MuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fFN0cmluZ30gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICpcbiAqIEBtb2R1bGUgaGVscGVycy9kb20vaGFzLWNsYXNzLmpzXG4gKi9cbmZ1bmN0aW9uIGhhc0NsYXNzKGVsLCBuYW1lKSB7XG4gIHZhciBjTmFtZSA9ICgodHlwZW9mIGVsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihlbCkpID09PSAnb2JqZWN0JyA/IGVsLmNsYXNzTmFtZSB8fCBlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnIDogZWwgfHwgJycpLnJlcGxhY2UoL1tcXHRcXHJcXG5cXGZdL2csICcgJyk7XG4gIHJldHVybiAoJyAnICsgY05hbWUgKyAnICcpLmluZGV4T2YoJyAnICsgbmFtZSArICcgJykgIT09IC0xO1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSBoYXNDbGFzcztcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzLWNsYXNzLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoaHRtbCkge1xuXG4gIGlmICghaHRtbCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGNyZWF0ZSBlbGVtZW50IHdpdGggbm8gSFRNTCEnKTtcbiAgfVxuXG4gIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBlbC5pbm5lckhUTUwgPSBodG1sO1xuICB2YXIgZWwyID0gZWwuY2hpbGRyZW5bMF07XG4gIGVsMi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsMik7XG4gIHJldHVybiBlbDI7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogIyBNYWtlIEVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBNYWtlIGVuIGVsZW1lbnQgdXNpbmcgYSBzdHJpbmcgb2YgSFRNTC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogbWFrZUVsZW1lbnQoJzxkaXY+PC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAbW9kdWxlIGhlbHBlcnMvbWFrZS1lbGVtZW50LmpzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gaHRtbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYWtlLWVsZW1lbnQuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKipcbiAqICMgT2Zmc2V0IFBvc2l0aW9uXG4gKiBHZXQgdGhlIG9mZnNldCBwb3NpdGlvbiBvZiB0aGUgZWxlbWVudC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHZpZXdQb3J0T2Zmc2V0IFRoZSBvZmZzZXQgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0LCBub3QgcGFnZS5cbiAqIEByZXR1cm4ge09iamVjdH1cbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvZG9tL29mZnNldC5qc1xuICovXG5mdW5jdGlvbiBvZmZzZXQoZWwsIHZpZXdQb3J0T2Zmc2V0KSB7XG5cbiAgdmFyIHJlY3QgPSB7XG4gICAgdG9wOiAwLFxuICAgIGxlZnQ6IDBcbiAgfTtcblxuICAvLyBOYXRpdmUgaW1wbGVtZW50YXRpb25cbiAgaWYgKGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCkge1xuXG4gICAgdmFyIGJvdW5kaW5nID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmVjdC5sZWZ0ID0gYm91bmRpbmcubGVmdDtcbiAgICByZWN0LnRvcCA9IGJvdW5kaW5nLnRvcDtcblxuICAgIGlmICghdmlld1BvcnRPZmZzZXQpIHtcbiAgICAgIHJlY3QubGVmdCArPSB0eXBlb2Ygd2luZG93LnNjcm9sbFggIT09ICd1bmRlZmluZWQnID8gd2luZG93LnNjcm9sbFggOiB3aW5kb3cucGFnZVhPZmZzZXQ7XG4gICAgICByZWN0LnRvcCArPSB0eXBlb2Ygd2luZG93LnNjcm9sbFkgIT09ICd1bmRlZmluZWQnID8gd2luZG93LnNjcm9sbFkgOiB3aW5kb3cucGFnZVlPZmZzZXQ7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciB4ID0gMCxcbiAgICAgICAgeSA9IDA7XG4gICAgZG8ge1xuICAgICAgeCArPSBlbC5vZmZzZXRMZWZ0IC0gKCF2aWV3UG9ydE9mZnNldCA/IGVsLnNjcm9sbExlZnQgOiAwKTtcbiAgICAgIHkgKz0gZWwub2Zmc2V0VG9wIC0gKCF2aWV3UG9ydE9mZnNldCA/IGVsLnNjcm9sbFRvcCA6IDApO1xuICAgIH0gd2hpbGUgKGVsID0gZWwub2Zmc2V0UGFyZW50KTtcblxuICAgIHJlY3QubGVmdCA9IHg7XG4gICAgcmVjdC50b3AgPSB5O1xuICB9XG5cbiAgcmV0dXJuIHJlY3Q7XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IG9mZnNldDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2Zmc2V0LmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2VhY2ggPSByZXF1aXJlKCcuLi91dGlsL2VhY2gnKTtcblxudmFyIF9lYWNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VhY2gpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgcHJvcHMgPSBbJ21hcmdpblRvcCcsICdtYXJnaW5Cb3R0b20nLCAnYm9yZGVyVG9wJywgJ2JvcmRlckJvdHRvbSddOyAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICMgT3V0ZXIgSGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBHZXQgdGhlIG91dGVyIGhlaWdodCBvZiBhbiBlbGVtZW50IChpbmNsdWRpbmcgbWFyZ2luIGFuZCBib3JkZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHN0eWxlcyBPcHRpb25hbCBBbHJlYWR5IGhhdmUgY29tcHV0ZWQgc3R5bGVzPyBQYXNzIHRoZW0gaW4uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIG91dGVySGVpZ2h0KGVsLCBjb21wdXRlZFN0eWxlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQG1vZHVsZSBoZWxwZXJzL291dGVyLWhlaWdodC5qc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG5cblxuZnVuY3Rpb24gb3V0ZXJIZWlnaHQoZWwsIHN0eWxlcykge1xuXG4gIHN0eWxlcyA9IHN0eWxlcyB8fCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCk7XG5cbiAgdmFyIGhlaWdodCA9IGVsLmNsaWVudEhlaWdodDtcblxuICAoMCwgX2VhY2gyLmRlZmF1bHQpKHByb3BzLCBmdW5jdGlvbiAocHJvcCkge1xuICAgIGhlaWdodCArPSBwYXJzZUludChzdHlsZXNbcHJvcF0gfHwgMCwgMTApO1xuICB9KTtcblxuICByZXR1cm4gaGVpZ2h0O1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSBvdXRlckhlaWdodDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3V0ZXItaGVpZ2h0LmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3RyaW0gPSByZXF1aXJlKCcuLi91dGlsL3RyaW0nKTtcblxudmFyIF90cmltMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyaW0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgd3MgPSAvXFxzKy87IC8qKlxuICAgICAgICAgICAgICAgICAqICMgUmVtb3ZlIENsYXNzXG4gICAgICAgICAgICAgICAgICogUmVtb3ZlIGEgY2xhc3Mgb24gYW4gZWxlbWVudC5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RWxlbWVudHxBcnJheX0gZWwgQW4gZWxlbWVudCBvciBhcnJheSBvZiBlbGVtZW50cyB0byB1cGRhdGUuXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQG1vZHVsZSBoZWxwZXJzL2RvbS9yZW1vdmUtY2xhc3MuanNcbiAgICAgICAgICAgICAgICAgKi9cblxudmFyIGNsZWFudXAgPSAvXFxzezIsfS9nO1xuXG5mdW5jdGlvbiByZW1vdmVDbGFzcyhlbCwgbmFtZSkge1xuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmIHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykge1xuICAgIG5hbWUgPSAoMCwgX3RyaW0yLmRlZmF1bHQpKG5hbWUpLnNwbGl0KHdzKTtcbiAgfSBlbHNlIHtcbiAgICBuYW1lID0gbmFtZSBpbnN0YW5jZW9mIEFycmF5ID8gbmFtZSA6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIH1cblxuICAvLyBvcHRpbWl6ZSBmb3IgYmVzdCwgbW9zdCBjb21tb24gY2FzZVxuICBpZiAobmFtZS5sZW5ndGggPT09IDEgJiYgZWwuY2xhc3NMaXN0KSB7XG4gICAgaWYgKG5hbWVbMF0pIGVsLmNsYXNzTGlzdC5yZW1vdmUobmFtZVswXSk7XG4gICAgcmV0dXJuIGVsO1xuICB9XG5cbiAgLy8gc3RvcmUgdHdvIGNvcGllc1xuICB2YXIgY2xzTmFtZSA9ICcgJyArICh0eXBlb2YgZWwuY2xhc3NOYW1lID09PSAnc3RyaW5nJyA/IGVsLmNsYXNzTmFtZSA6IGVsLmdldEF0dHJpYnV0ZSA/IGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSA6ICcnKSArICcgJztcbiAgdmFyIHJlc3VsdCA9IGNsc05hbWU7XG4gIHZhciBjdXJyZW50ID0gdm9pZCAwO1xuICB2YXIgc3RhcnQgPSB2b2lkIDA7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gbmFtZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBjdXJyZW50ID0gbmFtZVtpXTtcbiAgICBzdGFydCA9IGN1cnJlbnQgPyByZXN1bHQuaW5kZXhPZignICcgKyBjdXJyZW50ICsgJyAnKSA6IC0xO1xuICAgIGlmIChzdGFydCAhPT0gLTEpIHtcbiAgICAgIHN0YXJ0ICs9IDE7XG4gICAgICByZXN1bHQgPSByZXN1bHQuc2xpY2UoMCwgc3RhcnQpICsgcmVzdWx0LnNsaWNlKHN0YXJ0ICsgY3VycmVudC5sZW5ndGgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIG9ubHkgd3JpdGUgaWYgbW9kaWZpZWRcbiAgaWYgKGNsc05hbWUgIT09IHJlc3VsdCkge1xuICAgIGlmICh0eXBlb2YgZWwuY2xhc3NOYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgZWwuY2xhc3NOYW1lID0gKDAsIF90cmltMi5kZWZhdWx0KShyZXN1bHQucmVwbGFjZShjbGVhbnVwLCAnICcpKTtcbiAgICB9IGVsc2UgaWYgKGVsLnNldEF0dHJpYnV0ZSkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsICgwLCBfdHJpbTIuZGVmYXVsdCkocmVzdWx0LnJlcGxhY2UoY2xlYW51cCwgJyAnKSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBlbDtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gcmVtb3ZlQ2xhc3M7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlbW92ZS1jbGFzcy5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9oYXNDbGFzcyA9IHJlcXVpcmUoJy4vaGFzLWNsYXNzJyk7XG5cbnZhciBfaGFzQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGFzQ2xhc3MpO1xuXG52YXIgX2FkZENsYXNzID0gcmVxdWlyZSgnLi9hZGQtY2xhc3MnKTtcblxudmFyIF9hZGRDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hZGRDbGFzcyk7XG5cbnZhciBfcmVtb3ZlQ2xhc3MgPSByZXF1aXJlKCcuL3JlbW92ZS1jbGFzcycpO1xuXG52YXIgX3JlbW92ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlbW92ZUNsYXNzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWwsIG5hbWUsIGVuYWJsZSkge1xuXG4gIGlmICghZWwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBJZiB3ZSdyZSBwYXNzZWQgYW4gYXJyYXksIHRvZ2dsZSB0aGUgY2xhc3Mgb24gZWFjaC5cbiAgaWYgKGVsIGluc3RhbmNlb2YgTm9kZUxpc3QgfHwgZWwgaW5zdGFuY2VvZiBBcnJheSkge1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGVsLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB0b2dnbGVDbGFzcyhlbFtpXSwgbmFtZSwgZW5hYmxlKTtcbiAgICB9XG5cbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgYWN0aW9uID0gdm9pZCAwO1xuICBpZiAoZW5hYmxlICE9PSB1bmRlZmluZWQpIHtcbiAgICBlbmFibGUgPSB0eXBlb2YgZW5hYmxlID09PSAnZnVuY3Rpb24nID8gZW5hYmxlLmNhbGwobnVsbCwgZWwpIDogZW5hYmxlO1xuICAgIGFjdGlvbiA9IGVuYWJsZSA/ICdhZGQnIDogJ3JlbW92ZSc7XG4gIH0gZWxzZSB7XG4gICAgYWN0aW9uID0gKDAsIF9oYXNDbGFzczIuZGVmYXVsdCkoZWwsIG5hbWUpID8gJ3JlbW92ZScgOiAnYWRkJztcbiAgfVxuXG4gIHJldHVybiAoYWN0aW9uID09PSAnYWRkJyA/IF9hZGRDbGFzczIuZGVmYXVsdCA6IF9yZW1vdmVDbGFzczIuZGVmYXVsdCkoZWwsIG5hbWUpO1xufSAvKipcbiAgICogIyBUb2dnbGUgQ2xhc3NcbiAgICogVG9nZ2xlIGEgY2xhc3Mgb24gYW4gZWxlbWVudCBnaXZlbiBhIGNvbmRpdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fEFycmF5fSBlbCBBbiBlbGVtZW50IG9yIGFycmF5IG9mIGVsZW1lbnRzIHRvIHVwZGF0ZS5cbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHtCb29sZWFufSBlbmFibGVcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICpcbiAgICogQG1vZHVsZSAgaGVscGVycy9kb20vdG9nZ2xlLWNsYXNzLmpzXG4gICAqL1xuXG5leHBvcnRzLmRlZmF1bHQgPSB0b2dnbGVDbGFzcztcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9nZ2xlLWNsYXNzLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKipcbiAqICMgSGFzIFBhcmVudFxuICogU2VlIGlmIGFuIGVsZW1lbnQgaGFzIGFub3RoZXIgZWxlbWVudCBmb3IgYSBwYXJlbnQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBjaGlsZFxuICogQHBhcmFtIHtFbGVtZW50fSBwb3NzaWJsZVBhcmVudFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvdHJhdmVyc2FsL2hhcy1wYXJlbnQuanNcbiAqL1xuZnVuY3Rpb24gaGFzUGFyZW50KGNoaWxkLCBwb3NzaWJsZVBhcmVudCkge1xuXG4gIHZhciBwYXJlbnQgPSBjaGlsZC5wYXJlbnROb2RlO1xuXG4gIHdoaWxlIChwYXJlbnQpIHtcblxuICAgIGlmIChwYXJlbnQgPT09IHBvc3NpYmxlUGFyZW50KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gaGFzUGFyZW50O1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhcy1wYXJlbnQuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKipcbiAqICMgRWFjaFxuICogQXBwbHkgYSBjYWxsYmFjayBmdW5jdGlvbiB0byBhIGxpc3Qgb2YgYW55IGtpbmQ6IEFycmF5LCBOb2RlTGlzdCwgSFRNTENvbGxlY3Rpb24gb3IgT2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7QXJyYXl8Tm9kZUxpc3R8SFRNTENvbGxlY3Rpb258T2JqZWN0fSBsaXN0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICpcbiAqIEBleGFtcGxlXG4gKiBlYWNoKFtdLCBjYWxsYmFjayk7XG4gKiBlYWNoKGVsLmNoaWxkcmVuLCBjYWxsYmFjayk7XG4gKiBlYWNoKGVsLmNoaWxkTm9kZXMsIGNhbGxiYWNrKTtcbiAqIGVhY2goe30sIGNhbGxiYWNrKTtcbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvdXRpbC9lYWNoLmpzXG4gKi9cbmZ1bmN0aW9uIGVhY2gobGlzdCwgY2IpIHtcblxuICBpZiAoIWxpc3QpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgaW52b2tlIGBlYWNoYCB3aXRob3V0IGEgY2FsbGJhY2shJyk7XG4gIH1cblxuICB2YXIgaSA9IDA7XG4gIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcblxuICAvLyBPYmplY3RcbiAgaWYgKGxlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yIChpIGluIGxpc3QpIHtcbiAgICAgIGlmIChpICE9PSAncHJvdG90eXBlJyAmJiBsaXN0Lmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgIGNiKGksIGxpc3RbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBBcnJheS1saWtlXG4gIGVsc2Uge1xuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjYihsaXN0W2ldKTtcbiAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGVhY2g7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVhY2guanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChwcm90bykge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgbWl4aW5zID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIG1peGluc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICAoMCwgX2VhY2gyLmRlZmF1bHQpKG1peGlucywgZnVuY3Rpb24gKG1peGluKSB7XG4gICAgZm9yICh2YXIgaSBpbiBtaXhpbikge1xuICAgICAgaWYgKG1peGluLmhhc093blByb3BlcnR5KGkpICYmICFwcm90b1tpXSkgcHJvdG9baV0gPSBtaXhpbltpXTtcbiAgICB9XG4gIH0pO1xufTtcblxudmFyIF9lYWNoID0gcmVxdWlyZSgnLi9lYWNoJyk7XG5cbnZhciBfZWFjaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lYWNoKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqXG4gKiAjIE1peGluXG4gKiBBcHBseSBhIG1peGluLCBvciBtaXhpbnMsIHRvIGFuIE9iamVjdFxuICpcbiAqIEBleGFtcGxlXG4gKiBtaXhpbihwcm90bywgbWl4LCBtaXgyKVxuICpcbiAqIEBtb2R1bGUgaGVscGVycy91dGlsL21peGluLmpzXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWl4aW4uanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKipcbiAqICMgVHJpbVxuICogVHJpbSB3aGl0ZXNwYWNlIG9uIGEgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvdXRpbC90cmltLmpzXG4gKi9cblxudmFyIHRyaW1SRSA9IC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZztcblxuZnVuY3Rpb24gdHJpbShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKHRyaW1SRSwgJycpO1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSB0cmltO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmltLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2hlaWdodCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvYW5pbWF0aW9uL2hlaWdodCcpO1xuXG52YXIgX2hlaWdodDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oZWlnaHQpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSB7XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZXJyb3Igc3RhdGUuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIE9wdGlvbmFsXG4gICAqL1xuICBzZXRFcnJvcjogZnVuY3Rpb24gc2V0RXJyb3IobWVzc2FnZSkge1xuXG4gICAgLy8gQW5pbWF0ZSBkb3duXG4gICAgaWYgKCF0aGlzLl9pc01lc3NhZ2VWaXNpYmxlKCkpIHtcbiAgICAgIHRoaXMuX3Nob3dNZXNzYWdlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jbGVhcldhcm5pbmcoKTtcbiAgICB0aGlzLmNsZWFyU3VjY2VzcygpO1xuXG4gICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZXJyb3InLCB0cnVlKTtcblxuICAgIGlmIChtZXNzYWdlKSB7XG4gICAgICB0aGlzLnNldE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cblxuICAvKipcbiAgICogU2V0IHRoZSBlcnJvciBzdGF0ZS5cbiAgICovXG4gIGNsZWFyRXJyb3I6IGZ1bmN0aW9uIGNsZWFyRXJyb3IoKSB7XG4gICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtZXJyb3InLCB0cnVlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHdhcm5pbmcgc3RhdGUuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIE9wdGlvbmFsXG4gICAqL1xuICBzZXRXYXJuaW5nOiBmdW5jdGlvbiBzZXRXYXJuaW5nKG1lc3NhZ2UpIHtcblxuICAgIC8vIEFuaW1hdGUgZG93blxuICAgIGlmICghdGhpcy5faXNNZXNzYWdlVmlzaWJsZSgpKSB7XG4gICAgICB0aGlzLl9zaG93TWVzc2FnZSgpO1xuICAgIH1cblxuICAgIHRoaXMuY2xlYXJFcnJvcigpO1xuICAgIHRoaXMuY2xlYXJTdWNjZXNzKCk7XG5cbiAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZSgnZGF0YS13YXJuaW5nJywgdHJ1ZSk7XG5cbiAgICBpZiAobWVzc2FnZSkge1xuICAgICAgdGhpcy5zZXRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZXJyb3Igc3RhdGUuXG4gICAqL1xuICBjbGVhcldhcm5pbmc6IGZ1bmN0aW9uIGNsZWFyV2FybmluZygpIHtcbiAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS13YXJuaW5nJywgdHJ1ZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cblxuICAvKipcbiAgICogU2V0IHRoZSBzdWNjZXNzIHN0YXRlLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBPcHRpb25hbFxuICAgKi9cbiAgc2V0U3VjY2VzczogZnVuY3Rpb24gc2V0U3VjY2VzcyhtZXNzYWdlKSB7XG5cbiAgICAvLyBBbmltYXRlIGRvd25cbiAgICBpZiAoIXRoaXMuX2lzTWVzc2FnZVZpc2libGUoKSkge1xuICAgICAgdGhpcy5fc2hvd01lc3NhZ2UoKTtcbiAgICB9XG5cbiAgICB0aGlzLmNsZWFyRXJyb3IoKTtcbiAgICB0aGlzLmNsZWFyV2FybmluZygpO1xuXG4gICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3VjY2VzcycsIHRydWUpO1xuXG4gICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgIHRoaXMuc2V0TWVzc2FnZShtZXNzYWdlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN1Y2Nlc3Mgc3RhdGUuXG4gICAqL1xuICBjbGVhclN1Y2Nlc3M6IGZ1bmN0aW9uIGNsZWFyU3VjY2VzcygpIHtcbiAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zdWNjZXNzJywgdHJ1ZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cblxuICAvKipcbiAgICogQ2xlYXIgYWxsIG1lc3NhZ2VzLlxuICAgKi9cbiAgY2xlYXJNZXNzYWdlczogZnVuY3Rpb24gY2xlYXJNZXNzYWdlcygpIHtcbiAgICB0aGlzLl9oaWRlTWVzc2FnZShmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNsZWFyRXJyb3IoKTtcbiAgICAgIHRoaXMuY2xlYXJXYXJuaW5nKCk7XG4gICAgICB0aGlzLmNsZWFyU3VjY2VzcygpO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cblxuICAvKipcbiAgICogU2V0IHRoZSBtZXNzYWdlIHRleHQuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqL1xuICBzZXRNZXNzYWdlOiBmdW5jdGlvbiBzZXRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICB0aGlzLm1lc3NhZ2VFbC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIFNob3cgdGhlIG1lc3NhZ2VcbiAgICovXG4gIF9zaG93TWVzc2FnZTogZnVuY3Rpb24gX3Nob3dNZXNzYWdlKCkge1xuXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VFbC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMubWVzc2FnZUVsKTtcbiAgICB9XG5cbiAgICAoMCwgX2hlaWdodDIuZGVmYXVsdCkoe1xuICAgICAgZWw6IHRoaXMuZWwsXG4gICAgICB0b2dnbGVFbDogdGhpcy5tZXNzYWdlRWxcbiAgICB9KTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBIaWRlIHRoZSBtZXNzYWdlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgX2hpZGVNZXNzYWdlOiBmdW5jdGlvbiBfaGlkZU1lc3NhZ2UoY2FsbGJhY2spIHtcblxuICAgICgwLCBfaGVpZ2h0Mi5kZWZhdWx0KSh7XG4gICAgICBlbDogdGhpcy5lbCxcbiAgICAgIHRvZ2dsZUVsOiB0aGlzLm1lc3NhZ2VFbCxcbiAgICAgIHRvZ2dsZVZhbHVlOiAnbm9uZScsXG4gICAgICBhY3Rpb246ICdjb2xsYXBzZScsXG4gICAgICBvbkNvbXBsZXRlOiBjYWxsYmFja1xuICAgIH0pO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIElzIHRoZSBtZXNzYWdlIGN1cnJlbnRseSB2aXNpYmxlP1xuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgX2lzTWVzc2FnZVZpc2libGU6IGZ1bmN0aW9uIF9pc01lc3NhZ2VWaXNpYmxlKCkge1xuICAgIHJldHVybiB0aGlzLmVsLmdldEF0dHJpYnV0ZSgnZGF0YS1lcnJvcicpIHx8IHRoaXMuZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXdhcm5pbmcnKSB8fCB0aGlzLmVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zdWNjZXNzJyk7XG4gIH1cbn07IC8qKlxuICAgICogIyBNZXNzYWdpbmcgTWl4aW5cbiAgICAqIEFkZCBmdW5jdGlvbmFsaXR5IGZvciBzaG93aW5nIG1lc3NhZ2VzIHJlbGF0ZWQgdG8gYSBmb3JtIGZpZWxkLlxuICAgICpcbiAgICAqIEBleGFtcGxlXG4gICAgKiBtaXhpbihDb21wb25lbnQsIG1lc3NhZ2luZyk7XG4gICAgKlxuICAgICogQG1vZHVsZSBtaXhpbi9tZXNzYWdpbmcuanNcbiAgICAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lc3NhZ2luZy5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuLyoqXG4gKiAjIFZhbGlkYXRpb24gTWl4aW5cbiAqIEFkZCBmdW5jdGlvbmFsaXR5IGZvciB2YWxpZGF0aW5nIGEgZm9ybSBmaWVsZCdzIHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBtaXhpbihDb21wb25lbnQsIHZhbGlkYXRpb24pO1xuICpcbiAqIEBtb2R1bGUgbWl4aW4vdmFsaWRhdGlvbi5qc1xuICovXG5cbmV4cG9ydHMuZGVmYXVsdCA9IHtcblxuICAvKipcbiAgICogRGVmYXVsdCB2YWxpZGF0ZSBmdW5jdGlvbi4gVGhpcyBjYW4gYmUgb3ZlcnJpZGRlbiBieSBwYXNzaW5nIGFcbiAgICogY3VzdG9tIHZhbGlkYXRlIG1ldGhvZCBhcyBhIHBhcmFtZXRlci4gVGhpcyByZWFsbHkgb25seSBoZWxwcyBvdXRcbiAgICogb2YgdGhlIGJveCBmb3IgdGV4dCBpbnB1dHMuXG4gICAqL1xuICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoKSB7XG5cbiAgICB2YXIgdmFsaWRhdGUgPSB0aGlzLnZhbGlkYXRlUGF0dGVybjtcblxuICAgIC8vIE5vdGhpbmcgdG8gdmFsaWRhdGUuXG4gICAgaWYgKCF0aGlzLm9uVmFsaWRhdGUgfHwgIXZhbGlkYXRlKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKHZhbGlkYXRlKTtcblxuICAgIHRoaXMub25WYWxpZGF0ZShyZS50ZXN0KHRoaXMuZ2V0VmFsdWUoKSksIHRoaXMuZ2V0VmFsdWUoKSwgdGhpcyk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxufTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12YWxpZGF0aW9uLmpzLm1hcFxuIl19"}